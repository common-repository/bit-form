var Xb=Object.defineProperty,Zb=Object.defineProperties;var Qb=Object.getOwnPropertyDescriptors;var Dc=Object.getOwnPropertySymbols;var Bm=Object.prototype.hasOwnProperty,Um=Object.prototype.propertyIsEnumerable;var Vm=Math.pow,Gm=(t,e,s)=>e in t?Xb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,I=(t,e)=>{for(var s in e||(e={}))Bm.call(e,s)&&Gm(t,s,e[s]);if(Dc)for(var s of Dc(e))Um.call(e,s)&&Gm(t,s,e[s]);return t},L=(t,e)=>Zb(t,Qb(e));var zm=(t,e)=>{var s={};for(var i in t)Bm.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&Dc)for(var i of Dc(t))e.indexOf(i)<0&&Um.call(t,i)&&(s[i]=t[i]);return s};var Gu=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(Gu(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},T=(t,e,s,i)=>(Gu(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var l=(t,e,s)=>(Gu(t,e,"access private method"),s);var Ro=(t,e,s)=>new Promise((i,n)=>{var o=c=>{try{h(s.next(c))}catch(d){n(d)}},a=c=>{try{h(s.throw(c))}catch(d){n(d)}},h=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,a);h((s=s.apply(t,e)).next())});import{w as Su,u as K,dZ as Jb,aF as Es,r as F,j as u,cV as S,cW as A,R as Oe,h as cn,ag as Bt,aL as At,d_ as Kb,q as Vr,aI as Tt,$ as Mc,d$ as bt,J as zr,bX as Io,a1 as hn,aw as Ru,g as Ce,A as ha,y as Cu,v as um,bZ as Zo,_ as Li,c3 as Ou,aP as Lu,e0 as pm,n as tI,b6 as Xf,c1 as Zf,aA as Qf,b$ as Jf,da as Kf,aj as mm,cb as tg,cI as eg,l as sg,d3 as ig,e1 as Zc,e2 as ng,bT as vh,a3 as Qo,I as rg,c0 as ag,cY as eI,b_ as og,bp as sI,aH as fm,e3 as gm,L as iI,E as nI,Z as rI,aT as aI}from"./main-700.js";import{h as wh,s as Xu,a as lg,j as cg,r as hg,B as oI}from"./bf-783-86.js";import{C as lI}from"./bf-519-136.js";import{R as dg,F as Th,M as cI,a as hI}from"./bf-656-108.js";import{R as ut}from"./bf-688-143.js";import"./bf-748-73.js";import"./bf-335-109.js";import"./bf-420-76.js";import"./bf-968-110.js";import"./bf-622-112.js";import"./bf-497-85.js";import"./bf-606-117.js";import"./bf-645-111.js";import"./bf-348-113.js";import"./bf-13-114.js";import"./bf-571-115.js";import"./bf-173-116.js";import"./bf-848-118.js";import"./bf-212-75.js";var Ts,Vs,Ea,Xe,Ze,ji,ba,tl,el,sl,fr,In,il,Qe,Nh,ug,Ph,pg,Dh,mg,Fh,fg,ki,sr,jh,gg,_n,Yr,nl,Zu,vn,Xr,Ia,Qc;class dI{constructor(e,s){b(this,Nh);b(this,Ph);b(this,Dh);b(this,Fh);b(this,ki);b(this,jh);b(this,_n);b(this,nl);b(this,vn);b(this,Ia);b(this,Ts,null);b(this,Vs,null);b(this,Ea,null);b(this,Xe,null);b(this,Ze,{});b(this,ji,null);b(this,ba,null);b(this,tl,null);b(this,el,null);b(this,sl,null);b(this,fr,null);b(this,In,[]);b(this,il,null);b(this,Qe,{document:{},formID:null,configSetting:{},ajaxURL:null,nonce:null,uploadFileToServer:null});var i,n,o,a;Object.assign(r(this,Qe),s),T(this,ji,s.fieldKey),T(this,Xe,s.window?s.window:window),T(this,Ea,s.document?s.document:document),T(this,il,s.contentId),typeof e=="string"?T(this,Ts,r(this,Ea).querySelector(e)):T(this,Ts,e),T(this,ba,r(this,Qe).formID),T(this,Ze,r(this,Qe).configSetting),T(this,tl,r(this,Qe).ajaxURL),T(this,el,((o=(n=(i=r(this,Xe))==null?void 0:i.bf_globals)==null?void 0:n[r(this,il)])==null?void 0:o.nonce)||((a=r(this,Qe))==null?void 0:a.nonce)),T(this,sl,r(this,Qe).uploadFileToServer),this.uploaded_files=[],this.on_select_upload=!1,this.init()}init(){this.files=[];const e=[];r(this,Ze).allowFileSizeValidation&&e.push(r(this,Xe).bit_filepond_plugin_file_validate_size),r(this,Ze).allowFileTypeValidation&&e.push(r(this,Xe).bit_filepond_plugin_file_validate_type),r(this,Ze).allowImageCrop&&e.push(r(this,Xe).bit_filepond_plugin_image_crop),r(this,Ze).allowImagePreview&&e.push(r(this,Xe).bit_filepond_plugin_image_preview),r(this,Ze).allowImageResize&&e.push(r(this,Xe).bit_filepond_plugin_image_resize),r(this,Ze).allowImageTransform&&e.push(r(this,Xe).bit_filepond_plugin_image_transform),r(this,Ze).allowImageValidateSize&&e.push(r(this,Xe).bit_filepond_plugin_image_validate_size),r(this,Ze).allowPreview&&e.push(r(this,Xe).bit_filepond_plugin_media_preview);const{create:s,registerPlugin:i}=r(this,Xe).bit_filepond;if(i(...e),T(this,Vs,s(r(this,Ze))),r(this,Ts).appendChild(r(this,Vs).element),setTimeout(()=>{r(this,Ts)&&r(this,Ts).parentNode.parentNode.querySelector(`.${r(this,ji)}-lbl`).setAttribute("for",l(this,Ia,Qc).call(this,'input[name="filepond"]').id)},1e3),r(this,Qe).onFileUpdate&&r(this,Vs).on("updatefiles",r(this,Qe).onFileUpdate),r(this,sl)){const n=new URL(r(this,tl));this.on_select_upload=r(this,Ze).instantUpload,n.searchParams.append("_ajax_nonce",r(this,el));let o=null;r(this,Vs).setOptions({server:{process:(a,h,c,d,p,m,E)=>{const f=new FormData;n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_upload"),f.append(r(this,ji),h,h.name),f.append("fieldKey",r(this,ji)),f.append("formID",r(this,ba));const g=new XMLHttpRequest;return g.open("POST",n.href),g.upload.onprogress=_=>{m(_.lengthComputable,_.loaded,_.total)},g.onload=()=>{var _,v;o=JSON.parse(g.responseText),g.status>=200&&g.status<300?(this.uploaded_files.push((_=o==null?void 0:o.data)==null?void 0:_.file_name),d((v=o==null?void 0:o.data)==null?void 0:v.file_name)):p()},g.send(f),{abort:()=>{g.abort(),E()}}},revert:(a,h,c)=>{if(this.uploaded_files.find(p=>p===a)){const p=this.uploaded_files.indexOf(a);this.uploaded_files.splice(p,1),n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_delete"),n.searchParams.append("file_name",a),n.searchParams.append("formID",r(this,ba));const m=new XMLHttpRequest;return m.open("DELETE",n.href),m.onload=()=>{m.status>=200&&m.status<300?h():c()},m.send(),{abort:()=>{m.abort()}}}}},labelFileProcessingError:()=>o==null?void 0:o.data}),r(this,Vs).on("updatefiles",()=>{this.files=[],this.files=r(this,Vs).getFiles()})}r(this,Qe).oldFiles&&l(this,Nh,ug).call(this,r(this,Qe).oldFiles)}reset(){r(this,Vs).destroy(r(this,Vs).element),r(this,Ts).innerHTML="",this.init()}}Ts=new WeakMap,Vs=new WeakMap,Ea=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,ji=new WeakMap,ba=new WeakMap,tl=new WeakMap,el=new WeakMap,sl=new WeakMap,fr=new WeakMap,In=new WeakMap,il=new WeakMap,Qe=new WeakMap,Nh=new WeakSet,ug=function(e){const s=JSON.parse(e);T(this,In,JSON.parse(e)),T(this,fr,l(this,ki,sr).call(this,"div")),l(this,_n,Yr).call(this,r(this,fr),"old-file-list"),s.forEach(n=>{l(this,Ph,pg).call(this,n)});const i=l(this,ki,sr).call(this,"input");i.type="hidden",i.name=`${r(this,ji)}_old`,i.value=r(this,In).toString(),r(this,Ts).appendChild(r(this,fr)),r(this,Ts).appendChild(i)},Ph=new WeakSet,pg=function(e){const s=l(this,ki,sr).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");s.id=`file-wrp-${i}`,l(this,_n,Yr).call(this,s,"file-wrpr");const n=l(this,ki,sr).call(this,"div");l(this,_n,Yr).call(this,n,"file-details");const o=l(this,ki,sr).call(this,"a");l(this,_n,Yr).call(this,o,"file-title"),l(this,vn,Xr).call(this,o,"target","_blank"),l(this,vn,Xr).call(this,o,"href",`${r(this,Qe).baseDLURL}&fileID=${e}`),l(this,nl,Zu).call(this,o,e),n.append(o),s.append(n);const a=l(this,ki,sr).call(this,"button");l(this,_n,Yr).call(this,a,"cross-btn"),l(this,vn,Xr).call(this,a,"data-file-id",i),l(this,vn,Xr).call(this,a,"data-file-name",e),l(this,vn,Xr).call(this,a,"type","button"),l(this,nl,Zu).call(this,a,"Ã—"),l(this,jh,gg).call(this,a,"click",h=>l(this,Dh,mg).call(this,h)),s.append(a),r(this,fr).appendChild(s)},Dh=new WeakSet,mg=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,Fh,fg).call(this,`#file-wrp-${s}`),T(this,In,r(this,In).filter(n=>n!==i)),l(this,Ia,Qc).call(this,`input[name="${r(this,ji)}_old"]`).value=r(this,In).toString()},Fh=new WeakSet,fg=function(e){var s;(s=l(this,Ia,Qc).call(this,e))==null||s.remove()},ki=new WeakSet,sr=function(e){return r(this,Ea).createElement(e)},jh=new WeakSet,gg=function(e,s,i){e.addEventListener(s,i)},_n=new WeakSet,Yr=function(e,s){e.classList.add(s)},nl=new WeakSet,Zu=function(e,s){e.textContent=s},vn=new WeakSet,Xr=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Ia=new WeakSet,Qc=function(e){return r(this,Ts).querySelector(e)||console.error("selector not found",e)};/*!
* FilePondPluginFileValidateSize 2.2.8
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const Eg=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,toNaturalFileSize:n}=e;return t("ALLOW_HOPPER_ITEM",(o,{query:a})=>{if(!a("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const h=a("GET_MAX_FILE_SIZE");if(h!==null&&o.size>h)return!1;const c=a("GET_MIN_FILE_SIZE");return!(c!==null&&o.size<c)}),t("LOAD_FILE",(o,{query:a})=>new Promise((h,c)=>{if(!a("GET_ALLOW_FILE_SIZE_VALIDATION"))return h(o);const d=a("GET_FILE_VALIDATE_SIZE_FILTER");if(d&&!d(o))return h(o);const p=a("GET_MAX_FILE_SIZE");if(p!==null&&o.size>p){c({status:{main:a("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:i(a("GET_LABEL_MAX_FILE_SIZE"),{filesize:n(p,".",a("GET_FILE_SIZE_BASE"),a("GET_FILE_SIZE_LABELS",a))})}});return}const m=a("GET_MIN_FILE_SIZE");if(m!==null&&o.size<m){c({status:{main:a("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:i(a("GET_LABEL_MIN_FILE_SIZE"),{filesize:n(m,".",a("GET_FILE_SIZE_BASE"),a("GET_FILE_SIZE_LABELS",a))})}});return}const E=a("GET_MAX_TOTAL_FILE_SIZE");if(E!==null&&a("GET_ACTIVE_ITEMS").reduce((g,_)=>g+_.fileSize,0)>E){c({status:{main:a("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:i(a("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:n(E,".",a("GET_FILE_SIZE_BASE"),a("GET_FILE_SIZE_LABELS",a))})}});return}h(o)})),{options:{allowFileSizeValidation:[!0,s.BOOLEAN],maxFileSize:[null,s.INT],minFileSize:[null,s.INT],maxTotalFileSize:[null,s.INT],fileValidateSizeFilter:[null,s.FUNCTION],labelMinFileSizeExceeded:["File is too small",s.STRING],labelMinFileSize:["Minimum file size is {filesize}",s.STRING],labelMaxFileSizeExceeded:["File is too large",s.STRING],labelMaxFileSize:["Maximum file size is {filesize}",s.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",s.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",s.STRING]}}},uI=typeof window!="undefined"&&typeof window.document!="undefined";uI&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Eg}));/*!
* FilePondPluginFileValidateType 1.2.9
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const bg=({addFilter:t,utils:e})=>{const{Type:s,isString:i,replaceInString:n,guesstimateMimeType:o,getExtensionFromFilename:a,getFilenameFromURL:h}=e,c=(f,g)=>{const _=(/^[^/]+/.exec(f)||[]).pop(),v=g.slice(0,-2);return _===v},d=(f,g)=>f.some(_=>/\*$/.test(_)?c(g,_):_===g),p=f=>{let g="";if(i(f)){const _=h(f),v=a(_);v&&(g=o(v))}else g=f.type;return g},m=(f,g,_)=>{if(g.length===0)return!0;const v=p(f);return _?new Promise((R,w)=>{_(f,v).then(x=>{d(g,x)?R():w()}).catch(w)}):d(g,v)},E=f=>g=>f[g]===null?!1:f[g]||g;return t("SET_ATTRIBUTE_TO_OPTION_MAP",f=>Object.assign(f,{accept:"acceptedFileTypes"})),t("ALLOW_HOPPER_ITEM",(f,{query:g})=>g("GET_ALLOW_FILE_TYPE_VALIDATION")?m(f,g("GET_ACCEPTED_FILE_TYPES")):!0),t("LOAD_FILE",(f,{query:g})=>new Promise((_,v)=>{if(!g("GET_ALLOW_FILE_TYPE_VALIDATION")){_(f);return}const R=g("GET_ACCEPTED_FILE_TYPES"),w=g("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),x=m(f,R,w),C=()=>{const O=R.map(E(g("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(P=>P!==!1),y=O.filter((P,$)=>O.indexOf(P)===$);v({status:{main:g("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:n(g("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:y.join(", "),allButLastType:y.slice(0,-1).join(", "),lastType:y[y.length-1]})}})};if(typeof x=="boolean")return x?_(f):C();x.then(()=>{_(f)}).catch(C)})),{options:{allowFileTypeValidation:[!0,s.BOOLEAN],acceptedFileTypes:[[],s.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",s.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",s.STRING],fileValidateTypeLabelExpectedTypesMap:[{},s.OBJECT],fileValidateTypeDetectType:[null,s.FUNCTION]}}},pI=typeof window!="undefined"&&typeof window.document!="undefined";pI&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:bg}));/*!
* FilePondPluginImageCrop 2.0.6
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const Wm=t=>/^image/.test(t.type),Ig=({addFilter:t,utils:e})=>{const{Type:s,isFile:i,getNumericAspectRatioFromString:n}=e,o=(d,p)=>!(!Wm(d.file)||!p("GET_ALLOW_IMAGE_CROP")),a=d=>typeof d=="object",h=d=>typeof d=="number",c=(d,p)=>d.setMetadata("crop",Object.assign({},d.getMetadata("crop"),p));return t("DID_CREATE_ITEM",(d,{query:p})=>{d.extend("setImageCrop",m=>{if(!(!o(d,p)||!a(center)))return d.setMetadata("crop",m),m}),d.extend("setImageCropCenter",m=>{if(!(!o(d,p)||!a(m)))return c(d,{center:m})}),d.extend("setImageCropZoom",m=>{if(!(!o(d,p)||!h(m)))return c(d,{zoom:Math.max(1,m)})}),d.extend("setImageCropRotation",m=>{if(!(!o(d,p)||!h(m)))return c(d,{rotation:m})}),d.extend("setImageCropFlip",m=>{if(!(!o(d,p)||!a(m)))return c(d,{flip:m})}),d.extend("setImageCropAspectRatio",m=>{if(!o(d,p)||typeof m=="undefined")return;const E=d.getMetadata("crop"),f=n(m),g={center:{x:.5,y:.5},flip:E?Object.assign({},E.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:f};return d.setMetadata("crop",g),g})}),t("DID_LOAD_ITEM",(d,{query:p})=>new Promise((m,E)=>{const f=d.file;if(!i(f)||!Wm(f)||!p("GET_ALLOW_IMAGE_CROP")||d.getMetadata("crop"))return m(d);const _=p("GET_IMAGE_CROP_ASPECT_RATIO");d.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:_?n(_):null}),m(d)})),{options:{allowImageCrop:[!0,s.BOOLEAN],imageCropAspectRatio:[null,s.STRING]}}},mI=typeof window!="undefined"&&typeof window.document!="undefined";mI&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ig}));/*!
* FilePondPluginImagePreview 4.6.12
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const fI=t=>/^image/.test(t.type),Hm=(t,e)=>Jo(t.x*e,t.y*e),qm=(t,e)=>Jo(t.x+e.x,t.y+e.y),gI=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:Jo(t.x/e,t.y/e)},Fc=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),o=Jo(t.x-s.x,t.y-s.y);return Jo(s.x+i*o.x-n*o.y,s.y+n*o.x+i*o.y)},Jo=(t=0,e=0)=>({x:t,y:e}),ss=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},EI=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",o=t.borderColor||t.lineColor||"transparent",a=ss(t.borderWidth||t.lineWidth,e,s),h=t.lineCap||"round",c=t.lineJoin||"round",d=typeof i=="string"?"":i.map(m=>ss(m,e,s)).join(","),p=t.opacity||1;return{"stroke-linecap":h,"stroke-linejoin":c,"stroke-width":a||0,"stroke-dasharray":d,stroke:o,fill:n,opacity:p}},bs=t=>t!=null,bI=(t,e,s=1)=>{let i=ss(t.x,e,s,"width")||ss(t.left,e,s,"width"),n=ss(t.y,e,s,"height")||ss(t.top,e,s,"height"),o=ss(t.width,e,s,"width"),a=ss(t.height,e,s,"height"),h=ss(t.right,e,s,"width"),c=ss(t.bottom,e,s,"height");return bs(n)||(bs(a)&&bs(c)?n=e.height-a-c:n=c),bs(i)||(bs(o)&&bs(h)?i=e.width-o-h:i=h),bs(o)||(bs(i)&&bs(h)?o=e.width-i-h:o=0),bs(a)||(bs(n)&&bs(c)?a=e.height-n-c:a=0),{x:i||0,y:n||0,width:o||0,height:a||0}},II=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Ai=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),_I="http://www.w3.org/2000/svg",da=(t,e)=>{const s=document.createElementNS(_I,t);return e&&Ai(s,e),s},vI=t=>Ai(t,I(I({},t.rect),t.styles)),wI=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return Ai(t,I({cx:e,cy:s,rx:i,ry:n},t.styles))},TI={contain:"xMidYMid meet",cover:"xMidYMid slice"},xI=(t,e)=>{Ai(t,L(I(I({},t.rect),t.styles),{preserveAspectRatio:TI[e.fit]||"none"}))},SI={left:"start",center:"middle",right:"end"},RI=(t,e,s,i)=>{const n=ss(e.fontSize,s,i),o=e.fontFamily||"sans-serif",a=e.fontWeight||"normal",h=SI[e.textAlign]||"start";Ai(t,L(I(I({},t.rect),t.styles),{"stroke-width":0,"font-weight":a,"font-size":n,"font-family":o,"text-anchor":h})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},CI=(t,e,s,i)=>{Ai(t,L(I(I({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],o=t.childNodes[1],a=t.childNodes[2],h=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Ai(n,{x1:h.x,y1:h.y,x2:c.x,y2:c.y}),!e.lineDecoration)return;o.style.display="none",a.style.display="none";const d=gI({x:c.x-h.x,y:c.y-h.y}),p=ss(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const m=Hm(d,p),E=qm(h,m),f=Fc(h,2,E),g=Fc(h,-2,E);Ai(o,{style:"display:block;",d:`M${f.x},${f.y} L${h.x},${h.y} L${g.x},${g.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const m=Hm(d,-p),E=qm(c,m),f=Fc(c,2,E),g=Fc(c,-2,E);Ai(a,{style:"display:block;",d:`M${f.x},${f.y} L${c.x},${c.y} L${g.x},${g.y}`})}},OI=(t,e,s,i)=>{Ai(t,L(I({},t.styles),{fill:"none",d:II(e.points.map(n=>({x:ss(n.x,s,i,"width"),y:ss(n.y,s,i,"height")})))}))},jc=t=>e=>da(t,{id:e.id}),LI=t=>{const e=da("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},AI=t=>{const e=da("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=da("line");e.appendChild(s);const i=da("path");e.appendChild(i);const n=da("path");return e.appendChild(n),e},$I={image:LI,rect:jc("rect"),ellipse:jc("ellipse"),text:jc("text"),path:jc("path"),line:AI},yI={rect:vI,ellipse:wI,image:xI,text:RI,path:OI,line:CI},MI=(t,e)=>$I[t](e),NI=(t,e,s,i,n)=>{e!=="path"&&(t.rect=bI(s,i,n)),t.styles=EI(s,i,n),yI[e](t,s,i,n)},PI=["x","y","left","top","right","bottom","width","height"],DI=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,FI=t=>{const[e,s]=t,i=s.points?{}:PI.reduce((n,o)=>(n[o]=DI(s[o]),n),{});return[e,I(I({zIndex:0},s),i)]},jI=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,kI=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:s})=>{if(!s.dirty)return;const{crop:i,resize:n,markup:o}=s,a=s.width,h=s.height;let c=i.width,d=i.height;if(n){const{size:f}=n;let g=f&&f.width,_=f&&f.height;const v=n.mode,R=n.upscale;g&&!_&&(_=g),_&&!g&&(g=_);const w=c<g&&d<_;if(!w||w&&R){let x=g/c,C=_/d;if(v==="force")c=g,d=_;else{let O;v==="cover"?O=Math.max(x,C):v==="contain"&&(O=Math.min(x,C)),c=c*O,d=d*O}}}const p={width:a,height:h};e.element.setAttribute("width",p.width),e.element.setAttribute("height",p.height);const m=Math.min(a/c,h/d);e.element.innerHTML="";const E=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(E).map(FI).sort(jI).forEach(f=>{const[g,_]=f,v=MI(g,_);NI(v,g,_,p,m),e.element.appendChild(v)})}}),Ho=(t,e)=>({x:t,y:e}),GI=(t,e)=>t.x*e.x+t.y*e.y,Ym=(t,e)=>Ho(t.x-e.x,t.y-e.y),BI=(t,e)=>GI(Ym(t,e),Ym(t,e)),Xm=(t,e)=>Math.sqrt(BI(t,e)),Zm=(t,e)=>{const s=t,i=1.5707963267948966,n=e,o=1.5707963267948966-e,a=Math.sin(i),h=Math.sin(n),c=Math.sin(o),d=Math.cos(o),p=s/a,m=p*h,E=p*c;return Ho(d*m,d*E)},UI=(t,e)=>{const s=t.width,i=t.height,n=Zm(s,e),o=Zm(i,e),a=Ho(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),h=Ho(t.x+t.width+Math.abs(o.y),t.y+Math.abs(o.x)),c=Ho(t.x-Math.abs(o.y),t.y+t.height-Math.abs(o.x));return{width:Xm(a,h),height:Xm(a,c)}},VI=(t,e,s=1)=>{const i=t.height/t.width;let n=1,o=e,a=1,h=i;h>o&&(h=o,a=h/i);const c=Math.max(n/a,o/h),d=t.width/(s*c*a),p=d*e;return{width:d,height:p}},_g=(t,e,s,i)=>{const n=i.x>.5?1-i.x:i.x,o=i.y>.5?1-i.y:i.y,a=n*2*t.width,h=o*2*t.height,c=UI(e,s);return Math.max(c.width/a,c.height/h)},vg=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,o=(t.height-i)*.5;return{x:n,y:o,width:s,height:i}},zI=(t,e={})=>{let{zoom:s,rotation:i,center:n,aspectRatio:o}=e;o||(o=t.height/t.width);const a=VI(t,o,s),h={x:a.width*.5,y:a.height*.5},c={x:0,y:0,width:a.width,height:a.height,center:h},d=typeof e.scaleToFit=="undefined"||e.scaleToFit,p=_g(t,vg(c,o),i,d?n:{x:.5,y:.5}),m=s*p;return{widthFloat:a.width/m,heightFloat:a.height/m,width:Math.round(a.width/m),height:Math.round(a.height/m)}},di={type:"spring",stiffness:.5,damping:.45,mass:10},WI=t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:s})=>{e.appendChild(s.image)}}),HI=t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:di,originY:di,scaleX:di,scaleY:di,translateX:di,translateY:di,rotateZ:di}},create:({root:e,props:s})=>{s.width=s.image.width,s.height=s.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(WI(t),{image:s.image}))},write:({root:e,props:s})=>{const{flip:i}=s.crop,{bitmap:n}=e.ref;n.scaleX=i.horizontal?-1:1,n.scaleY=i.vertical?-1:1}}),qI=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:s}){s.background&&(e.element.style.backgroundColor=s.background)},create:({root:e,props:s})=>{e.ref.image=e.appendChildView(e.createChildView(HI(t),Object.assign({},s))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(kI(t),Object.assign({},s))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const i=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?e.element.dataset.transparencyIndicator=i:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:s,shouldOptimize:i})=>{const{crop:n,markup:o,resize:a,dirty:h,width:c,height:d}=s;e.ref.image.crop=n;const p={x:0,y:0,width:c,height:d,center:{x:c*.5,y:d*.5}},m={width:e.ref.image.width,height:e.ref.image.height},E={x:n.center.x*m.width,y:n.center.y*m.height},f={x:p.center.x-m.width*n.center.x,y:p.center.y-m.height*n.center.y},g=Math.PI*2+n.rotation%(Math.PI*2),_=n.aspectRatio||m.height/m.width,v=typeof n.scaleToFit=="undefined"||n.scaleToFit,R=_g(m,vg(p,_),g,v?n.center:{x:.5,y:.5}),w=n.zoom*R;o&&o.length?(e.ref.createMarkup(),e.ref.markup.width=c,e.ref.markup.height=d,e.ref.markup.resize=a,e.ref.markup.dirty=h,e.ref.markup.markup=o,e.ref.markup.crop=zI(m,n)):e.ref.markup&&e.ref.destroyMarkup();const x=e.ref.image;if(i){x.originX=null,x.originY=null,x.translateX=null,x.translateY=null,x.rotateZ=null,x.scaleX=null,x.scaleY=null;return}x.originX=E.x,x.originY=E.y,x.translateX=f.x,x.translateY=f.y,x.rotateZ=g,x.scaleX=w,x.scaleY=w}}),YI=t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:di,scaleY:di,translateY:di,opacity:{type:"tween",duration:400}}},create:({root:e,props:s})=>{e.ref.clip=e.appendChildView(e.createChildView(qI(t),{id:s.id,image:s.image,crop:s.crop,markup:s.markup,resize:s.resize,dirty:s.dirty,background:s.background}))},write:({root:e,props:s,shouldOptimize:i})=>{const{clip:n}=e.ref,{image:o,crop:a,markup:h,resize:c,dirty:d}=s;if(n.crop=a,n.markup=h,n.resize=c,n.dirty=d,n.opacity=i?0:1,i||e.rect.element.hidden)return;const p=o.height/o.width;let m=a.aspectRatio||p;const E=e.rect.inner.width,f=e.rect.inner.height;let g=e.query("GET_IMAGE_PREVIEW_HEIGHT");const _=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),v=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),R=e.query("GET_PANEL_ASPECT_RATIO"),w=e.query("GET_ALLOW_MULTIPLE");R&&!w&&(g=E*R,m=R);let x=g!==null?g:Math.max(_,Math.min(E*m,v)),C=x/m;C>E&&(C=E,x=C*m),x>f&&(x=f,C=f/m),n.width=C,n.height=x}});let XI=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Qm=0;const ZI=t=>t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{let i=XI;if(document.querySelector("base")){const n=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+n+"#")}Qm++,e.element.classList.add(`filepond--image-preview-overlay-${s.status}`),e.element.innerHTML=i.replace(/__UID__/g,Qm)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),QI=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then(e=>{self.postMessage({id:t.data.id,message:e},[e])})}},JI=function(){self.onmessage=t=>{const e=t.data.message.imageData,s=t.data.message.colorMatrix,i=e.data,n=i.length,o=s[0],a=s[1],h=s[2],c=s[3],d=s[4],p=s[5],m=s[6],E=s[7],f=s[8],g=s[9],_=s[10],v=s[11],R=s[12],w=s[13],x=s[14],C=s[15],O=s[16],y=s[17],P=s[18],$=s[19];let D=0,V=0,B=0,G=0,X=0;for(;D<n;D+=4)V=i[D]/255,B=i[D+1]/255,G=i[D+2]/255,X=i[D+3]/255,i[D]=Math.max(0,Math.min((V*o+B*a+G*h+X*c+d)*255,255)),i[D+1]=Math.max(0,Math.min((V*p+B*m+G*E+X*f+g)*255,255)),i[D+2]=Math.max(0,Math.min((V*_+B*v+G*R+X*w+x)*255,255)),i[D+3]=Math.max(0,Math.min((V*C+B*O+G*y+X*P+$)*255,255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},KI=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e(i,n)},s.src=t},t_={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},e_=(t,e,s,i)=>{i!==-1&&t.transform.apply(t,t_[i](e,s))},s_=(t,e,s,i)=>{e=Math.round(e),s=Math.round(s);const n=document.createElement("canvas");n.width=e,n.height=s;const o=n.getContext("2d");return i>=5&&i<=8&&([e,s]=[s,e]),e_(o,e,s,i),o.drawImage(t,0,0,e,s),n},wg=t=>/^image/.test(t.type)&&!/svg/.test(t.type),i_=10,n_=10,r_=t=>{const e=Math.min(i_/t.width,n_/t.height),s=document.createElement("canvas"),i=s.getContext("2d"),n=s.width=Math.ceil(t.width*e),o=s.height=Math.ceil(t.height*e);i.drawImage(t,0,0,n,o);let a=null;try{a=i.getImageData(0,0,n,o).data}catch(E){return null}const h=a.length;let c=0,d=0,p=0,m=0;for(;m<h;m+=4)c+=a[m]*a[m],d+=a[m+1]*a[m+1],p+=a[m+2]*a[m+2];return c=Bu(c,h),d=Bu(d,h),p=Bu(p,h),{r:c,g:d,b:p}},Bu=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),a_=(t,e)=>(e=e||document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e),o_=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},l_=t=>new Promise((e,s)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),c_=t=>{const e=ZI(t),s=YI(t),{createWorker:i}=t.utils,n=(w,x,C)=>new Promise(O=>{w.ref.imageData||(w.ref.imageData=C.getContext("2d").getImageData(0,0,C.width,C.height));const y=o_(w.ref.imageData);if(!x||x.length!==20)return C.getContext("2d").putImageData(y,0,0),O();const P=i(JI);P.post({imageData:y,colorMatrix:x},$=>{C.getContext("2d").putImageData($,0,0),P.terminate(),O()},[y.data.buffer])}),o=(w,x)=>{w.removeChildView(x),x.image.width=1,x.image.height=1,x._destroy()},a=({root:w})=>{const x=w.ref.images.shift();return x.opacity=0,x.translateY=-15,w.ref.imageViewBin.push(x),x},h=({root:w,props:x,image:C})=>{const O=x.id,y=w.query("GET_ITEM",{id:O});if(!y)return;const P=y.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},$=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let D,V,B=!1;w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(D=y.getMetadata("markup")||[],V=y.getMetadata("resize"),B=!0);const G=w.appendChildView(w.createChildView(s,{id:O,image:C,crop:P,resize:V,markup:D,dirty:B,background:$,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),w.childViews.length);w.ref.images.push(G),G.opacity=1,G.scaleX=1,G.scaleY=1,G.translateY=0,setTimeout(()=>{w.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:O})},250)},c=({root:w,props:x})=>{const C=w.query("GET_ITEM",{id:x.id});if(!C)return;const O=w.ref.images[w.ref.images.length-1];O.crop=C.getMetadata("crop"),O.background=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(O.dirty=!0,O.resize=C.getMetadata("resize"),O.markup=C.getMetadata("markup"))},d=({root:w,props:x,action:C})=>{if(!/crop|filter|markup|resize/.test(C.change.key)||!w.ref.images.length)return;const O=w.query("GET_ITEM",{id:x.id});if(O){if(/filter/.test(C.change.key)){const y=w.ref.images[w.ref.images.length-1];n(w,C.change.value,y.image);return}if(/crop|markup|resize/.test(C.change.key)){const y=O.getMetadata("crop"),P=w.ref.images[w.ref.images.length-1];if(y&&y.aspectRatio&&P.crop&&P.crop.aspectRatio&&Math.abs(y.aspectRatio-P.crop.aspectRatio)>1e-5){const $=a({root:w});h({root:w,props:x,image:a_($.image)})}else c({root:w,props:x})}}},p=w=>{const C=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),O=C?parseInt(C[1]):null;return O!==null&&O<=58?!1:"createImageBitmap"in window&&wg(w)},m=({root:w,props:x})=>{const{id:C}=x,O=w.query("GET_ITEM",C);if(!O)return;const y=URL.createObjectURL(O.file);KI(y,(P,$)=>{w.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:C,width:P,height:$})})},E=({root:w,props:x})=>{const{id:C}=x,O=w.query("GET_ITEM",C);if(!O)return;const y=URL.createObjectURL(O.file),P=()=>{l_(y).then($)},$=D=>{URL.revokeObjectURL(y);const B=(O.getMetadata("exif")||{}).orientation||-1;let{width:G,height:X}=D;if(!G||!X)return;B>=5&&B<=8&&([G,X]=[X,G]);const N=Math.max(1,window.devicePixelRatio*.75),j=w.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*N,M=X/G,k=w.rect.element.width,U=w.rect.element.height;let H=k,Y=H*M;M>1?(H=Math.min(G,k*j),Y=H*M):(Y=Math.min(X,U*j),H=Y/M);const lt=s_(D,H,Y,B),nt=()=>{const Et=w.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?r_(data):null;O.setMetadata("color",Et,!0),"close"in D&&D.close(),w.ref.overlayShadow.opacity=1,h({root:w,props:x,image:lt})},ct=O.getMetadata("filter");ct?n(w,ct,lt).then(nt):nt()};if(p(O.file)){const D=i(QI);D.post({file:O.file},V=>{if(D.terminate(),!V){P();return}$(V)})}else P()},f=({root:w})=>{const x=w.ref.images[w.ref.images.length-1];x.translateY=0,x.scaleX=1,x.scaleY=1,x.opacity=1},g=({root:w})=>{w.ref.overlayShadow.opacity=1,w.ref.overlayError.opacity=0,w.ref.overlaySuccess.opacity=0},_=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlayError.opacity=1},v=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlaySuccess.opacity=1},R=({root:w})=>{w.ref.images=[],w.ref.imageData=null,w.ref.imageViewBin=[],w.ref.overlayShadow=w.appendChildView(w.createChildView(e,{opacity:0,status:"idle"})),w.ref.overlaySuccess=w.appendChildView(w.createChildView(e,{opacity:0,status:"success"})),w.ref.overlayError=w.appendChildView(w.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:R,styles:["height"],apis:["height"],destroy:({root:w})=>{w.ref.images.forEach(x=>{x.image.width=1,x.image.height=1})},didWriteView:({root:w})=>{w.ref.images.forEach(x=>{x.dirty=!1})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:f,DID_IMAGE_PREVIEW_CONTAINER_CREATE:m,DID_FINISH_CALCULATE_PREVIEWSIZE:E,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:_,DID_THROW_ITEM_PROCESSING_ERROR:_,DID_THROW_ITEM_INVALID:_,DID_COMPLETE_ITEM_PROCESSING:v,DID_START_ITEM_PROCESSING:g,DID_REVERT_ITEM_PROCESSING:g},({root:w})=>{const x=w.ref.imageViewBin.filter(C=>C.opacity===0);w.ref.imageViewBin=w.ref.imageViewBin.filter(C=>C.opacity>0),x.forEach(C=>o(w,C)),x.length=0})})},Tg=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n,isFile:o}=s,a=c_(t);return e("CREATE_VIEW",h=>{const{is:c,view:d,query:p}=h;if(!c("file")||!p("GET_ALLOW_IMAGE_PREVIEW"))return;const m=({root:v,props:R})=>{const{id:w}=R,x=p("GET_ITEM",w);if(!x||!o(x.file)||x.archived)return;const C=x.file;if(!fI(C)||!p("GET_IMAGE_PREVIEW_FILTER_ITEM")(x))return;const O="createImageBitmap"in(window||{}),y=p("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!O&&y&&C.size>y)return;v.ref.imagePreview=d.appendChildView(d.createChildView(a,{id:w}));const P=v.query("GET_IMAGE_PREVIEW_HEIGHT");P&&v.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:x.id,height:P});const $=!O&&C.size>p("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");v.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:w},$)},E=(v,R)=>{if(!v.ref.imagePreview)return;let{id:w}=R;const x=v.query("GET_ITEM",{id:w});if(!x)return;const C=v.query("GET_PANEL_ASPECT_RATIO"),O=v.query("GET_ITEM_PANEL_ASPECT_RATIO"),y=v.query("GET_IMAGE_PREVIEW_HEIGHT");if(C||O||y)return;let{imageWidth:P,imageHeight:$}=v.ref;if(!P||!$)return;const D=v.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),V=v.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),G=(x.getMetadata("exif")||{}).orientation||-1;if(G>=5&&G<=8&&([P,$]=[$,P]),!wg(x.file)||v.query("GET_IMAGE_PREVIEW_UPSCALE")){const k=2048/P;P*=k,$*=k}const X=$/P,N=(x.getMetadata("crop")||{}).aspectRatio||X;let W=Math.max(D,Math.min($,V));const j=v.rect.element.width,M=Math.min(j*N,W);v.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:x.id,height:M})},f=({root:v})=>{v.ref.shouldRescale=!0},g=({root:v,action:R})=>{R.change.key==="crop"&&(v.ref.shouldRescale=!0)},_=({root:v,action:R})=>{v.ref.imageWidth=R.width,v.ref.imageHeight=R.height,v.ref.shouldRescale=!0,v.ref.shouldDrawPreview=!0,v.dispatch("KICK")};d.registerWriter(n({DID_RESIZE_ROOT:f,DID_STOP_RESIZE:f,DID_LOAD_ITEM:m,DID_IMAGE_PREVIEW_CALCULATE_SIZE:_,DID_UPDATE_ITEM_METADATA:g},({root:v,props:R})=>{v.ref.imagePreview&&(v.rect.element.hidden||(v.ref.shouldRescale&&(E(v,R),v.ref.shouldRescale=!1),v.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{v.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:R.id})})}),v.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},h_=typeof window!="undefined"&&typeof window.document!="undefined";h_&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Tg}));/*!
* FilePondPluginImageResize 2.0.10
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const d_=t=>/^image/.test(t.type),u_=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e({width:i,height:n})},s.onerror=()=>e(null),s.src=t},xg=({addFilter:t,utils:e})=>{const{Type:s}=e;return t("DID_LOAD_ITEM",(i,{query:n})=>new Promise((o,a)=>{const h=i.file;if(!d_(h)||!n("GET_ALLOW_IMAGE_RESIZE"))return o(i);const c=n("GET_IMAGE_RESIZE_MODE"),d=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),p=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),m=n("GET_IMAGE_RESIZE_UPSCALE");if(d===null&&p===null)return o(i);const E=d===null?p:d,f=p===null?E:p,g=URL.createObjectURL(h);u_(g,_=>{if(URL.revokeObjectURL(g),!_)return o(i);let{width:v,height:R}=_;const w=(i.getMetadata("exif")||{}).orientation||-1;if(w>=5&&w<=8&&([v,R]=[R,v]),v===E&&R===f)return o(i);if(!m){if(c==="cover"){if(v<=E||R<=f)return o(i)}else if(v<=E&&R<=E)return o(i)}i.setMetadata("resize",{mode:c,upscale:m,size:{width:E,height:f}}),o(i)})})),{options:{allowImageResize:[!0,s.BOOLEAN],imageResizeMode:["cover",s.STRING],imageResizeUpscale:[!0,s.BOOLEAN],imageResizeTargetWidth:[null,s.INT],imageResizeTargetHeight:[null,s.INT]}}},p_=typeof window!="undefined"&&typeof window.document!="undefined";p_&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:xg}));/*!
* FilePondPluginImageTransform 3.8.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const m_=t=>/^image/.test(t.type),f_=t=>t.substr(0,t.lastIndexOf("."))||t,g_={jpeg:"jpg","svg+xml":"svg"},E_=(t,e)=>{const s=f_(t),i=e.split("/")[1],n=g_[i]||i;return`${s}.${n}`},b_=t=>/jpeg|png|svg\+xml/.test(t)?t:"image/jpeg",I_=t=>/^image/.test(t.type),__={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},v_=(t,e,s)=>(s===-1&&(s=1),__[s](t,e)),qo=(t,e)=>({x:t,y:e}),w_=(t,e)=>t.x*e.x+t.y*e.y,Jm=(t,e)=>qo(t.x-e.x,t.y-e.y),T_=(t,e)=>w_(Jm(t,e),Jm(t,e)),Km=(t,e)=>Math.sqrt(T_(t,e)),tf=(t,e)=>{const s=t,i=1.5707963267948966,n=e,o=1.5707963267948966-e,a=Math.sin(i),h=Math.sin(n),c=Math.sin(o),d=Math.cos(o),p=s/a,m=p*h,E=p*c;return qo(d*m,d*E)},x_=(t,e)=>{const s=t.width,i=t.height,n=tf(s,e),o=tf(i,e),a=qo(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),h=qo(t.x+t.width+Math.abs(o.y),t.y+Math.abs(o.x)),c=qo(t.x-Math.abs(o.y),t.y+t.height-Math.abs(o.x));return{width:Km(a,h),height:Km(a,c)}},Sg=(t,e,s=0,i={x:.5,y:.5})=>{const n=i.x>.5?1-i.x:i.x,o=i.y>.5?1-i.y:i.y,a=n*2*t.width,h=o*2*t.height,c=x_(e,s);return Math.max(c.width/a,c.height/h)},Rg=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,o=(t.height-i)*.5;return{x:n,y:o,width:s,height:i}},ef=(t,e,s=1)=>{const i=t.height/t.width;let n=1,o=e,a=1,h=i;h>o&&(h=o,a=h/i);const c=Math.max(n/a,o/h),d=t.width/(s*c*a),p=d*e;return{width:d,height:p}},Cg=t=>{t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},sf=t=>t&&(t.horizontal||t.vertical),S_=(t,e,s)=>{if(e<=1&&!sf(s))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;const i=document.createElement("canvas"),n=t.naturalWidth,o=t.naturalHeight,a=e>=5&&e<=8;a?(i.width=o,i.height=n):(i.width=n,i.height=o);const h=i.getContext("2d");if(e&&h.transform.apply(h,v_(n,o,e)),sf(s)){const c=[1,0,0,1,0,0];(!a&&s.horizontal||a&s.vertical)&&(c[0]=-1,c[4]=n),(!a&&s.vertical||a&&s.horizontal)&&(c[3]=-1,c[5]=o),h.transform(...c)}return h.drawImage(t,0,0,n,o),i},R_=(t,e,s={},i={})=>{const{canvasMemoryLimit:n,background:o=null}=i,a=s.zoom||1,h=S_(t,e,s.flip),c={width:h.width,height:h.height},d=s.aspectRatio||c.height/c.width;let p=ef(c,d,a);if(n){const x=p.width*p.height;if(x>n){const C=Math.sqrt(n)/Math.sqrt(x);c.width=Math.floor(c.width*C),c.height=Math.floor(c.height*C),p=ef(c,d,a)}}const m=document.createElement("canvas"),E={x:p.width*.5,y:p.height*.5},f={x:0,y:0,width:p.width,height:p.height,center:E},g=typeof s.scaleToFit=="undefined"||s.scaleToFit,_=a*Sg(c,Rg(f,d),s.rotation,g?s.center:{x:.5,y:.5});m.width=Math.round(p.width/_),m.height=Math.round(p.height/_),E.x/=_,E.y/=_;const v={x:E.x-c.width*(s.center?s.center.x:.5),y:E.y-c.height*(s.center?s.center.y:.5)},R=m.getContext("2d");o&&(R.fillStyle=o,R.fillRect(0,0,m.width,m.height)),R.translate(E.x,E.y),R.rotate(s.rotation||0),R.drawImage(h,v.x-E.x,v.y-E.y,c.width,c.height);const w=R.getImageData(0,0,m.width,m.height);return Cg(m),w},C_=(()=>typeof window!="undefined"&&typeof window.document!="undefined")();C_&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){var i=this.toDataURL(e,s).split(",")[1];setTimeout(function(){for(var n=atob(i),o=n.length,a=new Uint8Array(o),h=0;h<o;h++)a[h]=n.charCodeAt(h);t(new Blob([a],{type:e||"image/png"}))})}}));const O_=(t,e,s=null)=>new Promise(i=>{const n=s?s(t):t;Promise.resolve(n).then(o=>{o.toBlob(i,e.type,e.quality)})}),xh=(t,e)=>Ko(t.x*e,t.y*e),Sh=(t,e)=>Ko(t.x+e.x,t.y+e.y),Og=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:Ko(t.x/e,t.y/e)},Xn=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),o=Ko(t.x-s.x,t.y-s.y);return Ko(s.x+i*o.x-n*o.y,s.y+n*o.x+i*o.y)},Ko=(t=0,e=0)=>({x:t,y:e}),be=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},Wr=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",o=t.borderColor||t.lineColor||"transparent",a=be(t.borderWidth||t.lineWidth,e,s),h=t.lineCap||"round",c=t.lineJoin||"round",d=typeof i=="string"?"":i.map(m=>be(m,e,s)).join(","),p=t.opacity||1;return{"stroke-linecap":h,"stroke-linejoin":c,"stroke-width":a||0,"stroke-dasharray":d,stroke:o,fill:n,opacity:p}},Is=t=>t!=null,_o=(t,e,s=1)=>{let i=be(t.x,e,s,"width")||be(t.left,e,s,"width"),n=be(t.y,e,s,"height")||be(t.top,e,s,"height"),o=be(t.width,e,s,"width"),a=be(t.height,e,s,"height"),h=be(t.right,e,s,"width"),c=be(t.bottom,e,s,"height");return Is(n)||(Is(a)&&Is(c)?n=e.height-a-c:n=c),Is(i)||(Is(o)&&Is(h)?i=e.width-o-h:i=h),Is(o)||(Is(i)&&Is(h)?o=e.width-i-h:o=0),Is(a)||(Is(n)&&Is(c)?a=e.height-n-c:a=0),{x:i||0,y:n||0,width:o||0,height:a||0}},L_=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),$i=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),A_="http://www.w3.org/2000/svg",ua=(t,e)=>{const s=document.createElementNS(A_,t);return e&&$i(s,e),s},$_=t=>$i(t,I(I({},t.rect),t.styles)),y_=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return $i(t,I({cx:e,cy:s,rx:i,ry:n},t.styles))},M_={contain:"xMidYMid meet",cover:"xMidYMid slice"},N_=(t,e)=>{$i(t,L(I(I({},t.rect),t.styles),{preserveAspectRatio:M_[e.fit]||"none"}))},P_={left:"start",center:"middle",right:"end"},D_=(t,e,s,i)=>{const n=be(e.fontSize,s,i),o=e.fontFamily||"sans-serif",a=e.fontWeight||"normal",h=P_[e.textAlign]||"start";$i(t,L(I(I({},t.rect),t.styles),{"stroke-width":0,"font-weight":a,"font-size":n,"font-family":o,"text-anchor":h})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},F_=(t,e,s,i)=>{$i(t,L(I(I({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],o=t.childNodes[1],a=t.childNodes[2],h=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if($i(n,{x1:h.x,y1:h.y,x2:c.x,y2:c.y}),!e.lineDecoration)return;o.style.display="none",a.style.display="none";const d=Og({x:c.x-h.x,y:c.y-h.y}),p=be(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const m=xh(d,p),E=Sh(h,m),f=Xn(h,2,E),g=Xn(h,-2,E);$i(o,{style:"display:block;",d:`M${f.x},${f.y} L${h.x},${h.y} L${g.x},${g.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const m=xh(d,-p),E=Sh(c,m),f=Xn(c,2,E),g=Xn(c,-2,E);$i(a,{style:"display:block;",d:`M${f.x},${f.y} L${c.x},${c.y} L${g.x},${g.y}`})}},j_=(t,e,s,i)=>{$i(t,L(I({},t.styles),{fill:"none",d:L_(e.points.map(n=>({x:be(n.x,s,i,"width"),y:be(n.y,s,i,"height")})))}))},kc=t=>e=>ua(t,{id:e.id}),k_=t=>{const e=ua("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},G_=t=>{const e=ua("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=ua("line");e.appendChild(s);const i=ua("path");e.appendChild(i);const n=ua("path");return e.appendChild(n),e},B_={image:k_,rect:kc("rect"),ellipse:kc("ellipse"),text:kc("text"),path:kc("path"),line:G_},U_={rect:$_,ellipse:y_,image:N_,text:D_,path:j_,line:F_},V_=(t,e)=>B_[t](e),z_=(t,e,s,i,n)=>{e!=="path"&&(t.rect=_o(s,i,n)),t.styles=Wr(s,i,n),U_[e](t,s,i,n)},Lg=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,W_=(t,e={},s,i)=>new Promise(n=>{const{background:o=null}=i,a=new FileReader;a.onloadend=()=>{const h=a.result,c=document.createElement("div");c.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",c.innerHTML=h;const d=c.querySelector("svg");document.body.appendChild(c);const p=d.getBBox();c.parentNode.removeChild(c);const m=c.querySelector("title"),E=d.getAttribute("viewBox")||"",f=d.getAttribute("width")||"",g=d.getAttribute("height")||"";let _=parseFloat(f)||null,v=parseFloat(g)||null;const R=(f.match(/[a-z]+/)||[])[0]||"",w=(g.match(/[a-z]+/)||[])[0]||"",x=E.split(" ").map(parseFloat),C=x.length?{x:x[0],y:x[1],width:x[2],height:x[3]}:p;let O=_!=null?_:C.width,y=v!=null?v:C.height;d.style.overflow="visible",d.setAttribute("width",O),d.setAttribute("height",y);let P="";if(s&&s.length){const ct={width:O,height:y};P=s.sort(Lg).reduce((Et,Q)=>{const tt=V_(Q[0],Q[1]);return z_(tt,Q[0],Q[1],ct),tt.removeAttribute("id"),tt.getAttribute("opacity")===1&&tt.removeAttribute("opacity"),Et+`
`+tt.outerHTML+`
`},""),P=`

<g>${P.replace(/&nbsp;/g," ")}</g>

`}const $=e.aspectRatio||y/O,D=O,V=D*$,B=typeof e.scaleToFit=="undefined"||e.scaleToFit,G=e.center?e.center.x:.5,X=e.center?e.center.y:.5,N=Sg({width:O,height:y},Rg({width:D,height:V},$),e.rotation,B?{x:G,y:X}:{x:.5,y:.5}),W=e.zoom*N,j=e.rotation*(180/Math.PI),M={x:D*.5,y:V*.5},k={x:M.x-O*G,y:M.y-y*X},U=[`rotate(${j} ${M.x} ${M.y})`,`translate(${M.x} ${M.y})`,`scale(${W})`,`translate(${-M.x} ${-M.y})`,`translate(${k.x} ${k.y})`],H=e.flip&&e.flip.horizontal,Y=e.flip&&e.flip.vertical,lt=[`scale(${H?-1:1} ${Y?-1:1})`,`translate(${H?-O:0} ${Y?-y:0})`],nt=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${D}${R}" height="${V}${w}" 
viewBox="0 0 ${D} ${V}" ${o?'style="background:'+o+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${m?m.textContent:""}</title>
<g transform="${U.join(" ")}">
<g transform="${lt.join(" ")}">
${d.outerHTML}${P}
</g>
</g>
</svg>`;n(nt)},a.readAsText(t)}),H_=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},q_=()=>{const t={resize:p,filter:d},e=(m,E)=>(m.forEach(f=>{E=t[f.type](E,f.data)}),E),s=(m,E)=>{let f=m.transforms,g=null;if(f.forEach(_=>{_.type==="filter"&&(g=_)}),g){let _=null;f.forEach(v=>{v.type==="resize"&&(_=v)}),_&&(_.data.matrix=g.data,f=f.filter(v=>v.type!=="filter"))}E(e(f,m.imageData))};self.onmessage=m=>{s(m.data.message,E=>{self.postMessage({id:m.data.id,message:E},[E.data.buffer])})};const i=1,n=1,o=1;function a(m,E,f){const g=E[m]/255,_=E[m+1]/255,v=E[m+2]/255,R=E[m+3]/255,w=g*f[0]+_*f[1]+v*f[2]+R*f[3]+f[4],x=g*f[5]+_*f[6]+v*f[7]+R*f[8]+f[9],C=g*f[10]+_*f[11]+v*f[12]+R*f[13]+f[14],O=g*f[15]+_*f[16]+v*f[17]+R*f[18]+f[19],y=Math.max(0,w*O)+i*(1-O),P=Math.max(0,x*O)+n*(1-O),$=Math.max(0,C*O)+o*(1-O);E[m]=Math.max(0,Math.min(1,y))*255,E[m+1]=Math.max(0,Math.min(1,P))*255,E[m+2]=Math.max(0,Math.min(1,$))*255}const h=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function c(m){return self.JSON.stringify(m||[])===h}function d(m,E){if(!E||c(E))return m;const f=m.data,g=f.length,_=E[0],v=E[1],R=E[2],w=E[3],x=E[4],C=E[5],O=E[6],y=E[7],P=E[8],$=E[9],D=E[10],V=E[11],B=E[12],G=E[13],X=E[14],N=E[15],W=E[16],j=E[17],M=E[18],k=E[19];let U=0,H=0,Y=0,lt=0,nt=0,ct=0,Et=0,Q=0,tt=0,at=0,dt=0,pt=0;for(;U<g;U+=4)H=f[U]/255,Y=f[U+1]/255,lt=f[U+2]/255,nt=f[U+3]/255,ct=H*_+Y*v+lt*R+nt*w+x,Et=H*C+Y*O+lt*y+nt*P+$,Q=H*D+Y*V+lt*B+nt*G+X,tt=H*N+Y*W+lt*j+nt*M+k,at=Math.max(0,ct*tt)+i*(1-tt),dt=Math.max(0,Et*tt)+n*(1-tt),pt=Math.max(0,Q*tt)+o*(1-tt),f[U]=Math.max(0,Math.min(1,at))*255,f[U+1]=Math.max(0,Math.min(1,dt))*255,f[U+2]=Math.max(0,Math.min(1,pt))*255;return m}function p(m,E){let{mode:f="contain",upscale:g=!1,width:_,height:v,matrix:R}=E;if(R=!R||c(R)?null:R,!_&&!v)return d(m,R);if(_===null?_=v:v===null&&(v=_),f!=="force"){let G=_/m.width,X=v/m.height,N=1;if(f==="cover"?N=Math.max(G,X):f==="contain"&&(N=Math.min(G,X)),N>1&&g===!1)return d(m,R);_=m.width*N,v=m.height*N}const w=m.width,x=m.height,C=Math.round(_),O=Math.round(v),y=m.data,P=new Uint8ClampedArray(C*O*4),$=w/C,D=x/O,V=Math.ceil($*.5),B=Math.ceil(D*.5);for(let G=0;G<O;G++)for(let X=0;X<C;X++){let N=(X+G*C)*4,W=0,j=0,M=0,k=0,U=0,H=0,Y=0,lt=(G+.5)*D;for(let nt=Math.floor(G*D);nt<(G+1)*D;nt++){let ct=Math.abs(lt-(nt+.5))/B,Et=(X+.5)*$,Q=ct*ct;for(let tt=Math.floor(X*$);tt<(X+1)*$;tt++){let at=Math.abs(Et-(tt+.5))/V,dt=Math.sqrt(Q+at*at);if(dt>=-1&&dt<=1&&(W=2*dt*dt*dt-3*dt*dt+1,W>0)){at=4*(tt+nt*w);let pt=y[at+3];Y+=W*pt,M+=W,pt<255&&(W=W*pt/250),k+=W*y[at],U+=W*y[at+1],H+=W*y[at+2],j+=W}}}P[N]=k/j,P[N+1]=U/j,P[N+2]=H/j,P[N+3]=Y/M,R&&a(N,P,R)}return{data:P,width:C,height:O}}},Y_=(t,e)=>{if(t.getUint32(e+4,!1)!==1165519206)return;e+=4;const s=t.getUint16(e+=6,!1)===18761;e+=t.getUint32(e+4,s);const i=t.getUint16(e,s);e+=2;for(let n=0;n<i;n++)if(t.getUint16(e+n*12,s)===274)return t.setUint16(e+n*12+8,1,s),!0;return!1},X_=t=>{const e=new DataView(t);if(e.getUint16(0)!==65496)return null;let s=2,i,n,o=!1;for(;s<e.byteLength&&(i=e.getUint16(s,!1),n=e.getUint16(s+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(o||(o=Y_(e,s)),s+n>e.byteLength)));)s+=n;return t.slice(0,s)},Z_=t=>new Promise(e=>{const s=new FileReader;s.onload=()=>e(X_(s.result)||null),s.readAsArrayBuffer(t.slice(0,256*1024))}),Q_=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,J_=(t,e)=>{const s=Q_();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},K_=()=>Math.random().toString(36).substr(2,9),tv=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s),n=[];return{transfer:()=>{},post:(o,a,h)=>{const c=K_();n[c]=a,i.onmessage=d=>{const p=n[d.data.id];p&&(p(d.data.message),delete n[d.data.id])},i.postMessage({id:c,message:o},h)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},ev=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),sv=t=>t.reduce((e,s)=>e.then(i=>s().then(Array.prototype.concat.bind(i))),Promise.resolve([])),iv=(t,e)=>new Promise(s=>{const i={width:t.width,height:t.height},n=t.getContext("2d"),o=e.sort(Lg).map(a=>()=>new Promise(h=>{hv[a[0]](n,i,a[1],h)&&h()}));sv(o).then(()=>s(t))}),vo=(t,e)=>{t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},wo=t=>{t.fill(),t.stroke(),t.globalAlpha=1},nv=(t,e,s)=>{const i=_o(s,e),n=Wr(s,e);return vo(t,n),t.rect(i.x,i.y,i.width,i.height),wo(t),!0},rv=(t,e,s)=>{const i=_o(s,e),n=Wr(s,e);vo(t,n);const o=i.x,a=i.y,h=i.width,c=i.height,d=.5522848,p=h/2*d,m=c/2*d,E=o+h,f=a+c,g=o+h/2,_=a+c/2;return t.moveTo(o,_),t.bezierCurveTo(o,_-m,g-p,a,g,a),t.bezierCurveTo(g+p,a,E,_-m,E,_),t.bezierCurveTo(E,_+m,g+p,f,g,f),t.bezierCurveTo(g-p,f,o,_+m,o,_),wo(t),!0},av=(t,e,s,i)=>{const n=_o(s,e),o=Wr(s,e);vo(t,o);const a=new Image;new URL(s.src,window.location.href).origin!==window.location.origin&&(a.crossOrigin=""),a.onload=()=>{if(s.fit==="cover"){const c=n.width/n.height,d=c>1?a.width:a.height*c,p=c>1?a.width/c:a.height,m=a.width*.5-d*.5,E=a.height*.5-p*.5;t.drawImage(a,m,E,d,p,n.x,n.y,n.width,n.height)}else if(s.fit==="contain"){const c=Math.min(n.width/a.width,n.height/a.height),d=c*a.width,p=c*a.height,m=n.x+n.width*.5-d*.5,E=n.y+n.height*.5-p*.5;t.drawImage(a,0,0,a.width,a.height,m,E,d,p)}else t.drawImage(a,0,0,a.width,a.height,n.x,n.y,n.width,n.height);wo(t),i()},a.src=s.src},ov=(t,e,s)=>{const i=_o(s,e),n=Wr(s,e);vo(t,n);const o=be(s.fontSize,e),a=s.fontFamily||"sans-serif",h=s.fontWeight||"normal",c=s.textAlign||"left";return t.font=`${h} ${o}px ${a}`,t.textAlign=c,t.fillText(s.text,i.x,i.y),wo(t),!0},lv=(t,e,s)=>{const i=Wr(s,e);vo(t,i),t.beginPath();const n=s.points.map(a=>({x:be(a.x,e,1,"width"),y:be(a.y,e,1,"height")}));t.moveTo(n[0].x,n[0].y);const o=n.length;for(let a=1;a<o;a++)t.lineTo(n[a].x,n[a].y);return wo(t),!0},cv=(t,e,s)=>{const i=_o(s,e),n=Wr(s,e);vo(t,n),t.beginPath();const o={x:i.x,y:i.y},a={x:i.x+i.width,y:i.y+i.height};t.moveTo(o.x,o.y),t.lineTo(a.x,a.y);const h=Og({x:a.x-o.x,y:a.y-o.y}),c=.04*Math.min(e.width,e.height);if(s.lineDecoration.indexOf("arrow-begin")!==-1){const d=xh(h,c),p=Sh(o,d),m=Xn(o,2,p),E=Xn(o,-2,p);t.moveTo(m.x,m.y),t.lineTo(o.x,o.y),t.lineTo(E.x,E.y)}if(s.lineDecoration.indexOf("arrow-end")!==-1){const d=xh(h,-c),p=Sh(a,d),m=Xn(a,2,p),E=Xn(a,-2,p);t.moveTo(m.x,m.y),t.lineTo(a.x,a.y),t.lineTo(E.x,E.y)}return wo(t),!0},hv={rect:nv,ellipse:rv,image:av,text:ov,line:cv,path:lv},dv=t=>{const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e},uv=(t,e,s={})=>new Promise((i,n)=>{if(!t||!I_(t))return n({status:"not an image file",file:t});const{stripImageHead:o,beforeCreateBlob:a,afterCreateBlob:h,canvasMemoryLimit:c}=s,{crop:d,size:p,filter:m,markup:E,output:f}=e,g=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,_=f&&f.quality,v=_===null?null:_/100,R=f&&f.type||null,w=f&&f.background||null,x=[];p&&(typeof p.width=="number"||typeof p.height=="number")&&x.push({type:"resize",data:p}),m&&m.length===20&&x.push({type:"filter",data:m});const C=P=>{const $=h?h(P):P;Promise.resolve($).then(i)},O=(P,$)=>{const D=dv(P),V=E.length?iv(D,E):D;Promise.resolve(V).then(B=>{O_(B,$,a).then(G=>{if(Cg(B),o)return C(G);Z_(t).then(X=>{X!==null&&(G=new Blob([X,G.slice(20)],{type:G.type})),C(G)})}).catch(n)})};if(/svg/.test(t.type)&&R===null)return W_(t,d,E,{background:w}).then(P=>{i(J_(P,"image/svg+xml"))});const y=URL.createObjectURL(t);ev(y).then(P=>{URL.revokeObjectURL(y);const $=R_(P,g,d,{canvasMemoryLimit:c,background:w}),D={quality:v,type:R||t.type};if(!x.length)return O($,D);const V=tv(q_);V.post({transforms:x,imageData:$},B=>{O(H_(B),D),V.terminate()},[$.data.buffer])}).catch(n)}),pv=["x","y","left","top","right","bottom","width","height"],mv=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,fv=t=>{const[e,s]=t,i=s.points?{}:pv.reduce((n,o)=>(n[o]=mv(s[o]),n),{});return[e,I(I({zIndex:0},s),i)]},gv=t=>new Promise((e,s)=>{const i=new Image;i.src=URL.createObjectURL(t);const n=()=>{const a=i.naturalWidth,h=i.naturalHeight;a&&h&&(URL.revokeObjectURL(i.src),clearInterval(o),e({width:a,height:h}))};i.onerror=a=>{URL.revokeObjectURL(i.src),clearInterval(o),s(a)};const o=setInterval(n,1);n()});typeof window!="undefined"&&typeof window.document!="undefined"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){const i=this;setTimeout(()=>{const n=i.toDataURL(e,s).split(",")[1],o=atob(n);let a=o.length;const h=new Uint8Array(a);for(;a--;)h[a]=o.charCodeAt(a);t(new Blob([h],{type:e||"image/png"}))})}}));const Em=typeof window!="undefined"&&typeof window.document!="undefined",Ev=Em&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ag=({addFilter:t,utils:e})=>{const{Type:s,forin:i,getFileFromBlob:n,isFile:o}=e,a=["crop","resize","filter","markup","output"],h=p=>(m,E,f)=>m(E,p?p(f):f),c=p=>p.aspectRatio===null&&p.rotation===0&&p.zoom===1&&p.center&&p.center.x===.5&&p.center.y===.5&&p.flip&&p.flip.horizontal===!1&&p.flip.vertical===!1;t("SHOULD_PREPARE_OUTPUT",(p,{query:m})=>new Promise(E=>{E(!m("IS_ASYNC"))}));const d=(p,m,E)=>new Promise(f=>{if(!p("GET_ALLOW_IMAGE_TRANSFORM")||E.archived||!o(m)||!m_(m))return f(!1);gv(m).then(()=>{const g=p("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(g){const _=g(m);if(_==null)return handleRevert(!0);if(typeof _=="boolean")return f(_);if(typeof _.then=="function")return _.then(f)}f(!0)}).catch(g=>{f(!1)})});return t("DID_CREATE_ITEM",(p,{query:m,dispatch:E})=>{m("GET_ALLOW_IMAGE_TRANSFORM")&&p.extend("requestPrepare",()=>new Promise((f,g)=>{E("REQUEST_PREPARE_OUTPUT",{query:p.id,item:p,success:f,failure:g},!0)}))}),t("PREPARE_OUTPUT",(p,{query:m,item:E})=>new Promise(f=>{d(m,p,E).then(g=>{if(!g)return f(p);const _=[];m("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&_.push(()=>new Promise($=>{$({name:m("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:p})})),m("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&_.push(($,D,V)=>new Promise(B=>{$(D,V).then(G=>B({name:m("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:G}))}));const v=m("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(v,($,D)=>{const V=h(D);_.push((B,G,X)=>new Promise(N=>{V(B,G,X).then(W=>N({name:$,file:W}))}))});const R=m("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),w=m("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),x=R===null?null:R/100,C=m("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),O=m("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||a;E.setMetadata("output",{type:C,quality:x,client:O},!0);const y=($,D)=>new Promise((V,B)=>{const G=I({},D);Object.keys(G).filter(Y=>Y!=="exif").forEach(Y=>{O.indexOf(Y)===-1&&delete G[Y]});const{resize:X,exif:N,output:W,crop:j,filter:M,markup:k}=G,U={image:{orientation:N?N.orientation:null},output:W&&(W.type||typeof W.quality=="number"||W.background)?{type:W.type,quality:typeof W.quality=="number"?W.quality*100:null,background:W.background||m("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:X&&(X.size.width||X.size.height)?I({mode:X.mode,upscale:X.upscale},X.size):void 0,crop:j&&!c(j)?I({},j):void 0,markup:k&&k.length?k.map(fv):[],filter:M};if(U.output){const Y=W.type?W.type!==$.type:!1,lt=/\/jpe?g$/.test($.type),nt=W.quality!==null?lt&&w==="always":!1;if(!!!(U.size||U.crop||U.filter||Y||nt))return V($)}const H={beforeCreateBlob:m("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:m("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:m("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:m("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};uv($,U,H).then(Y=>{const lt=n(Y,E_($.name,b_(Y.type)));V(lt)}).catch(B)}),P=_.map($=>$(y,p,E.getMetadata()));Promise.all(P).then($=>{f($.length===1&&$[0].name===null?$[0].file:$)})})})),{options:{allowImageTransform:[!0,s.BOOLEAN],imageTransformImageFilter:[null,s.FUNCTION],imageTransformOutputMimeType:[null,s.STRING],imageTransformOutputQuality:[null,s.INT],imageTransformOutputStripImageHead:[!0,s.BOOLEAN],imageTransformClientTransforms:[null,s.ARRAY],imageTransformOutputQualityMode:["always",s.STRING],imageTransformVariants:[null,s.OBJECT],imageTransformVariantsIncludeDefault:[!0,s.BOOLEAN],imageTransformVariantsDefaultName:[null,s.STRING],imageTransformVariantsIncludeOriginal:[!1,s.BOOLEAN],imageTransformVariantsOriginalName:["original_",s.STRING],imageTransformBeforeCreateBlob:[null,s.FUNCTION],imageTransformAfterCreateBlob:[null,s.FUNCTION],imageTransformCanvasMemoryLimit:[Em&&Ev?4096*4096:null,s.INT],imageTransformCanvasBackgroundColor:[null,s.STRING]}}};Em&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ag}));/*!
* FilePondPluginImageValidateSize 1.2.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const bv=t=>/^image/.test(t.type),Iv=t=>new Promise((e,s)=>{const i=document.createElement("img");i.src=URL.createObjectURL(t),i.onerror=o=>{clearInterval(n),s(o)};const n=setInterval(()=>{i.naturalWidth&&i.naturalHeight&&(clearInterval(n),URL.revokeObjectURL(i.src),e({width:i.naturalWidth,height:i.naturalHeight}))},1)}),$g=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,isFile:n}=e,o=(a,h,c)=>new Promise((d,p)=>{const m=({width:E,height:f})=>{const{minWidth:g,minHeight:_,maxWidth:v,maxHeight:R,minResolution:w,maxResolution:x}=h,C=E*f;E<g||f<_?p("TOO_SMALL"):E>v||f>R?p("TOO_BIG"):w!==null&&C<w?p("TOO_LOW_RES"):x!==null&&C>x&&p("TOO_HIGH_RES"),d()};Iv(a).then(m).catch(()=>{if(!c){p();return}c(a,h).then(m).catch(()=>p())})});return t("LOAD_FILE",(a,{query:h})=>new Promise((c,d)=>{if(!n(a)||!bv(a)||!h("GET_ALLOW_IMAGE_VALIDATE_SIZE")){c(a);return}const p={minWidth:h("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:h("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:h("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:h("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:h("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:h("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},m=h("GET_IMAGE_VALIDATE_SIZE_MEASURE");o(a,p,m).then(()=>{c(a)}).catch(E=>{const f=E?{TOO_SMALL:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:h("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[E]:{label:h("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:a.type};d({status:{main:f.label,sub:E?i(f.details,p):f.details}})})})),{options:{allowImageValidateSize:[!0,s.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",s.STRING],imageValidateSizeMeasure:[null,s.FUNCTION],imageValidateSizeMinResolution:[null,s.INT],imageValidateSizeMaxResolution:[null,s.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",s.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",s.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",s.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",s.STRING],imageValidateSizeMinWidth:[1,s.INT],imageValidateSizeMinHeight:[1,s.INT],imageValidateSizeMaxWidth:[65535,s.INT],imageValidateSizeMaxHeight:[65535,s.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",s.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",s.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} Ã— {minHeight}",s.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} Ã— {maxHeight}",s.STRING]}}},_v=typeof window!="undefined"&&typeof window.document!="undefined";_v&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:$g}));/*!
* FilePondPluginMediaPreview 1.0.1
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit undefined for details.
*/const Rh=t=>/^video/.test(t.type),pa=t=>/^audio/.test(t.type),Yo=t=>/pdf$/.test(t.type);class vv{constructor(e,s){this.mediaEl=e,this.audioElems=s,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",()=>this.duration=this.mediaEl.duration,!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let e=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=e+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(e){let s=e.clientX-this.getPosition(this.audioElems.timeline);s>=0&&s<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=s+"px"),s<0&&(this.audioElems.playhead.style.marginLeft="0px"),s>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(e){this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(e){window.removeEventListener("mousemove",this.moveplayheadFn,!0),this.onplayhead==!0&&(this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(e){return(e.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(e){return e.getBoundingClientRect().left}}const wv=t=>t.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{const i=e.query("GET_ITEM",{id:s.id});if(Yo(i.file))e.ref.media=document.createElement("object"),e.ref.media.setAttribute("height",300),e.ref.media.setAttribute("width",320),e.ref.media.setAttribute("style","position:absolute;left:0;right:0;margin:auto;"),e.element.appendChild(e.ref.media);else{let n=pa(i.file)?"audio":"video";if(e.ref.media=document.createElement(n),e.ref.media.setAttribute("controls",!0),e.element.appendChild(e.ref.media),pa(i.file)){let o=document.createDocumentFragment();e.ref.audio=[],e.ref.audio.container=document.createElement("div"),e.ref.audio.button=document.createElement("span"),e.ref.audio.timeline=document.createElement("div"),e.ref.audio.playhead=document.createElement("div"),e.ref.audio.container.className="audioplayer",e.ref.audio.button.className="playpausebtn play",e.ref.audio.timeline.className="timeline",e.ref.audio.playhead.className="playhead",e.ref.audio.timeline.appendChild(e.ref.audio.playhead),e.ref.audio.container.appendChild(e.ref.audio.button),e.ref.audio.container.appendChild(e.ref.audio.timeline),o.appendChild(e.ref.audio.container),e.element.appendChild(o)}}},write:t.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:e,props:s})=>{const{id:i}=s,n=e.query("GET_ITEM",{id:i});if(!n)return;let o=window.URL||window.webkitURL,a=new Blob([n.file],{type:n.file.type});e.ref.media.type=n.file.type,Yo(n.file)?e.ref.media.data=o.createObjectURL(a):e.ref.media.src=n.file.mock&&n.file.url||o.createObjectURL(a),pa(n.file)&&new vv(e.ref.media,e.ref.audio),e.ref.media.addEventListener("loadeddata",()=>{if(Rh(n.file)||pa(n.file)){let h=75;if(Rh(n.file)){let c=e.ref.media.offsetWidth,d=e.ref.media.videoWidth/c;h=e.ref.media.videoHeight/d}e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:h})}},!1),e.ref.media.addEventListener("load",()=>{Yo(n.file)&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:e.ref.media.scrollHeight})},!1)}})}),Tv=t=>{const e=({root:i,props:n})=>{const{id:o}=n;i.query("GET_ITEM",o)&&i.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:o})},s=({root:i,props:n})=>{const o=wv(t);i.ref.media=i.appendChildView(i.createChildView(o,{id:n.id}))};return t.utils.createView({name:"media-preview-wrapper",create:s,write:t.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:e})})},yg=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n}=s,o=Tv(t);return e("CREATE_VIEW",a=>{const{is:h,view:c,query:d}=a;if(!h("file"))return;const p=({root:m,props:E})=>{const{id:f}=E,g=d("GET_ITEM",f);!g||g.archived||!Rh(g.file)&&!Yo(g.file)&&!pa(g.file)||(m.ref.mediaPreview=c.appendChildView(c.createChildView(o,{id:f})),m.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:f}))};c.registerWriter(n({DID_LOAD_ITEM:p},({root:m,props:E})=>{const{id:f}=E,g=d("GET_ITEM",f);!Rh(g.file)&&!Yo(g.file)&&!pa(g.file)||m.rect.element.hidden}))}),{options:{allowPdfPreview:[!0,i.BOOLEAN],allowVideoPreview:[!0,i.BOOLEAN],allowAudioPreview:[!0,i.BOOLEAN]}}},xv=typeof window!="undefined"&&typeof window.document!="undefined";xv&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:yg}));/*!
* FilePond 4.31.4
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const Sv=t=>t instanceof HTMLElement,Rv=(t,e=[],s=[])=>{const i=I({},t),n=[],o=[],a=()=>I({},i),h=()=>{const g=[...n];return n.length=0,g},c=()=>{const g=[...o];o.length=0,g.forEach(({type:_,data:v})=>{d(_,v)})},d=(g,_,v)=>{if(v&&!document.hidden){o.push({type:g,data:_});return}f[g]&&f[g](_),n.push({type:g,data:_})},p=(g,..._)=>E[g]?E[g](..._):null,m={getState:a,processActionQueue:h,processDispatchQueue:c,dispatch:d,query:p};let E={};e.forEach(g=>{E=I(I({},g(i)),E)});let f={};return s.forEach(g=>{f=I(I({},g(d,p,i)),f)}),m},Cv=(t,e,s)=>{if(typeof s=="function"){t[e]=s;return}Object.defineProperty(t,e,I({},s))},$t=(t,e)=>{for(const s in t)t.hasOwnProperty(s)&&e(s,t[s])},Zn=t=>{const e={};return $t(t,s=>{Cv(e,s,t[s])}),e},ee=(t,e,s=null)=>{if(s===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,s)},Ov="http://www.w3.org/2000/svg",Lv=["svg","path"],nf=t=>Lv.includes(t),Ch=(t,e,s={})=>{typeof e=="object"&&(s=e,e=null);const i=nf(t)?document.createElementNS(Ov,t):document.createElement(t);return e&&(nf(t)?ee(i,"class",e):i.className=e),$t(s,(n,o)=>{ee(i,n,o)}),i},Av=t=>(e,s)=>{typeof s!="undefined"&&t.children[s]?t.insertBefore(e,t.children[s]):t.appendChild(e)},$v=(t,e)=>(s,i)=>(typeof i!="undefined"?e.splice(i,0,s):e.push(s),s),yv=(t,e)=>s=>(e.splice(e.indexOf(s),1),s.element.parentNode&&t.removeChild(s.element),s),Mv=(()=>typeof window!="undefined"&&typeof window.document!="undefined")(),Mg=()=>Mv,Nv=Mg()?Ch("svg"):{},Pv="children"in Nv?t=>t.children.length:t=>t.childNodes.length,Ng=(t,e,s,i)=>{const n=s[0]||t.left,o=s[1]||t.top,a=n+t.width,h=o+t.height*(i[1]||1),c={element:I({},t),inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:n,top:o,right:a,bottom:h}};return e.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{rf(c.inner,I({},d.inner)),rf(c.outer,I({},d.outer))}),af(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,af(c.outer),c},rf=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},af=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},ur=t=>typeof t=="number",Dv=(t,e,s,i=.001)=>Math.abs(t-e)<i&&Math.abs(s)<i,Fv=({stiffness:t=.5,damping:e=.75,mass:s=10}={})=>{let i=null,n=null,o=0,a=!1;const d=Zn({interpolate:(p,m)=>{if(a)return;if(!(ur(i)&&ur(n))){a=!0,o=0;return}const E=-(n-i)*t;o+=E/s,n+=o,o*=e,Dv(n,i,o)||m?(n=i,o=0,a=!0,d.onupdate(n),d.oncomplete(n)):d.onupdate(n)},target:{set:p=>{if(ur(p)&&!ur(n)&&(n=p),i===null&&(i=p,n=p),i=p,n===i||typeof i=="undefined"){a=!0,o=0,d.onupdate(n),d.oncomplete(n);return}a=!1},get:()=>i},resting:{get:()=>a},onupdate:p=>{},oncomplete:p=>{}});return d},jv=t=>t<.5?2*t*t:-1+(4-2*t)*t,kv=({duration:t=500,easing:e=jv,delay:s=0}={})=>{let i=null,n,o,a=!0,h=!1,c=null;const p=Zn({interpolate:(m,E)=>{a||c===null||(i===null&&(i=m),!(m-i<s)&&(n=m-i-s,n>=t||E?(n=1,o=h?0:1,p.onupdate(o*c),p.oncomplete(o*c),a=!0):(o=n/t,p.onupdate((n>=0?e(h?1-o:o):0)*c))))},target:{get:()=>h?0:c,set:m=>{if(c===null){c=m,p.onupdate(m),p.oncomplete(m);return}m<c?(c=1,h=!0):(h=!1,c=m),a=!1,i=null}},resting:{get:()=>a},onupdate:m=>{},oncomplete:m=>{}});return p},of={spring:Fv,tween:kv},Gv=(t,e,s)=>{const i=t[e]&&typeof t[e][s]=="object"?t[e][s]:t[e]||t,n=typeof i=="string"?i:i.type,o=typeof i=="object"?I({},i):{};return of[n]?of[n](o):null},bm=(t,e,s,i=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(n=>{t.forEach(o=>{let a=o,h=()=>s[o],c=d=>s[o]=d;typeof o=="object"&&(a=o.key,h=o.getter||h,c=o.setter||c),!(n[a]&&!i)&&(n[a]={get:h,set:c})})})},Bv=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i})=>{const n=I({},e),o=[];return $t(t,(a,h)=>{const c=Gv(h);if(!c)return;c.onupdate=p=>{e[a]=p},c.target=n[a],bm([{key:a,setter:p=>{c.target!==p&&(c.target=p)},getter:()=>e[a]}],[s,i],e,!0),o.push(c)}),{write:a=>{let h=document.hidden,c=!0;return o.forEach(d=>{d.resting||(c=!1),d.interpolate(a,h)}),c},destroy:()=>{}}},Uv=t=>(e,s)=>{t.addEventListener(e,s)},Vv=t=>(e,s)=>{t.removeEventListener(e,s)},zv=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,viewState:n,view:o})=>{const a=[],h=Uv(o.element),c=Vv(o.element);return i.on=(d,p)=>{a.push({type:d,fn:p}),h(d,p)},i.off=(d,p)=>{a.splice(a.findIndex(m=>m.type===d&&m.fn===p),1),c(d,p)},{write:()=>!0,destroy:()=>{a.forEach(d=>{c(d.type,d.fn)})}}},Wv=({mixinConfig:t,viewProps:e,viewExternalAPI:s})=>{bm(t,s,e)},$e=t=>t!=null,Hv={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},qv=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,view:n})=>{const o=I({},e),a={};bm(t,[s,i],e);const h=()=>[e.translateX||0,e.translateY||0],c=()=>[e.scaleX||0,e.scaleY||0],d=()=>n.rect?Ng(n.rect,n.childViews,h(),c()):null;return s.rect={get:d},i.rect={get:d},t.forEach(p=>{e[p]=typeof o[p]=="undefined"?Hv[p]:o[p]}),{write:()=>{if(Yv(a,e))return Xv(n.element,e),Object.assign(a,I({},e)),!0},destroy:()=>{}}},Yv=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const s in e)if(e[s]!==t[s])return!0;return!1},Xv=(t,{opacity:e,perspective:s,translateX:i,translateY:n,scaleX:o,scaleY:a,rotateX:h,rotateY:c,rotateZ:d,originX:p,originY:m,width:E,height:f})=>{let g="",_="";($e(p)||$e(m))&&(_+=`transform-origin: ${p||0}px ${m||0}px;`),$e(s)&&(g+=`perspective(${s}px) `),($e(i)||$e(n))&&(g+=`translate3d(${i||0}px, ${n||0}px, 0) `),($e(o)||$e(a))&&(g+=`scale3d(${$e(o)?o:1}, ${$e(a)?a:1}, 1) `),$e(d)&&(g+=`rotateZ(${d}rad) `),$e(h)&&(g+=`rotateX(${h}rad) `),$e(c)&&(g+=`rotateY(${c}rad) `),g.length&&(_+=`transform:${g};`),$e(e)&&(_+=`opacity:${e};`,e===0&&(_+="visibility:hidden;"),e<1&&(_+="pointer-events:none;")),$e(f)&&(_+=`height:${f}px;`),$e(E)&&(_+=`width:${E}px;`);const v=t.elementCurrentStyle||"";(_.length!==v.length||_!==v)&&(t.style.cssText=_,t.elementCurrentStyle=_)},Zv={styles:qv,listeners:zv,animations:Bv,apis:Wv},lf=(t={},e={},s={})=>(e.layoutCalculated||(t.paddingTop=parseInt(s.paddingTop,10)||0,t.marginTop=parseInt(s.marginTop,10)||0,t.marginRight=parseInt(s.marginRight,10)||0,t.marginBottom=parseInt(s.marginBottom,10)||0,t.marginLeft=parseInt(s.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),Ut=({tag:t="div",name:e=null,attributes:s={},read:i=()=>{},write:n=()=>{},create:o=()=>{},destroy:a=()=>{},filterFrameActionsForChild:h=(f,g)=>g,didCreateView:c=()=>{},didWriteView:d=()=>{},ignoreRect:p=!1,ignoreRectUpdate:m=!1,mixins:E=[]}={})=>(f,g={})=>{const _=Ch(t,`filepond--${e}`,s),v=window.getComputedStyle(_,null),R=lf();let w=null,x=!1;const C=[],O=[],y={},P={},$=[n],D=[i],V=[a],B=()=>_,G=()=>C.concat(),X=()=>y,N=Q=>(tt,at)=>tt(Q,at),W=()=>w||(w=Ng(R,C,[0,0],[1,1]),w),j=()=>v,M=()=>{w=null,C.forEach(at=>at._read()),!(m&&R.width&&R.height)&&lf(R,_,v);const tt={root:ct,props:g,rect:R};D.forEach(at=>at(tt))},k=(Q,tt,at)=>{let dt=tt.length===0;return $.forEach(pt=>{pt({props:g,root:ct,actions:tt,timestamp:Q,shouldOptimize:at})===!1&&(dt=!1)}),O.forEach(pt=>{pt.write(Q)===!1&&(dt=!1)}),C.filter(pt=>!!pt.element.parentNode).forEach(pt=>{pt._write(Q,h(pt,tt),at)||(dt=!1)}),C.forEach((pt,ri)=>{pt.element.parentNode||(ct.appendChild(pt.element,ri),pt._read(),pt._write(Q,h(pt,tt),at),dt=!1)}),x=dt,d({props:g,root:ct,actions:tt,timestamp:Q}),dt},U=()=>{O.forEach(Q=>Q.destroy()),V.forEach(Q=>{Q({root:ct,props:g})}),C.forEach(Q=>Q._destroy())},H={element:{get:B},style:{get:j},childViews:{get:G}},Y=L(I({},H),{rect:{get:W},ref:{get:X},is:Q=>e===Q,appendChild:Av(_),createChildView:N(f),linkView:Q=>(C.push(Q),Q),unlinkView:Q=>{C.splice(C.indexOf(Q),1)},appendChildView:$v(_,C),removeChildView:yv(_,C),registerWriter:Q=>$.push(Q),registerReader:Q=>D.push(Q),registerDestroyer:Q=>V.push(Q),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:f.dispatch,query:f.query}),lt={element:{get:B},childViews:{get:G},rect:{get:W},resting:{get:()=>x},isRectIgnored:()=>p,_read:M,_write:k,_destroy:U},nt=L(I({},H),{rect:{get:()=>R}});Object.keys(E).sort((Q,tt)=>Q==="styles"?1:tt==="styles"?-1:0).forEach(Q=>{const tt=Zv[Q]({mixinConfig:E[Q],viewProps:g,viewState:P,viewInternalAPI:Y,viewExternalAPI:lt,view:Zn(nt)});tt&&O.push(tt)});const ct=Zn(Y);o({root:ct,props:g});const Et=Pv(_);return C.forEach((Q,tt)=>{ct.appendChild(Q.element,Et+tt)}),c(ct),Zn(lt)},Qv=(t,e,s=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(t),window[i].writers.push(e);return}window[i]={readers:[t],writers:[e]};const n=window[i],o=1e3/s;let a=null,h=null,c=null,d=null;const p=()=>{document.hidden?(c=()=>window.setTimeout(()=>m(performance.now()),o),d=()=>window.clearTimeout(h)):(c=()=>window.requestAnimationFrame(m),d=()=>window.cancelAnimationFrame(h))};document.addEventListener("visibilitychange",()=>{d&&d(),p(),m(performance.now())});const m=E=>{h=c(m),a||(a=E);const f=E-a;f<=o||(a=E-f%o,n.readers.forEach(g=>g()),n.writers.forEach(g=>g(E)))};return p(),m(performance.now()),{pause:()=>{d(h)}}},We=(t,e)=>({root:s,props:i,actions:n=[],timestamp:o,shouldOptimize:a})=>{n.filter(h=>t[h.type]).forEach(h=>t[h.type]({root:s,props:i,action:h.data,timestamp:o,shouldOptimize:a})),e&&e({root:s,props:i,actions:n,timestamp:o,shouldOptimize:a})},cf=(t,e)=>e.parentNode.insertBefore(t,e),hf=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),Au=t=>Array.isArray(t),dn=t=>t==null,Jv=t=>t.trim(),$u=t=>""+t,Kv=(t,e=",")=>dn(t)?[]:Au(t)?t:$u(t).split(e).map(Jv).filter(s=>s.length),Pg=t=>typeof t=="boolean",Dg=t=>Pg(t)?t:t==="true",ze=t=>typeof t=="string",Fg=t=>ur(t)?t:ze(t)?$u(t).replace(/[a-z]+/gi,""):0,Jc=t=>parseInt(Fg(t),10),df=t=>parseFloat(Fg(t)),To=t=>ur(t)&&isFinite(t)&&Math.floor(t)===t,uf=(t,e=1e3)=>{if(To(t))return t;let s=$u(t).trim();return/MB$/i.test(s)?(s=s.replace(/MB$i/,"").trim(),Jc(s)*e*e):/KB/i.test(s)?(s=s.replace(/KB$i/,"").trim(),Jc(s)*e):Jc(s)},pr=t=>typeof t=="function",tw=t=>{let e=self,s=t.split("."),i=null;for(;i=s.shift();)if(e=e[i],!e)return null;return e},pf={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},ew=t=>{const e={};return e.url=ze(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},$t(pf,s=>{e[s]=sw(s,t[s],pf[s],e.timeout,e.headers)}),e.process=t.process||ze(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},sw=(t,e,s,i,n)=>{if(e===null)return null;if(typeof e=="function")return e;const o={url:s==="GET"||s==="PATCH"?`?${t}=`:"",method:s,headers:n,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(ze(e))return o.url=e,o;if(Object.assign(o,e),ze(o.headers)){const a=o.headers.split(/:(.+)/);o.headers={header:a[0],value:a[1]}}return o.withCredentials=Dg(o.withCredentials),o},iw=t=>ew(t),nw=t=>t===null,le=t=>typeof t=="object"&&t!==null,rw=t=>le(t)&&ze(t.url)&&le(t.process)&&le(t.revert)&&le(t.restore)&&le(t.fetch),Qu=t=>Au(t)?"array":nw(t)?"null":To(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":rw(t)?"api":typeof t,aw=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),ow={array:Kv,boolean:Dg,int:t=>Qu(t)==="bytes"?uf(t):Jc(t),number:df,float:df,bytes:uf,string:t=>pr(t)?t:$u(t),function:t=>tw(t),serverapi:iw,object:t=>{try{return JSON.parse(aw(t))}catch(e){return null}}},lw=(t,e)=>ow[e](t),jg=(t,e,s)=>{if(t===e)return t;let i=Qu(t);if(i!==s){const n=lw(t,s);if(i=Qu(n),n===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${s}"`;t=n}return t},cw=(t,e)=>{let s=t;return{enumerable:!0,get:()=>s,set:i=>{s=jg(i,t,e)}}},hw=t=>{const e={};return $t(t,s=>{const i=t[s];e[s]=cw(i[0],i[1])}),Zn(e)},dw=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:hw(t)}),yu=(t,e="-")=>t.split(/(?=[A-Z])/).map(s=>s.toLowerCase()).join(e),uw=(t,e)=>{const s={};return $t(e,i=>{s[i]={get:()=>t.getState().options[i],set:n=>{t.dispatch(`SET_${yu(i,"_").toUpperCase()}`,{value:n})}}}),s},pw=t=>(e,s,i)=>{const n={};return $t(t,o=>{const a=yu(o,"_").toUpperCase();n[`SET_${a}`]=h=>{try{i.options[o]=h.value}catch(c){}e(`DID_SET_${a}`,{value:i.options[o]})}}),n},mw=t=>e=>{const s={};return $t(t,i=>{s[`GET_${yu(i,"_").toUpperCase()}`]=n=>e.options[i]}),s},Fs={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Im=()=>Math.random().toString(36).substring(2,11),_m=(t,e)=>t.splice(e,1),fw=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},Mu=()=>{const t=[],e=(i,n)=>{_m(t,t.findIndex(o=>o.event===i&&(o.cb===n||!n)))},s=(i,n,o)=>{t.filter(a=>a.event===i).map(a=>a.cb).forEach(a=>fw(()=>a(...n),o))};return{fireSync:(i,...n)=>{s(i,n,!0)},fire:(i,...n)=>{s(i,n,!1)},on:(i,n)=>{t.push({event:i,cb:n})},onOnce:(i,n)=>{t.push({event:i,cb:(...o)=>{e(i,n),n(...o)}})},off:e}},kg=(t,e,s)=>{Object.getOwnPropertyNames(t).filter(i=>!s.includes(i)).forEach(i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i)))},gw=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],es=t=>{const e={};return kg(t,e,gw),e},Ew=t=>{t.forEach((e,s)=>{e.released&&_m(t,s)})},it={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},te={INPUT:1,LIMBO:2,LOCAL:3},Gg=t=>/[^0-9]+/.exec(t),Bg=()=>Gg(1.1.toLocaleString())[0],bw=()=>{const t=Bg(),e=1e3.toLocaleString(),s=1e3.toString();return e!==s?Gg(e)[0]:t==="."?",":"."},z={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},vm=[],si=(t,e,s)=>new Promise((i,n)=>{const o=vm.filter(h=>h.key===t).map(h=>h.cb);if(o.length===0){i(e);return}const a=o.shift();o.reduce((h,c)=>h.then(d=>c(d,s)),a(e,s)).then(h=>i(h)).catch(h=>n(h))}),Hr=(t,e,s)=>vm.filter(i=>i.key===t).map(i=>i.cb(e,s)),Iw=(t,e)=>vm.push({key:t,cb:e}),_w=t=>Object.assign(ma,t),Oh=()=>I({},ma),vw=t=>{$t(t,(e,s)=>{ma[e]&&(ma[e][0]=jg(s,ma[e][0],ma[e][1]))})},ma={id:[null,z.STRING],name:["filepond",z.STRING],disabled:[!1,z.BOOLEAN],className:[null,z.STRING],required:[!1,z.BOOLEAN],captureMethod:[null,z.STRING],allowSyncAcceptAttribute:[!0,z.BOOLEAN],allowDrop:[!0,z.BOOLEAN],allowBrowse:[!0,z.BOOLEAN],allowPaste:[!0,z.BOOLEAN],allowMultiple:[!1,z.BOOLEAN],allowReplace:[!0,z.BOOLEAN],allowRevert:[!0,z.BOOLEAN],allowRemove:[!0,z.BOOLEAN],allowProcess:[!0,z.BOOLEAN],allowReorder:[!1,z.BOOLEAN],allowDirectoriesOnly:[!1,z.BOOLEAN],storeAsFile:[!1,z.BOOLEAN],forceRevert:[!1,z.BOOLEAN],maxFiles:[null,z.INT],checkValidity:[!1,z.BOOLEAN],itemInsertLocationFreedom:[!0,z.BOOLEAN],itemInsertLocation:["before",z.STRING],itemInsertInterval:[75,z.INT],dropOnPage:[!1,z.BOOLEAN],dropOnElement:[!0,z.BOOLEAN],dropValidation:[!1,z.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],z.ARRAY],instantUpload:[!0,z.BOOLEAN],maxParallelUploads:[2,z.INT],allowMinimumUploadDuration:[!0,z.BOOLEAN],chunkUploads:[!1,z.BOOLEAN],chunkForce:[!1,z.BOOLEAN],chunkSize:[5e6,z.INT],chunkRetryDelays:[[500,1e3,3e3],z.ARRAY],server:[null,z.SERVER_API],fileSizeBase:[1e3,z.INT],labelFileSizeBytes:["bytes",z.STRING],labelFileSizeKilobytes:["KB",z.STRING],labelFileSizeMegabytes:["MB",z.STRING],labelFileSizeGigabytes:["GB",z.STRING],labelDecimalSeparator:[Bg(),z.STRING],labelThousandsSeparator:[bw(),z.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',z.STRING],labelInvalidField:["Field contains invalid files",z.STRING],labelFileWaitingForSize:["Waiting for size",z.STRING],labelFileSizeNotAvailable:["Size not available",z.STRING],labelFileCountSingular:["file in list",z.STRING],labelFileCountPlural:["files in list",z.STRING],labelFileLoading:["Loading",z.STRING],labelFileAdded:["Added",z.STRING],labelFileLoadError:["Error during load",z.STRING],labelFileRemoved:["Removed",z.STRING],labelFileRemoveError:["Error during remove",z.STRING],labelFileProcessing:["Uploading",z.STRING],labelFileProcessingComplete:["Upload complete",z.STRING],labelFileProcessingAborted:["Upload cancelled",z.STRING],labelFileProcessingError:["Error during upload",z.STRING],labelFileProcessingRevertError:["Error during revert",z.STRING],labelTapToCancel:["tap to cancel",z.STRING],labelTapToRetry:["tap to retry",z.STRING],labelTapToUndo:["tap to undo",z.STRING],labelButtonRemoveItem:["Remove",z.STRING],labelButtonAbortItemLoad:["Abort",z.STRING],labelButtonRetryItemLoad:["Retry",z.STRING],labelButtonAbortItemProcessing:["Cancel",z.STRING],labelButtonUndoItemProcessing:["Undo",z.STRING],labelButtonRetryItemProcessing:["Retry",z.STRING],labelButtonProcessItem:["Upload",z.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',z.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',z.STRING],oninit:[null,z.FUNCTION],onwarning:[null,z.FUNCTION],onerror:[null,z.FUNCTION],onactivatefile:[null,z.FUNCTION],oninitfile:[null,z.FUNCTION],onaddfilestart:[null,z.FUNCTION],onaddfileprogress:[null,z.FUNCTION],onaddfile:[null,z.FUNCTION],onprocessfilestart:[null,z.FUNCTION],onprocessfileprogress:[null,z.FUNCTION],onprocessfileabort:[null,z.FUNCTION],onprocessfilerevert:[null,z.FUNCTION],onprocessfile:[null,z.FUNCTION],onprocessfiles:[null,z.FUNCTION],onremovefile:[null,z.FUNCTION],onpreparefile:[null,z.FUNCTION],onupdatefiles:[null,z.FUNCTION],onreorderfiles:[null,z.FUNCTION],beforeDropFile:[null,z.FUNCTION],beforeAddFile:[null,z.FUNCTION],beforeRemoveFile:[null,z.FUNCTION],beforePrepareFile:[null,z.FUNCTION],stylePanelLayout:[null,z.STRING],stylePanelAspectRatio:[null,z.STRING],styleItemPanelAspectRatio:[null,z.STRING],styleButtonRemoveItemPosition:["left",z.STRING],styleButtonProcessItemPosition:["right",z.STRING],styleLoadIndicatorPosition:["right",z.STRING],styleProgressIndicatorPosition:["right",z.STRING],styleButtonRemoveItemAlign:[!1,z.BOOLEAN],files:[[],z.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],z.ARRAY]},mr=(t,e)=>dn(e)?t[0]||null:To(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(s=>s.id===e)||null),Ug=t=>{if(dn(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},ii=t=>t.filter(e=>!e.archived),Vg={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Gc=null;const ww=()=>{if(Gc===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Gc=e.files.length===1}catch(t){Gc=!1}return Gc},Tw=[it.LOAD_ERROR,it.PROCESSING_ERROR,it.PROCESSING_REVERT_ERROR],xw=[it.LOADING,it.PROCESSING,it.PROCESSING_QUEUED,it.INIT],Sw=[it.PROCESSING_COMPLETE],Rw=t=>Tw.includes(t.status),Cw=t=>xw.includes(t.status),Ow=t=>Sw.includes(t.status),mf=t=>le(t.options.server)&&(le(t.options.server.process)||pr(t.options.server.process)),Lw=t=>({GET_STATUS:()=>{const e=ii(t.items),{EMPTY:s,ERROR:i,BUSY:n,IDLE:o,READY:a}=Vg;return e.length===0?s:e.some(Rw)?i:e.some(Cw)?n:e.some(Ow)?a:o},GET_ITEM:e=>mr(t.items,e),GET_ACTIVE_ITEM:e=>mr(ii(t.items),e),GET_ACTIVE_ITEMS:()=>ii(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const s=mr(t.items,e);return s?s.filename:null},GET_ITEM_SIZE:e=>{const s=mr(t.items,e);return s?s.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:Ug(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>ii(t.items).filter(s=>s.status===e),GET_TOTAL_ITEMS:()=>ii(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&ww()&&!mf(t),IS_ASYNC:()=>mf(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Aw=t=>{const e=ii(t.items).length;if(!t.options.allowMultiple)return e===0;const s=t.options.maxFiles;return s===null||e<s},zg=(t,e,s)=>Math.max(Math.min(s,t),e),$w=(t,e,s)=>t.splice(e,0,s),yw=(t,e,s)=>dn(e)?null:typeof s=="undefined"?(t.push(e),e):(s=zg(s,0,t.length),$w(t,s,e),e),Ju=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Nc=t=>`${t}`.split("/").pop().split("?").shift(),Nu=t=>t.split(".").pop(),Mw=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},Co=(t,e="")=>(e+t).slice(-e.length),Wg=(t=new Date)=>`${t.getFullYear()}-${Co(t.getMonth()+1,"00")}-${Co(t.getDate(),"00")}_${Co(t.getHours(),"00")}-${Co(t.getMinutes(),"00")}-${Co(t.getSeconds(),"00")}`,bo=(t,e,s=null,i=null)=>{const n=typeof s=="string"?t.slice(0,t.size,s):t.slice(0,t.size,t.type);return n.lastModifiedDate=new Date,t._relativePath&&(n._relativePath=t._relativePath),ze(e)||(e=Wg()),e&&i===null&&Nu(e)?n.name=e:(i=i||Mw(n.type),n.name=e+(i?"."+i:"")),n},Nw=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Hg=(t,e)=>{const s=Nw();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},Pw=(t,e)=>{const s=new ArrayBuffer(t.length),i=new Uint8Array(s);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return Hg(s,e)},qg=t=>(/^data:(.+);/.exec(t)||[])[1]||null,Dw=t=>t.split(",")[1].replace(/\s/g,""),Fw=t=>atob(Dw(t)),jw=t=>{const e=qg(t),s=Fw(t);return Pw(s,e)},kw=(t,e,s)=>bo(jw(t),e,null,s),Gw=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(s=>s.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(s=>s.length);return e.length?decodeURI(e[e.length-1]):null},Bw=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},Uw=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,wm=t=>{const e={source:null,name:null,size:null},s=t.split(`
`);for(let i of s){const n=Gw(i);if(n){e.name=n;continue}const o=Bw(i);if(o){e.size=o;continue}const a=Uw(i);if(a){e.source=a;continue}}return e},Vw=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},s=()=>e.progress,i=()=>{e.request&&e.request.abort&&e.request.abort()},n=()=>{const h=e.source;a.fire("init",h),h instanceof File?a.fire("load",h):h instanceof Blob?a.fire("load",bo(h,h.name)):Ju(h)?a.fire("load",kw(h)):o(h)},o=h=>{if(!t){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(h,c=>{e.duration=Date.now()-e.timestamp,e.complete=!0,c instanceof Blob&&(c=bo(c,c.name||Nc(h))),a.fire("load",c instanceof Blob?c:c?c.body:null)},c=>{a.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},(c,d,p)=>{if(p&&(e.size=p),e.duration=Date.now()-e.timestamp,!c){e.progress=null;return}e.progress=d/p,a.fire("progress",e.progress)},()=>{a.fire("abort")},c=>{const d=wm(typeof c=="string"?c:c.headers);a.fire("meta",{size:e.size||d.size,filename:d.name,source:d.source})})},a=L(I({},Mu()),{setSource:h=>e.source=h,getProgress:s,abort:i,load:n});return a},ff=t=>/GET|HEAD/.test(t),kr=(t,e,s)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,a.abort()}};let n=!1,o=!1;s=I({method:"POST",headers:{},withCredentials:!1},s),e=encodeURI(e),ff(s.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const a=new XMLHttpRequest,h=ff(s.method)?a:a.upload;return h.onprogress=c=>{n||i.onprogress(c.lengthComputable,c.loaded,c.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||o||(o=!0,i.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?i.onload(a):i.onerror(a)},a.onerror=()=>i.onerror(a),a.onabort=()=>{n=!0,i.onabort()},a.ontimeout=()=>i.ontimeout(a),a.open(s.method,e,!0),To(s.timeout)&&(a.timeout=s.timeout),Object.keys(s.headers).forEach(c=>{const d=unescape(encodeURIComponent(s.headers[c]));a.setRequestHeader(c,d)}),s.responseType&&(a.responseType=s.responseType),s.withCredentials&&(a.withCredentials=!0),a.send(t),i},Dt=(t,e,s,i)=>({type:t,code:e,body:s,headers:i}),Gr=t=>e=>{t(Dt("error",0,"Timeout",e.getAllResponseHeaders()))},gf=t=>/\?/.test(t),Xo=(...t)=>{let e="";return t.forEach(s=>{e+=gf(e)&&gf(s)?s.replace(/\?/,"&"):s}),e},Uu=(t="",e)=>{if(typeof e=="function")return e;if(!e||!ze(e.url))return null;const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,o,a,h,c,d)=>{const p=kr(n,Xo(t,e.url),L(I({},e),{responseType:"blob"}));return p.onload=m=>{const E=m.getAllResponseHeaders(),f=wm(E).name||Nc(n);o(Dt("load",m.status,e.method==="HEAD"?null:bo(s(m.response),f),E))},p.onerror=m=>{a(Dt("error",m.status,i(m.response)||m.statusText,m.getAllResponseHeaders()))},p.onheaders=m=>{d(Dt("headers",m.status,null,m.getAllResponseHeaders()))},p.ontimeout=Gr(a),p.onprogress=h,p.onabort=c,p}},_s={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},zw=(t,e,s,i,n,o,a,h,c,d,p)=>{const m=[],{chunkTransferId:E,chunkServer:f,chunkSize:g,chunkRetryDelays:_}=p,v={serverId:E,aborted:!1},R=e.ondata||(N=>N),w=e.onload||((N,W)=>W==="HEAD"?N.getResponseHeader("Upload-Offset"):N.response),x=e.onerror||(N=>null),C=N=>{const W=new FormData;le(n)&&W.append(s,JSON.stringify(n));const j=typeof e.headers=="function"?e.headers(i,n):L(I({},e.headers),{"Upload-Length":i.size}),M=L(I({},e),{headers:j}),k=kr(R(W),Xo(t,e.url),M);k.onload=U=>N(w(U,M.method)),k.onerror=U=>a(Dt("error",U.status,x(U.response)||U.statusText,U.getAllResponseHeaders())),k.ontimeout=Gr(a)},O=N=>{const W=Xo(t,f.url,v.serverId),M={headers:typeof e.headers=="function"?e.headers(v.serverId):I({},e.headers),method:"HEAD"},k=kr(null,W,M);k.onload=U=>N(w(U,M.method)),k.onerror=U=>a(Dt("error",U.status,x(U.response)||U.statusText,U.getAllResponseHeaders())),k.ontimeout=Gr(a)},y=Math.floor(i.size/g);for(let N=0;N<=y;N++){const W=N*g,j=i.slice(W,W+g,"application/offset+octet-stream");m[N]={index:N,size:j.size,offset:W,data:j,file:i,progress:0,retries:[..._],status:_s.QUEUED,error:null,request:null,timeout:null}}const P=()=>o(v.serverId),$=N=>N.status===_s.QUEUED||N.status===_s.ERROR,D=N=>{if(v.aborted)return;if(N=N||m.find($),!N){m.every(H=>H.status===_s.COMPLETE)&&P();return}N.status=_s.PROCESSING,N.progress=null;const W=f.ondata||(H=>H),j=f.onerror||(H=>null),M=Xo(t,f.url,v.serverId),k=typeof f.headers=="function"?f.headers(N):L(I({},f.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":N.offset,"Upload-Length":i.size,"Upload-Name":i.name}),U=N.request=kr(W(N.data),M,L(I({},f),{headers:k}));U.onload=()=>{N.status=_s.COMPLETE,N.request=null,G()},U.onprogress=(H,Y,lt)=>{N.progress=H?Y:null,B()},U.onerror=H=>{N.status=_s.ERROR,N.request=null,N.error=j(H.response)||H.statusText,V(N)||a(Dt("error",H.status,j(H.response)||H.statusText,H.getAllResponseHeaders()))},U.ontimeout=H=>{N.status=_s.ERROR,N.request=null,V(N)||Gr(a)(H)},U.onabort=()=>{N.status=_s.QUEUED,N.request=null,c()}},V=N=>N.retries.length===0?!1:(N.status=_s.WAITING,clearTimeout(N.timeout),N.timeout=setTimeout(()=>{D(N)},N.retries.shift()),!0),B=()=>{const N=m.reduce((j,M)=>j===null||M.progress===null?null:j+M.progress,0);if(N===null)return h(!1,0,0);const W=m.reduce((j,M)=>j+M.size,0);h(!0,N,W)},G=()=>{m.filter(W=>W.status===_s.PROCESSING).length>=1||D()},X=()=>{m.forEach(N=>{clearTimeout(N.timeout),N.request&&N.request.abort()})};return v.serverId?O(N=>{v.aborted||(m.filter(W=>W.offset<N).forEach(W=>{W.status=_s.COMPLETE,W.progress=W.size}),G())}):C(N=>{v.aborted||(d(N),v.serverId=N,G())}),{abort:()=>{v.aborted=!0,X()}}},Ww=(t,e,s,i)=>(n,o,a,h,c,d,p)=>{if(!n)return;const m=i.chunkUploads,E=m&&n.size>i.chunkSize,f=m&&(E||i.chunkForce);if(n instanceof Blob&&f)return zw(t,e,s,n,o,a,h,c,d,p,i);const g=e.ondata||(O=>O),_=e.onload||(O=>O),v=e.onerror||(O=>null),R=typeof e.headers=="function"?e.headers(n,o)||{}:I({},e.headers),w=L(I({},e),{headers:R});var x=new FormData;le(o)&&x.append(s,JSON.stringify(o)),(n instanceof Blob?[{name:null,file:n}]:n).forEach(O=>{x.append(s,O.file,O.name===null?O.file.name:`${O.name}${O.file.name}`)});const C=kr(g(x),Xo(t,e.url),w);return C.onload=O=>{a(Dt("load",O.status,_(O.response),O.getAllResponseHeaders()))},C.onerror=O=>{h(Dt("error",O.status,v(O.response)||O.statusText,O.getAllResponseHeaders()))},C.ontimeout=Gr(h),C.onprogress=c,C.onabort=d,C},Hw=(t="",e,s,i)=>typeof e=="function"?(...n)=>e(s,...n,i):!e||!ze(e.url)?null:Ww(t,e,s,i),Oo=(t="",e)=>{if(typeof e=="function")return e;if(!e||!ze(e.url))return(n,o)=>o();const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,o,a)=>{const h=kr(n,t+e.url,e);return h.onload=c=>{o(Dt("load",c.status,s(c.response),c.getAllResponseHeaders()))},h.onerror=c=>{a(Dt("error",c.status,i(c.response)||c.statusText,c.getAllResponseHeaders()))},h.ontimeout=Gr(a),h}},Yg=(t=0,e=1)=>t+Math.random()*(e-t),qw=(t,e=1e3,s=0,i=25,n=250)=>{let o=null;const a=Date.now(),h=()=>{let c=Date.now()-a,d=Yg(i,n);c+d>e&&(d=c+d-e);let p=c/e;if(p>=1||document.hidden){t(1);return}t(p),o=setTimeout(h,d)};return e>0&&h(),{clear:()=>{clearTimeout(o)}}},Yw=(t,e)=>{const s={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=e,n=(p,m)=>{const E=()=>{s.duration===0||s.progress===null||d.fire("progress",d.getProgress())},f=()=>{s.complete=!0,d.fire("load-perceived",s.response.body)};d.fire("start"),s.timestamp=Date.now(),s.perceivedPerformanceUpdater=qw(g=>{s.perceivedProgress=g,s.perceivedDuration=Date.now()-s.timestamp,E(),s.response&&s.perceivedProgress===1&&!s.complete&&f()},i?Yg(750,1500):0),s.request=t(p,m,g=>{s.response=le(g)?g:{type:"load",code:200,body:`${g}`,headers:{}},s.duration=Date.now()-s.timestamp,s.progress=1,d.fire("load",s.response.body),(!i||i&&s.perceivedProgress===1)&&f()},g=>{s.perceivedPerformanceUpdater.clear(),d.fire("error",le(g)?g:{type:"error",code:0,body:`${g}`})},(g,_,v)=>{s.duration=Date.now()-s.timestamp,s.progress=g?_/v:null,E()},()=>{s.perceivedPerformanceUpdater.clear(),d.fire("abort",s.response?s.response.body:null)},g=>{d.fire("transfer",g)})},o=()=>{s.request&&(s.perceivedPerformanceUpdater.clear(),s.request.abort&&s.request.abort(),s.complete=!0)},a=()=>{o(),s.complete=!1,s.perceivedProgress=0,s.progress=0,s.timestamp=null,s.perceivedDuration=0,s.duration=0,s.request=null,s.response=null},h=i?()=>s.progress?Math.min(s.progress,s.perceivedProgress):null:()=>s.progress||null,c=i?()=>Math.min(s.duration,s.perceivedDuration):()=>s.duration,d=L(I({},Mu()),{process:n,abort:o,getProgress:h,getDuration:c,reset:a});return d},Xg=t=>t.substring(0,t.lastIndexOf("."))||t,Xw=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||Ju(t)?e[0]=t.name||Wg():Ju(t)?(e[1]=t.length,e[2]=qg(t)):ze(t)&&(e[0]=Nc(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},Br=t=>!!(t instanceof File||t instanceof Blob&&t.name),Zg=t=>{if(!le(t))return t;const e=Au(t)?[]:{};for(const s in t){if(!t.hasOwnProperty(s))continue;const i=t[s];e[s]=i&&le(i)?Zg(i):i}return e},Zw=(t=null,e=null,s=null)=>{const i=Im(),n={archived:!1,frozen:!1,released:!1,source:null,file:s,serverFileReference:e,transferId:null,processingAborted:!1,status:e?it.PROCESSING_COMPLETE:it.INIT,activeLoader:null,activeProcessor:null};let o=null;const a={},h=$=>n.status=$,c=($,...D)=>{n.released||n.frozen||y.fire($,...D)},d=()=>Nu(n.file.name),p=()=>n.file.type,m=()=>n.file.size,E=()=>n.file,f=($,D,V)=>{if(n.source=$,y.fireSync("init"),n.file){y.fireSync("load-skip");return}n.file=Xw($),D.on("init",()=>{c("load-init")}),D.on("meta",B=>{n.file.size=B.size,n.file.filename=B.filename,B.source&&(t=te.LIMBO,n.serverFileReference=B.source,n.status=it.PROCESSING_COMPLETE),c("load-meta")}),D.on("progress",B=>{h(it.LOADING),c("load-progress",B)}),D.on("error",B=>{h(it.LOAD_ERROR),c("load-request-error",B)}),D.on("abort",()=>{h(it.INIT),c("load-abort")}),D.on("load",B=>{n.activeLoader=null;const G=N=>{n.file=Br(N)?N:n.file,t===te.LIMBO&&n.serverFileReference?h(it.PROCESSING_COMPLETE):h(it.IDLE),c("load")},X=N=>{n.file=B,c("load-meta"),h(it.LOAD_ERROR),c("load-file-error",N)};if(n.serverFileReference){G(B);return}V(B,G,X)}),D.setSource($),n.activeLoader=D,D.load()},g=()=>{n.activeLoader&&n.activeLoader.load()},_=()=>{if(n.activeLoader){n.activeLoader.abort();return}h(it.INIT),c("load-abort")},v=($,D)=>{if(n.processingAborted){n.processingAborted=!1;return}if(h(it.PROCESSING),o=null,!(n.file instanceof Blob)){y.on("load",()=>{v($,D)});return}$.on("load",G=>{n.transferId=null,n.serverFileReference=G}),$.on("transfer",G=>{n.transferId=G}),$.on("load-perceived",G=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=G,h(it.PROCESSING_COMPLETE),c("process-complete",G)}),$.on("start",()=>{c("process-start")}),$.on("error",G=>{n.activeProcessor=null,h(it.PROCESSING_ERROR),c("process-error",G)}),$.on("abort",G=>{n.activeProcessor=null,n.serverFileReference=G,h(it.IDLE),c("process-abort"),o&&o()}),$.on("progress",G=>{c("process-progress",G)});const V=G=>{n.archived||$.process(G,I({},a))},B=console.error;D(n.file,V,B),n.activeProcessor=$},R=()=>{n.processingAborted=!1,h(it.PROCESSING_QUEUED)},w=()=>new Promise($=>{if(!n.activeProcessor){n.processingAborted=!0,h(it.IDLE),c("process-abort"),$();return}o=()=>{$()},n.activeProcessor.abort()}),x=($,D)=>new Promise((V,B)=>{const G=n.serverFileReference!==null?n.serverFileReference:n.transferId;if(G===null){V();return}$(G,()=>{n.serverFileReference=null,n.transferId=null,V()},X=>{if(!D){V();return}h(it.PROCESSING_REVERT_ERROR),c("process-revert-error"),B(X)}),h(it.IDLE),c("process-revert")}),C=($,D,V)=>{const B=$.split("."),G=B[0],X=B.pop();let N=a;B.forEach(W=>N=N[W]),JSON.stringify(N[X])!==JSON.stringify(D)&&(N[X]=D,c("metadata-update",{key:G,value:a[G],silent:V}))},y=L(I({id:{get:()=>i},origin:{get:()=>t,set:$=>t=$},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>Xg(n.file.name)},fileExtension:{get:d},fileType:{get:p},fileSize:{get:m},file:{get:E},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:$=>Zg($?a[$]:a),setMetadata:($,D,V)=>{if(le($)){const B=$;return Object.keys(B).forEach(G=>{C(G,B[G],D)}),$}return C($,D,V),D},extend:($,D)=>P[$]=D,abortLoad:_,retryLoad:g,requestProcessing:R,abortProcessing:w,load:f,process:v,revert:x},Mu()),{freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived},setFile:$=>n.file=$}),P=Zn(y);return P},Qw=(t,e)=>dn(e)?0:ze(e)?t.findIndex(s=>s.id===e):-1,Ef=(t,e)=>{const s=Qw(t,e);if(!(s<0))return t[s]||null},bf=(t,e,s,i,n,o)=>{const a=kr(null,t,{method:"GET",responseType:"blob"});return a.onload=h=>{const c=h.getAllResponseHeaders(),d=wm(c).name||Nc(t);e(Dt("load",h.status,bo(h.response,d),c))},a.onerror=h=>{s(Dt("error",h.status,h.statusText,h.getAllResponseHeaders()))},a.onheaders=h=>{o(Dt("headers",h.status,null,h.getAllResponseHeaders()))},a.ontimeout=Gr(s),a.onprogress=i,a.onabort=n,a},If=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Jw=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&If(location.href)!==If(t),Bc=t=>(...e)=>pr(t)?t(...e):t,Kw=t=>!Br(t.file),Vu=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:ii(e.items)})},0)},_f=(t,...e)=>new Promise(s=>{if(!t)return s(!0);const i=t(...e);if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),zu=(t,e)=>{t.items.sort((s,i)=>e(es(s),es(i)))},vs=(t,e)=>(a={})=>{var h=a,{query:s,success:i=()=>{},failure:n=()=>{}}=h,o=zm(h,["query","success","failure"]);const c=mr(t.items,s);if(!c){n({error:Dt("error",0,"Item not found"),file:null});return}e(c,i,n,o||{})},tT=(t,e,s)=>({ABORT_ALL:()=>{ii(s.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const n=i.map(a=>({source:a.source?a.source:a,options:a.options}));let o=ii(s.items);o.forEach(a=>{n.find(h=>h.source===a.source||h.source===a.file)||t("REMOVE_ITEM",{query:a,remove:!1})}),o=ii(s.items),n.forEach((a,h)=>{o.find(c=>c.source===a.source||c.file===a.source)||t("ADD_ITEM",L(I({},a),{interactionMethod:Fs.NONE,index:h}))})},DID_UPDATE_ITEM_METADATA:({id:i,action:n,change:o})=>{o.silent||(clearTimeout(s.itemUpdateTimeout),s.itemUpdateTimeout=setTimeout(()=>{const a=Ef(s.items,i);if(!e("IS_ASYNC")){si("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:e,action:n,change:o}).then(p=>{const m=e("GET_BEFORE_PREPARE_FILE");m&&(p=m(a,p)),p&&t("REQUEST_PREPARE_OUTPUT",{query:i,item:a,success:E=>{t("DID_PREPARE_OUTPUT",{id:i,file:E})}},!0)});return}a.origin===te.LOCAL&&t("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const h=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:i})},32)},c=p=>{a.revert(Oo(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(p?h:()=>{}).catch(()=>{})},d=p=>{a.abortProcessing().then(p?h:()=>{})};if(a.status===it.PROCESSING_COMPLETE)return c(s.options.instantUpload);if(a.status===it.PROCESSING)return d(s.options.instantUpload);s.options.instantUpload&&h()},0))},MOVE_ITEM:({query:i,index:n})=>{const o=mr(s.items,i);if(!o)return;const a=s.items.indexOf(o);n=zg(n,0,s.items.length-1),a!==n&&s.items.splice(n,0,s.items.splice(a,1)[0])},SORT:({compare:i})=>{zu(s,i),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:n,interactionMethod:o,success:a=()=>{},failure:h=()=>{}})=>{let c=n;if(n===-1||typeof n=="undefined"){const f=e("GET_ITEM_INSERT_LOCATION"),g=e("GET_TOTAL_ITEMS");c=f==="before"?0:g}const d=e("GET_IGNORED_FILES"),p=f=>Br(f)?!d.includes(f.name.toLowerCase()):!dn(f),E=i.filter(p).map(f=>new Promise((g,_)=>{t("ADD_ITEM",{interactionMethod:o,source:f.source||f,success:g,failure:_,index:c++,options:f.options||{}})}));Promise.all(E).then(a).catch(h)},ADD_ITEM:({source:i,index:n=-1,interactionMethod:o,success:a=()=>{},failure:h=()=>{},options:c={}})=>{if(dn(i)){h({error:Dt("error",0,"No source"),file:null});return}if(Br(i)&&s.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!Aw(s)){if(s.options.allowMultiple||!s.options.allowMultiple&&!s.options.allowReplace){const w=Dt("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:i,error:w}),h({error:w,file:null});return}const R=ii(s.items)[0];if(R.status===it.PROCESSING_COMPLETE||R.status===it.PROCESSING_REVERT_ERROR){const w=e("GET_FORCE_REVERT");if(R.revert(Oo(s.options.server.url,s.options.server.revert),w).then(()=>{w&&t("ADD_ITEM",{source:i,index:n,interactionMethod:o,success:a,failure:h,options:c})}).catch(()=>{}),w)return}t("REMOVE_ITEM",{query:R.id})}const d=c.type==="local"?te.LOCAL:c.type==="limbo"?te.LIMBO:te.INPUT,p=Zw(d,d===te.INPUT?null:i,c.file);Object.keys(c.metadata||{}).forEach(R=>{p.setMetadata(R,c.metadata[R])}),Hr("DID_CREATE_ITEM",p,{query:e,dispatch:t});const m=e("GET_ITEM_INSERT_LOCATION");s.options.itemInsertLocationFreedom||(n=m==="before"?-1:s.items.length),yw(s.items,p,n),pr(m)&&i&&zu(s,m);const E=p.id;p.on("init",()=>{t("DID_INIT_ITEM",{id:E})}),p.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:E})}),p.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:E})}),p.on("load-progress",R=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:E,progress:R})}),p.on("load-request-error",R=>{const w=Bc(s.options.labelFileLoadError)(R);if(R.code>=400&&R.code<500){t("DID_THROW_ITEM_INVALID",{id:E,error:R,status:{main:w,sub:`${R.code} (${R.body})`}}),h({error:R,file:es(p)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:E,error:R,status:{main:w,sub:s.options.labelTapToRetry}})}),p.on("load-file-error",R=>{t("DID_THROW_ITEM_INVALID",{id:E,error:R.status,status:R.status}),h({error:R.status,file:es(p)})}),p.on("load-abort",()=>{t("REMOVE_ITEM",{query:E})}),p.on("load-skip",()=>{p.on("metadata-update",R=>{Br(p.file)&&t("DID_UPDATE_ITEM_METADATA",{id:E,change:R})}),t("COMPLETE_LOAD_ITEM",{query:E,item:p,data:{source:i,success:a}})}),p.on("load",()=>{const R=w=>{if(!w){t("REMOVE_ITEM",{query:E});return}p.on("metadata-update",x=>{t("DID_UPDATE_ITEM_METADATA",{id:E,change:x})}),si("SHOULD_PREPARE_OUTPUT",!1,{item:p,query:e}).then(x=>{const C=e("GET_BEFORE_PREPARE_FILE");C&&(x=C(p,x));const O=()=>{t("COMPLETE_LOAD_ITEM",{query:E,item:p,data:{source:i,success:a}}),Vu(t,s)};if(x){t("REQUEST_PREPARE_OUTPUT",{query:E,item:p,success:y=>{t("DID_PREPARE_OUTPUT",{id:E,file:y}),O()}},!0);return}O()})};si("DID_LOAD_ITEM",p,{query:e,dispatch:t}).then(()=>{_f(e("GET_BEFORE_ADD_FILE"),es(p)).then(R)}).catch(w=>{if(!w||!w.error||!w.status)return R(!1);t("DID_THROW_ITEM_INVALID",{id:E,error:w.error,status:w.status})})}),p.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:E})}),p.on("process-progress",R=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:E,progress:R})}),p.on("process-error",R=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:E,error:R,status:{main:Bc(s.options.labelFileProcessingError)(R),sub:s.options.labelTapToRetry}})}),p.on("process-revert-error",R=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:E,error:R,status:{main:Bc(s.options.labelFileProcessingRevertError)(R),sub:s.options.labelTapToRetry}})}),p.on("process-complete",R=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:E,error:null,serverFileReference:R}),t("DID_DEFINE_VALUE",{id:E,value:R})}),p.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:E})}),p.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:E}),t("DID_DEFINE_VALUE",{id:E,value:null})}),t("DID_ADD_ITEM",{id:E,index:n,interactionMethod:o}),Vu(t,s);const{url:f,load:g,restore:_,fetch:v}=s.options.server||{};p.load(i,Vw(d===te.INPUT?ze(i)&&Jw(i)&&v?Uu(f,v):bf:d===te.LIMBO?Uu(f,_):Uu(f,g)),(R,w,x)=>{si("LOAD_FILE",R,{query:e}).then(w).catch(x)})},REQUEST_PREPARE_OUTPUT:({item:i,success:n,failure:o=()=>{}})=>{const a={error:Dt("error",0,"Item not found"),file:null};if(i.archived)return o(a);si("PREPARE_OUTPUT",i.file,{query:e,item:i}).then(h=>{si("COMPLETE_PREPARE_OUTPUT",h,{query:e,item:i}).then(c=>{if(i.archived)return o(a);n(c)})})},COMPLETE_LOAD_ITEM:({item:i,data:n})=>{const{success:o,source:a}=n,h=e("GET_ITEM_INSERT_LOCATION");if(pr(h)&&a&&zu(s,h),t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===te.INPUT?null:a}),o(es(i)),i.origin===te.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===te.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:a}),t("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||a});return}e("IS_ASYNC")&&s.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:vs(s,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:vs(s,(i,n,o)=>{t("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:a=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:a}),n({file:i,output:a})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:vs(s,(i,n,o)=>{if(!(i.status===it.IDLE||i.status===it.PROCESSING_ERROR)){const h=()=>t("REQUEST_ITEM_PROCESSING",{query:i,success:n,failure:o}),c=()=>document.hidden?h():setTimeout(h,32);i.status===it.PROCESSING_COMPLETE||i.status===it.PROCESSING_REVERT_ERROR?i.revert(Oo(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(c).catch(()=>{}):i.status===it.PROCESSING&&i.abortProcessing().then(c);return}i.status!==it.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:n,failure:o},!0))}),PROCESS_ITEM:vs(s,(i,n,o)=>{const a=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",it.PROCESSING).length===a){s.processingQueue.push({id:i.id,success:n,failure:o});return}if(i.status===it.PROCESSING)return;const c=()=>{const p=s.processingQueue.shift();if(!p)return;const{id:m,success:E,failure:f}=p,g=mr(s.items,m);if(!g||g.archived){c();return}t("PROCESS_ITEM",{query:m,success:E,failure:f},!0)};i.onOnce("process-complete",()=>{n(es(i)),c();const p=s.options.server;if(s.options.instantUpload&&i.origin===te.LOCAL&&pr(p.remove)){const f=()=>{};i.origin=te.LIMBO,s.options.server.remove(i.source,f,f)}e("GET_ITEMS_BY_STATUS",it.PROCESSING_COMPLETE).length===s.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",p=>{o({error:p,file:es(i)}),c()});const d=s.options;i.process(Yw(Hw(d.server.url,d.server.process,d.name,{chunkTransferId:i.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(p,m,E)=>{si("PREPARE_OUTPUT",p,{query:e,item:i}).then(f=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:f}),m(f)}).catch(E)})}),RETRY_ITEM_PROCESSING:vs(s,i=>{t("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:vs(s,i=>{_f(e("GET_BEFORE_REMOVE_FILE"),es(i)).then(n=>{n&&t("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:vs(s,i=>{i.release()}),REMOVE_ITEM:vs(s,(i,n,o,a)=>{const h=()=>{const d=i.id;Ef(s.items,d).archive(),t("DID_REMOVE_ITEM",{error:null,id:d,item:i}),Vu(t,s),n(es(i))},c=s.options.server;i.origin===te.LOCAL&&c&&pr(c.remove)&&a.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:i.id}),c.remove(i.source,()=>h(),d=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:Dt("error",0,d,null),status:{main:Bc(s.options.labelFileRemoveError)(d),sub:s.options.labelTapToRetry}})})):((a.revert&&i.origin!==te.LOCAL&&i.serverId!==null||s.options.chunkUploads&&i.file.size>s.options.chunkSize||s.options.chunkUploads&&s.options.chunkForce)&&i.revert(Oo(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")),h())}),ABORT_ITEM_LOAD:vs(s,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:vs(s,i=>{if(i.serverId){t("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{s.options.instantUpload&&t("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:vs(s,i=>{if(!s.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:i});return}const n=h=>{h&&t("REVERT_ITEM_PROCESSING",{query:i})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return n(!0);const a=o(es(i));if(a==null)return n(!0);if(typeof a=="boolean")return n(a);typeof a.then=="function"&&a.then(n)}),REVERT_ITEM_PROCESSING:vs(s,i=>{i.revert(Oo(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(s.options.instantUpload||Kw(i))&&t("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const n=Object.keys(i),o=eT.filter(h=>n.includes(h));[...o,...Object.keys(i).filter(h=>!o.includes(h))].forEach(h=>{t(`SET_${yu(h,"_").toUpperCase()}`,{value:i[h]})})}}),eT=["server"],Tm=t=>t,un=t=>document.createElement(t),Ft=(t,e)=>{let s=t.childNodes[0];s?e!==s.nodeValue&&(s.nodeValue=e):(s=document.createTextNode(e),t.appendChild(s))},vf=(t,e,s,i)=>{const n=(i%360-90)*Math.PI/180;return{x:t+s*Math.cos(n),y:e+s*Math.sin(n)}},sT=(t,e,s,i,n,o)=>{const a=vf(t,e,s,n),h=vf(t,e,s,i);return["M",a.x,a.y,"A",s,s,0,o,0,h.x,h.y].join(" ")},iT=(t,e,s,i,n)=>{let o=1;return n>i&&n-i<=.5&&(o=0),i>n&&i-n>=.5&&(o=0),sT(t,e,s,Math.min(.9999,i)*360,Math.min(.9999,n)*360,o)},nT=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const s=Ch("svg");t.ref.path=Ch("path",{"stroke-width":2,"stroke-linecap":"round"}),s.appendChild(t.ref.path),t.ref.svg=s,t.appendChild(s)},rT=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const s=parseInt(ee(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5;let n=0,o=0;e.spin?(n=0,o=.5):(n=0,o=e.progress);const a=iT(i,i,i-s,n,o);ee(t.ref.path,"d",a),ee(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},wf=Ut({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:nT,write:rT,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),aT=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},oT=({root:t,props:e})=>{const{isDisabled:s}=e,i=t.query("GET_DISABLED")||e.opacity===0;i&&!s?(e.isDisabled=!0,ee(t.element,"disabled","disabled")):!i&&s&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},Qg=Ut({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:aT,write:oT}),Jg=(t,e=".",s=1e3,i={})=>{const{labelBytes:n="bytes",labelKilobytes:o="KB",labelMegabytes:a="MB",labelGigabytes:h="GB"}=i;t=Math.round(Math.abs(t));const c=s,d=s*s,p=s*s*s;return t<c?`${t} ${n}`:t<d?`${Math.floor(t/c)} ${o}`:t<p?`${Tf(t/d,1,e)} ${a}`:`${Tf(t/p,2,e)} ${h}`},Tf=(t,e,s)=>t.toFixed(e).split(".").filter(i=>i!=="0").join(s),lT=({root:t,props:e})=>{const s=un("span");s.className="filepond--file-info-main",ee(s,"aria-hidden","true"),t.appendChild(s),t.ref.fileName=s;const i=un("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,Ft(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Ft(s,Tm(t.query("GET_ITEM_NAME",e.id)))},Ku=({root:t,props:e})=>{Ft(t.ref.fileSize,Jg(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),Ft(t.ref.fileName,Tm(t.query("GET_ITEM_NAME",e.id)))},xf=({root:t,props:e})=>{if(To(t.query("GET_ITEM_SIZE",e.id))){Ku({root:t,props:e});return}Ft(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},cT=Ut({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:We({DID_LOAD_ITEM:Ku,DID_UPDATE_ITEM_META:Ku,DID_THROW_ITEM_LOAD_ERROR:xf,DID_THROW_ITEM_INVALID:xf}),didCreateView:t=>{Hr("CREATE_VIEW",L(I({},t),{view:t}))},create:lT,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Kg=t=>Math.round(t*100),hT=({root:t})=>{const e=un("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const s=un("span");s.className="filepond--file-status-sub",t.appendChild(s),t.ref.sub=s,tE({root:t,action:{progress:null}})},tE=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${Kg(e.progress)}%`;Ft(t.ref.main,s),Ft(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},dT=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${Kg(e.progress)}%`;Ft(t.ref.main,s),Ft(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},uT=({root:t})=>{Ft(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),Ft(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},pT=({root:t})=>{Ft(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Ft(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},mT=({root:t})=>{Ft(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Ft(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},Sf=({root:t})=>{Ft(t.ref.main,""),Ft(t.ref.sub,"")},Lo=({root:t,action:e})=>{Ft(t.ref.main,e.status.main),Ft(t.ref.sub,e.status.sub)},fT=Ut({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:We({DID_LOAD_ITEM:Sf,DID_REVERT_ITEM_PROCESSING:Sf,DID_REQUEST_ITEM_PROCESSING:uT,DID_ABORT_ITEM_PROCESSING:pT,DID_COMPLETE_ITEM_PROCESSING:mT,DID_UPDATE_ITEM_PROCESS_PROGRESS:dT,DID_UPDATE_ITEM_LOAD_PROGRESS:tE,DID_THROW_ITEM_LOAD_ERROR:Lo,DID_THROW_ITEM_INVALID:Lo,DID_THROW_ITEM_PROCESSING_ERROR:Lo,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Lo,DID_THROW_ITEM_REMOVE_ERROR:Lo}),didCreateView:t=>{Hr("CREATE_VIEW",L(I({},t),{view:t}))},create:hT,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),tp={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ep=[];$t(tp,t=>{ep.push(t)});const ls=t=>{if(sp(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},gT=t=>t.ref.buttonAbortItemLoad.rect.element.width,Uc=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),ET=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),bT=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),IT=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),sp=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),_T={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:bT},processProgressIndicator:{opacity:0,align:IT},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Rf={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ls},status:{translateX:ls}},Wu={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},fa={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ls},status:{translateX:ls,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ls},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:sp},info:{translateX:ls},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:sp},buttonRemoveItem:{opacity:1},info:{translateX:ls},status:{opacity:1,translateX:ls}},DID_LOAD_ITEM:Rf,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ls},status:{translateX:ls}},DID_START_ITEM_PROCESSING:Wu,DID_REQUEST_ITEM_PROCESSING:Wu,DID_UPDATE_ITEM_PROCESS_PROGRESS:Wu,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ls}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ls},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Rf},vT=Ut({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),wT=({root:t,props:e})=>{const s=Object.keys(tp).reduce((g,_)=>(g[_]=I({},tp[_]),g),{}),{id:i}=e,n=t.query("GET_ALLOW_REVERT"),o=t.query("GET_ALLOW_REMOVE"),a=t.query("GET_ALLOW_PROCESS"),h=t.query("GET_INSTANT_UPLOAD"),c=t.query("IS_ASYNC"),d=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let p;c?a&&!n?p=g=>!/RevertItemProcessing/.test(g):!a&&n?p=g=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(g):!a&&!n&&(p=g=>!/Process/.test(g)):p=g=>!/Process/.test(g);const m=p?ep.filter(p):ep.concat();if(h&&n&&(s.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",s.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!n){const g=fa.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=ET,g.info.translateY=Uc,g.status.translateY=Uc,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(g=>{fa[g].status.translateY=Uc}),fa.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=gT),d&&n){s.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const g=fa.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=ls,g.status.translateY=Uc,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(s.RemoveItem.disabled=!0),$t(s,(g,_)=>{const v=t.createChildView(Qg,{label:t.query(_.label),icon:t.query(_.icon),opacity:0});m.includes(g)&&t.appendChildView(v),_.disabled&&(v.element.setAttribute("disabled","disabled"),v.element.setAttribute("hidden","hidden")),v.element.dataset.align=t.query(`GET_STYLE_${_.align}`),v.element.classList.add(_.className),v.on("click",R=>{R.stopPropagation(),!_.disabled&&t.dispatch(_.action,{query:i})}),t.ref[`button${g}`]=v}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(vT)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(cT,{id:i})),t.ref.status=t.appendChildView(t.createChildView(fT,{id:i}));const E=t.appendChildView(t.createChildView(wf,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));E.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=E;const f=t.appendChildView(t.createChildView(wf,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));f.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=f,t.ref.activeStyles=[]},TT=({root:t,actions:e,props:s})=>{xT({root:t,actions:e,props:s});let i=e.concat().filter(n=>/^DID_/.test(n.type)).reverse().find(n=>fa[n.type]);if(i){t.ref.activeStyles=[];const n=fa[i.type];$t(_T,(o,a)=>{const h=t.ref[o];$t(a,(c,d)=>{const p=n[o]&&typeof n[o][c]!="undefined"?n[o][c]:d;t.ref.activeStyles.push({control:h,key:c,value:p})})})}t.ref.activeStyles.forEach(({control:n,key:o,value:a})=>{n[o]=typeof a=="function"?a(t):a})},xT=We({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),ST=Ut({create:wT,write:TT,didCreateView:t=>{Hr("CREATE_VIEW",L(I({},t),{view:t}))},name:"file"}),RT=({root:t,props:e})=>{t.ref.fileName=un("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(ST,{id:e.id})),t.ref.data=!1},CT=({root:t,props:e})=>{Ft(t.ref.fileName,Tm(t.query("GET_ITEM_NAME",e.id)))},OT=Ut({create:RT,ignoreRect:!0,write:We({DID_LOAD_ITEM:CT}),didCreateView:t=>{Hr("CREATE_VIEW",L(I({},t),{view:t}))},tag:"fieldset",name:"file-wrapper"}),Cf={type:"spring",damping:.6,mass:7},LT=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Cf},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Cf},styles:["translateY"]}}].forEach(s=>{AT(t,s,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},AT=(t,e,s)=>{const i=Ut({name:`panel-${e.name} filepond--${s}`,mixins:e.mixins,ignoreRectUpdate:!0}),n=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(n)},$T=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=Pg(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const s=t.ref.top.rect.element,i=t.ref.bottom.rect.element,n=Math.max(s.height+i.height,e.height);t.ref.center.translateY=s.height,t.ref.center.scaleY=(n-s.height-i.height)/100,t.ref.bottom.translateY=n-i.height},eE=Ut({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:$T,create:LT,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),yT=t=>{const e=t.map(i=>i.id);let s;return{setIndex:i=>{s=i},getIndex:()=>s,getItemIndex:i=>e.indexOf(i.id)}},Of={type:"spring",stiffness:.75,damping:.45,mass:10},Lf="spring",Af={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},MT=({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(OT,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(eE,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const s=i=>{if(!i.isPrimary)return;let n=!1;const o={x:i.pageX,y:i.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const a=yT(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:a});const h=m=>{if(!m.isPrimary)return;m.stopPropagation(),m.preventDefault(),e.dragOffset={x:m.pageX-o.x,y:m.pageY-o.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!n&&(n=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:a})},c=m=>{m.isPrimary&&(e.dragOffset={x:m.pageX-o.x,y:m.pageY-o.y},p())},d=()=>{p()},p=()=>{document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",c),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:a}),n&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",h),document.addEventListener("pointerup",c)};t.element.addEventListener("pointerdown",s)},NT=We({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),PT=We({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:s,shouldOptimize:i})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let n=e.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>Af[a.type]);n&&n.type!==s.currentState&&(s.currentState=n.type,t.element.dataset.filepondItemState=Af[s.currentState]||"");const o=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");o?i||(t.height=t.rect.element.width*o):(NT({root:t,actions:e,props:s}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),i&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),DT=Ut({create:MT,write:PT,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Lf,scaleY:Lf,translateX:Of,translateY:Of,opacity:{type:"tween",duration:150}}}});var xm=(t,e)=>Math.max(1,Math.floor((t+1)/e));const Sm=(t,e,s)=>{if(!s)return;const i=t.rect.element.width,n=e.length;let o=null;if(n===0||s.top<e[0].rect.element.top)return-1;const h=e[0].rect.element,c=h.marginLeft+h.marginRight,d=h.width+c,p=xm(i,d);if(p===1){for(let f=0;f<n;f++){const g=e[f],_=g.rect.outer.top+g.rect.element.height*.5;if(s.top<_)return f}return n}const m=h.marginTop+h.marginBottom,E=h.height+m;for(let f=0;f<n;f++){const g=f%p,_=Math.floor(f/p),v=g*d,R=_*E,w=R-h.marginTop,x=v+d,C=R+E+h.marginBottom;if(s.top<C&&s.top>w){if(s.left<x)return f;f!==n-1?o=f:o=null}}return o!==null?o:n},Vc={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},FT=({root:t})=>{ee(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},jT=({root:t,action:e})=>{const{id:s,index:i,interactionMethod:n}=e;t.ref.addIndex=i;const o=Date.now();let a=o,h=1;if(n!==Fs.NONE){h=0;const c=t.query("GET_ITEM_INSERT_INTERVAL"),d=o-t.ref.lastItemSpanwDate;a=d<c?o+(c-d):o}t.ref.lastItemSpanwDate=a,t.appendChildView(t.createChildView(DT,{spawnDate:a,id:s,opacity:h,interactionMethod:n}),i)},$f=(t,e,s,i=0,n=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=s,Date.now()>t.spawnDate&&(t.opacity===0&&kT(t,e,s,i,n),t.scaleX=1,t.scaleY=1,t.opacity=1))},kT=(t,e,s,i,n)=>{t.interactionMethod===Fs.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=s):t.interactionMethod===Fs.DROP?(t.translateX=null,t.translateX=e-i*20,t.translateY=null,t.translateY=s-n*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Fs.BROWSE?(t.translateY=null,t.translateY=s-30):t.interactionMethod===Fs.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},GT=({root:t,action:e})=>{const{id:s}=e,i=t.childViews.find(n=>n.id===s);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},Hu=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,BT=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,UT=({root:t,action:e})=>{const{id:s,dragState:i}=e,n=t.query("GET_ITEM",{id:s}),o=t.childViews.find(v=>v.id===s),a=t.childViews.length,h=i.getItemIndex(n);if(!o)return;const c={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},d=Hu(o),p=BT(o);let m=Math.floor(t.rect.outer.width/p);m>a&&(m=a);const E=Math.floor(a/m+1);Vc.setHeight=d*E,Vc.setWidth=p*m;var f={y:Math.floor(c.y/d),x:Math.floor(c.x/p),getGridIndex:function(){return c.y>Vc.getHeight||c.y<0||c.x>Vc.getWidth||c.x<0?h:this.y*m+this.x},getColIndex:function(){const R=t.query("GET_ACTIVE_ITEMS"),w=t.childViews.filter(B=>B.rect.element.height),x=R.map(B=>w.find(G=>G.id===B.id)),C=x.findIndex(B=>B===o),O=Hu(o),y=x.length;let P=y,$=0,D=0,V=0;for(let B=0;B<y;B++)if($=Hu(x[B]),V=D,D=V+$,c.y<D){if(C>B){if(c.y<V+O){P=B;break}continue}P=B;break}return P}};const g=m>1?f.getGridIndex():f.getColIndex();t.dispatch("MOVE_ITEM",{query:o,index:g});const _=i.getIndex();if(_===void 0||_!==g){if(i.setIndex(g),_===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:h,target:g})}},VT=We({DID_ADD_ITEM:jT,DID_REMOVE_ITEM:GT,DID_DRAG_ITEM:UT}),zT=({root:t,props:e,actions:s,shouldOptimize:i})=>{VT({root:t,props:e,actions:s});const{dragCoordinates:n}=e,o=t.rect.element.width,a=t.childViews.filter(x=>x.rect.element.height),h=t.query("GET_ACTIVE_ITEMS").map(x=>a.find(C=>C.id===x.id)).filter(x=>x),c=n?Sm(t,h,n):null,d=t.ref.addIndex||null;t.ref.addIndex=null;let p=0,m=0,E=0;if(h.length===0)return;const f=h[0].rect.element,g=f.marginTop+f.marginBottom,_=f.marginLeft+f.marginRight,v=f.width+_,R=f.height+g,w=xm(o,v);if(w===1){let x=0,C=0;h.forEach((O,y)=>{if(c){let D=y-c;D===-2?C=-g*.25:D===-1?C=-g*.75:D===0?C=g*.75:D===1?C=g*.25:C=0}i&&(O.translateX=null,O.translateY=null),O.markedForRemoval||$f(O,0,x+C);let $=(O.rect.element.height+g)*(O.markedForRemoval?O.opacity:1);x+=$})}else{let x=0,C=0;h.forEach((O,y)=>{y===c&&(p=1),y===d&&(E+=1),O.markedForRemoval&&O.opacity<.5&&(m-=1);const P=y+E+p+m,$=P%w,D=Math.floor(P/w),V=$*v,B=D*R,G=Math.sign(V-x),X=Math.sign(B-C);x=V,C=B,!O.markedForRemoval&&(i&&(O.translateX=null,O.translateY=null),$f(O,V,B,G,X))})}},WT=(t,e)=>e.filter(s=>s.data&&s.data.id?t.id===s.data.id:!0),HT=Ut({create:FT,write:zT,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:WT,mixins:{apis:["dragCoordinates"]}}),qT=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(HT)),e.dragCoordinates=null,e.overflowing=!1},YT=({root:t,props:e,action:s})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:s.position.scopeLeft-t.ref.list.rect.element.left,top:s.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},XT=({props:t})=>{t.dragCoordinates=null},ZT=We({DID_DRAG:YT,DID_END_DRAG:XT}),QT=({root:t,props:e,actions:s})=>{if(ZT({root:t,props:e,actions:s}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},JT=Ut({create:qT,write:QT,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ni=(t,e,s,i="")=>{s?ee(t,e,i):t.removeAttribute(e)},KT=t=>{if(!(!t||t.value==="")){try{t.value=""}catch(e){}if(t.value){const e=un("form"),s=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?s.insertBefore(t,i):s.appendChild(t)}}},tx=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,ee(t.element,"name",t.query("GET_NAME")),ee(t.element,"aria-controls",`filepond--assistant-${e.id}`),ee(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),sE({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),iE({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),nE({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),ip({root:t}),rE({root:t,action:{value:t.query("GET_REQUIRED")}}),aE({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=s=>{if(!t.element.value)return;const i=Array.from(t.element.files).map(n=>(n._relativePath=n.webkitRelativePath,n));setTimeout(()=>{e.onload(i),KT(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},sE=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ni(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},iE=({root:t,action:e})=>{ni(t.element,"multiple",e.value)},nE=({root:t,action:e})=>{ni(t.element,"webkitdirectory",e.value)},ip=({root:t})=>{const e=t.query("GET_DISABLED"),s=t.query("GET_ALLOW_BROWSE"),i=e||!s;ni(t.element,"disabled",i)},rE=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&ni(t.element,"required",!0):ni(t.element,"required",!1)},aE=({root:t,action:e})=>{ni(t.element,"capture",!!e.value,e.value===!0?"":e.value)},yf=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(ni(e,"required",!1),ni(e,"name",!1)):(ni(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&ni(e,"required",!0))},ex=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},sx=Ut({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:tx,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:We({DID_LOAD_ITEM:yf,DID_REMOVE_ITEM:yf,DID_THROW_ITEM_INVALID:ex,DID_SET_DISABLED:ip,DID_SET_ALLOW_BROWSE:ip,DID_SET_ALLOW_DIRECTORIES_ONLY:nE,DID_SET_ALLOW_MULTIPLE:iE,DID_SET_ACCEPTED_FILE_TYPES:sE,DID_SET_CAPTURE_METHOD:aE,DID_SET_REQUIRED:rE})}),Mf={ENTER:13,SPACE:32},ix=({root:t,props:e})=>{const s=un("label");ee(s,"for",`filepond--browser-${e.id}`),ee(s,"id",`filepond--drop-label-${e.id}`),t.ref.handleKeyDown=i=>{(i.keyCode===Mf.ENTER||i.keyCode===Mf.SPACE)&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=i=>{i.target===s||s.contains(i.target)||t.ref.label.click()},s.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),oE(s,e.caption),t.appendChild(s),t.ref.label=s},oE=(t,e)=>{t.innerHTML=e;const s=t.querySelector(".filepond--label-action");return s&&ee(s,"tabindex","0"),e},nx=Ut({name:"drop-label",ignoreRect:!0,create:ix,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:We({DID_SET_LABEL_IDLE:({root:t,action:e})=>{oE(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),rx=Ut({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),ax=({root:t})=>{const e=t.rect.element.width*.5,s=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(rx,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:s}))},ox=({root:t,action:e})=>{if(!t.ref.blob){ax({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},lx=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},cx=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},hx=({root:t,props:e,actions:s})=>{dx({root:t,props:e,actions:s});const{blob:i}=t.ref;s.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},dx=We({DID_DRAG:ox,DID_DROP:cx,DID_END_DRAG:lx}),ux=Ut({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:hx}),lE=(t,e)=>{try{const s=new DataTransfer;e.forEach(i=>{i instanceof File?s.items.add(i):s.items.add(new File([i],i.name,{type:i.type}))}),t.files=s.files}catch(s){return!1}return!0},px=({root:t})=>t.ref.fields={},Pu=(t,e)=>t.ref.fields[e],Rm=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},Nf=({root:t})=>Rm(t),mx=({root:t,action:e})=>{const n=!(t.query("GET_ITEM",e.id).origin===te.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),o=un("input");o.type=n?"file":"hidden",o.name=t.query("GET_NAME"),t.ref.fields[e.id]=o,Rm(t)},fx=({root:t,action:e})=>{const s=Pu(t,e.id);if(!s||(e.serverFileReference!==null&&(s.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=t.query("GET_ITEM",e.id);lE(s,[i.file])},gx=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const s=Pu(t,e.id);s&&lE(s,[e.file])},0)},Ex=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},bx=({root:t,action:e})=>{const s=Pu(t,e.id);s&&(s.parentNode&&s.parentNode.removeChild(s),delete t.ref.fields[e.id])},Ix=({root:t,action:e})=>{const s=Pu(t,e.id);s&&(e.value===null?s.removeAttribute("value"):s.type!="file"&&(s.value=e.value),Rm(t))},_x=We({DID_SET_DISABLED:Ex,DID_ADD_ITEM:mx,DID_LOAD_ITEM:fx,DID_REMOVE_ITEM:bx,DID_DEFINE_VALUE:Ix,DID_PREPARE_OUTPUT:gx,DID_REORDER_ITEMS:Nf,DID_SORT_ITEMS:Nf}),vx=Ut({tag:"fieldset",name:"data",create:px,write:_x,ignoreRect:!0}),wx=t=>"getRootNode"in t?t.getRootNode():document,Tx=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],xx=["css","csv","html","txt"],Sx={zip:"zip|compressed",epub:"application/epub+zip"},cE=(t="")=>(t=t.toLowerCase(),Tx.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):xx.includes(t)?"text/"+t:Sx[t]||""),Cm=t=>new Promise((e,s)=>{const i=Mx(t);if(i.length&&!Rx(t))return e(i);Cx(t).then(e)}),Rx=t=>t.files?t.files.length>0:!1,Cx=t=>new Promise((e,s)=>{const i=(t.items?Array.from(t.items):[]).filter(n=>Ox(n)).map(n=>Lx(n));if(!i.length){e(t.files?Array.from(t.files):[]);return}Promise.all(i).then(n=>{const o=[];n.forEach(a=>{o.push.apply(o,a)}),e(o.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),Ox=t=>{if(hE(t)){const e=Om(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},Lx=t=>new Promise((e,s)=>{if(yx(t)){Ax(Om(t)).then(e).catch(s);return}e([t.getAsFile()])}),Ax=t=>new Promise((e,s)=>{const i=[];let n=0,o=0;const a=()=>{o===0&&n===0&&e(i)},h=c=>{n++;const d=c.createReader(),p=()=>{d.readEntries(m=>{if(m.length===0){n--,a();return}m.forEach(E=>{E.isDirectory?h(E):(o++,E.file(f=>{const g=$x(f);E.fullPath&&(g._relativePath=E.fullPath),i.push(g),o--,a()}))}),p()},s)};p()};h(t)}),$x=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,s=t.name,i=cE(Nu(t.name));return i.length&&(t=t.slice(0,t.size,i),t.name=s,t.lastModifiedDate=e),t},yx=t=>hE(t)&&(Om(t)||{}).isDirectory,hE=t=>"webkitGetAsEntry"in t,Om=t=>t.webkitGetAsEntry(),Mx=t=>{let e=[];try{if(e=Px(t),e.length)return e;e=Nx(t)}catch(s){}return e},Nx=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},Px=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const s=e.match(/src\s*=\s*"(.+?)"/);if(s)return[s[1]]}return[]},Lh=[],Ur=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),Dx=(t,e,s)=>{const i=Fx(e),n={element:t,filterElement:s,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=i.addListener(n),n},Fx=t=>{const e=Lh.find(i=>i.element===t);if(e)return e;const s=jx(t);return Lh.push(s),s},jx=t=>{const e=[],s={dragenter:Gx,dragover:Bx,dragleave:Vx,drop:Ux},i={};$t(s,(o,a)=>{i[o]=a(t,e),t.addEventListener(o,i[o],!1)});const n={element:t,addListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1),e.length===0&&(Lh.splice(Lh.indexOf(n),1),$t(s,a=>{t.removeEventListener(a,i[a],!1)}))})};return n},kx=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),Lm=(t,e)=>{const s=wx(e),i=kx(s,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)};let dE=null;const zc=(t,e)=>{try{t.dropEffect=e}catch(s){}},Gx=(t,e)=>s=>{s.preventDefault(),dE=s.target,e.forEach(i=>{const{element:n,onenter:o}=i;Lm(s,n)&&(i.state="enter",o(Ur(s)))})},Bx=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;Cm(i).then(n=>{let o=!1;e.some(a=>{const{filterElement:h,element:c,onenter:d,onexit:p,ondrag:m,allowdrop:E}=a;zc(i,"copy");const f=E(n);if(!f){zc(i,"none");return}if(Lm(s,c)){if(o=!0,a.state===null){a.state="enter",d(Ur(s));return}if(a.state="over",h&&!f){zc(i,"none");return}m(Ur(s))}else h&&!o&&zc(i,"none"),a.state&&(a.state=null,p(Ur(s)))})})},Ux=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;Cm(i).then(n=>{e.forEach(o=>{const{filterElement:a,element:h,ondrop:c,onexit:d,allowdrop:p}=o;if(o.state=null,!(a&&!Lm(s,h))){if(!p(n))return d(Ur(s));c(Ur(s),n)}})})},Vx=(t,e)=>s=>{dE===s.target&&e.forEach(i=>{const{onexit:n}=i;i.state=null,n(Ur(s))})},zx=(t,e,s)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:n,filterItems:o=p=>p}=s,a=Dx(t,i?document.documentElement:t,n);let h="",c="";a.allowdrop=p=>e(o(p)),a.ondrop=(p,m)=>{const E=o(m);if(!e(E)){d.ondragend(p);return}c="drag-drop",d.onload(E,p)},a.ondrag=p=>{d.ondrag(p)},a.onenter=p=>{c="drag-over",d.ondragstart(p)},a.onexit=p=>{c="drag-exit",d.ondragend(p)};const d={updateHopperState:()=>{h!==c&&(t.dataset.hopperState=c,h=c)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return d};let np=!1;const ga=[],uE=t=>{const e=document.activeElement;if(e&&(/textarea|input/i.test(e.nodeName)||e.getAttribute("contenteditable")==="true")){let i=!1,n=e;for(;n!==document.body;){if(n.classList.contains("filepond--root")){i=!0;break}n=n.parentNode}if(!i)return}Cm(t.clipboardData).then(i=>{i.length&&ga.forEach(n=>n(i))})},Wx=t=>{ga.includes(t)||(ga.push(t),!np&&(np=!0,document.addEventListener("paste",uE)))},Hx=t=>{_m(ga,ga.indexOf(t)),ga.length===0&&(document.removeEventListener("paste",uE),np=!1)},qx=()=>{const t=s=>{e.onload(s)},e={destroy:()=>{Hx(t)},onload:()=>{}};return Wx(t),e},Yx=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,ee(t.element,"role","status"),ee(t.element,"aria-live","polite"),ee(t.element,"aria-relevant","additions")};let Pf=null,Df=null;const qu=[],Du=(t,e)=>{t.element.textContent=e},Xx=t=>{t.element.textContent=""},pE=(t,e,s)=>{const i=t.query("GET_TOTAL_ITEMS");Du(t,`${s} ${e}, ${i} ${i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Df),Df=setTimeout(()=>{Xx(t)},1500)},mE=t=>t.element.parentNode.contains(document.activeElement),Zx=({root:t,action:e})=>{if(!mE(t))return;t.element.textContent="";const s=t.query("GET_ITEM",e.id);qu.push(s.filename),clearTimeout(Pf),Pf=setTimeout(()=>{pE(t,qu.join(", "),t.query("GET_LABEL_FILE_ADDED")),qu.length=0},750)},Qx=({root:t,action:e})=>{if(!mE(t))return;const s=e.item;pE(t,s.filename,t.query("GET_LABEL_FILE_REMOVED"))},Jx=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Du(t,`${i} ${n}`)},Ff=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Du(t,`${i} ${n}`)},Wc=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;Du(t,`${e.status.main} ${i} ${e.status.sub}`)},Kx=Ut({create:Yx,ignoreRect:!0,ignoreRectUpdate:!0,write:We({DID_LOAD_ITEM:Zx,DID_REMOVE_ITEM:Qx,DID_COMPLETE_ITEM_PROCESSING:Jx,DID_ABORT_ITEM_PROCESSING:Ff,DID_REVERT_ITEM_PROCESSING:Ff,DID_THROW_ITEM_REMOVE_ERROR:Wc,DID_THROW_ITEM_LOAD_ERROR:Wc,DID_THROW_ITEM_INVALID:Wc,DID_THROW_ITEM_PROCESSING_ERROR:Wc}),tag:"span",name:"assistant"}),fE=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),s=>s.charAt(1).toUpperCase()),gE=(t,e=16,s=!0)=>{let i=Date.now(),n=null;return(...o)=>{clearTimeout(n);const a=Date.now()-i,h=()=>{i=Date.now(),t(...o)};a<e?s||(n=setTimeout(h,e-a)):h()}},t0=1e6,Ah=t=>t.preventDefault(),e0=({root:t,props:e})=>{const s=t.query("GET_ID");s&&(t.element.id=s);const i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(c=>c.length).forEach(c=>{t.element.classList.add(c)}),t.ref.label=t.appendChildView(t.createChildView(nx,L(I({},e),{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(JT,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(eE,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Kx,I({},e))),t.ref.data=t.appendChildView(t.createChildView(vx,I({},e))),t.ref.measure=un("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(c=>!dn(c.value)).map(({name:c,value:d})=>{t.element.dataset[c]=d}),t.ref.widthPrevious=null,t.ref.widthUpdated=gE(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&o&&!n&&(t.element.addEventListener("touchmove",Ah,{passive:!1}),t.element.addEventListener("gesturestart",Ah));const a=t.query("GET_CREDITS");if(a.length===2){const c=document.createElement("a");c.className="filepond--credits",c.href=a[0],c.tabIndex=-1,c.target="_blank",c.rel="noopener noreferrer",c.textContent=a[1],t.element.appendChild(c),t.ref.credits=c}},s0=({root:t,props:e,actions:s})=>{if(o0({root:t,props:e,actions:s}),s.filter(y=>/^DID_SET_STYLE_/.test(y.type)).filter(y=>!dn(y.data.value)).map(({type:y,data:P})=>{const $=fE(y.substring(8).toLowerCase(),"_");t.element.dataset[$]=P.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let i=t.ref.bounds;i||(i=t.ref.bounds=r0(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:n,label:o,list:a,panel:h}=t.ref;n&&n.updateHopperState();const c=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),p=t.query("GET_TOTAL_ITEMS"),m=d?t.query("GET_MAX_FILES")||t0:1,E=p===m,f=s.find(y=>y.type==="DID_ADD_ITEM");if(E&&f){const y=f.data.interactionMethod;o.opacity=0,d?o.translateY=-40:y===Fs.API?o.translateX=40:y===Fs.BROWSE?o.translateY=40:o.translateY=30}else E||(o.opacity=1,o.translateX=0,o.translateY=0);const g=i0(t),_=n0(t),v=o.rect.element.height,R=!d||E?0:v,w=E?a.rect.element.marginTop:0,x=p===0?0:a.rect.element.marginBottom,C=R+w+_.visual+x,O=R+w+_.bounds+x;if(a.translateY=Math.max(0,R-a.rect.element.marginTop)-g.top,c){const y=t.rect.element.width,P=y*c;c!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=c,t.ref.updateHistory=[]);const $=t.ref.updateHistory;$.push(y);const D=2;if($.length>D*2){const B=$.length,G=B-10;let X=0;for(let N=B;N>=G;N--)if($[N]===$[N-2]&&X++,X>=D)return}h.scalable=!1,h.height=P;const V=P-R-(x-g.bottom)-(E?w:0);_.visual>V?a.overflow=V:a.overflow=null,t.height=P}else if(i.fixedHeight){h.scalable=!1;const y=i.fixedHeight-R-(x-g.bottom)-(E?w:0);_.visual>y?a.overflow=y:a.overflow=null}else if(i.cappedHeight){const y=C>=i.cappedHeight,P=Math.min(i.cappedHeight,C);h.scalable=!0,h.height=y?P:P-g.top-g.bottom;const $=P-R-(x-g.bottom)-(E?w:0);C>i.cappedHeight&&_.visual>$?a.overflow=$:a.overflow=null,t.height=Math.min(i.cappedHeight,O-g.top-g.bottom)}else{const y=p>0?g.top+g.bottom:0;h.scalable=!0,h.height=Math.max(v,C-y),t.height=Math.max(v,O-y)}t.ref.credits&&h.heightCurrent&&(t.ref.credits.style.transform=`translateY(${h.heightCurrent}px)`)},i0=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},n0=t=>{let e=0,s=0;const i=t.ref.list,n=i.childViews[0],o=n.childViews.filter(w=>w.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(w=>o.find(x=>x.id===w.id)).filter(w=>w);if(a.length===0)return{visual:e,bounds:s};const h=n.rect.element.width,c=Sm(n,a,i.dragCoordinates),d=a[0].rect.element,p=d.marginTop+d.marginBottom,m=d.marginLeft+d.marginRight,E=d.width+m,f=d.height+p,g=typeof c!="undefined"&&c>=0?1:0,_=a.find(w=>w.markedForRemoval&&w.opacity<.45)?-1:0,v=a.length+g+_,R=xm(h,E);return R===1?a.forEach(w=>{const x=w.rect.element.height+p;s+=x,e+=x*w.opacity}):(s=Math.ceil(v/R)*f,e=s),{visual:e,bounds:s}},r0=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},Am=(t,e)=>{const s=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),n=t.query("GET_TOTAL_ITEMS");let o=t.query("GET_MAX_FILES");const a=e.length;return!i&&a>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Dt("warning",0,"Max files")}),!0):(o=i?o:1,!i&&s?!1:To(o)&&n+a>o?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Dt("warning",0,"Max files")}),!0):!1)},a0=(t,e,s)=>{const i=t.childViews[0];return Sm(i,e,{left:s.scopeLeft-i.rect.element.left,top:s.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},jf=t=>{const e=t.query("GET_ALLOW_DROP"),s=t.query("GET_DISABLED"),i=e&&!s;if(i&&!t.ref.hopper){const n=zx(t.element,o=>{const a=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?o.every(c=>Hr("ALLOW_HOPPER_ITEM",c,{query:t.query}).every(d=>d===!0)&&a(c)):!0},{filterItems:o=>{const a=t.query("GET_IGNORED_FILES");return o.filter(h=>Br(h)?!a.includes(h.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});n.onload=(o,a)=>{const c=t.ref.list.childViews[0].childViews.filter(p=>p.rect.element.height),d=t.query("GET_ACTIVE_ITEMS").map(p=>c.find(m=>m.id===p.id)).filter(p=>p);si("ADD_ITEMS",o,{dispatch:t.dispatch}).then(p=>{if(Am(t,p))return!1;t.dispatch("ADD_ITEMS",{items:p,index:a0(t.ref.list,d,a),interactionMethod:Fs.DROP})}),t.dispatch("DID_DROP",{position:a}),t.dispatch("DID_END_DRAG",{position:a})},n.ondragstart=o=>{t.dispatch("DID_START_DRAG",{position:o})},n.ondrag=gE(o=>{t.dispatch("DID_DRAG",{position:o})}),n.ondragend=o=>{t.dispatch("DID_END_DRAG",{position:o})},t.ref.hopper=n,t.ref.drip=t.appendChildView(t.createChildView(ux))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},kf=(t,e)=>{const s=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),n=s&&!i;n&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(sx,L(I({},e),{onload:o=>{si("ADD_ITEMS",o,{dispatch:t.dispatch}).then(a=>{if(Am(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Fs.BROWSE})})}})),0):!n&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},Gf=t=>{const e=t.query("GET_ALLOW_PASTE"),s=t.query("GET_DISABLED"),i=e&&!s;i&&!t.ref.paster?(t.ref.paster=qx(),t.ref.paster.onload=n=>{si("ADD_ITEMS",n,{dispatch:t.dispatch}).then(o=>{if(Am(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Fs.PASTE})})}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},o0=We({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{kf(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{jf(t)},DID_SET_ALLOW_PASTE:({root:t})=>{Gf(t)},DID_SET_DISABLED:({root:t,props:e})=>{jf(t),Gf(t),kf(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),l0=Ut({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:e0,write:s0,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Ah),t.element.removeEventListener("gesturestart",Ah)},mixins:{styles:["height"]}}),c0=(t={})=>{let e=null;const s=Oh(),i=Rv(dw(s),[Lw,mw(s)],[tT,pw(s)]);i.dispatch("SET_OPTIONS",{options:t});const n=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",n);let o=null,a=!1,h=!1,c=null,d=null;const p=()=>{a||(a=!0),clearTimeout(o),o=setTimeout(()=>{a=!1,c=null,d=null,h&&(h=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",p);const m=l0(i,{id:Im()});let E=!1,f=!1;const g={_read:()=>{a&&(d=window.innerWidth,c||(c=d),!h&&d!==c&&(i.dispatch("DID_START_RESIZE"),h=!0)),f&&E&&(E=m.element.offsetParent===null),!E&&(m._read(),f=m.rect.element.hidden)},_write:j=>{const M=i.processActionQueue().filter(k=>!/^SET_/.test(k.type));E&&!M.length||(w(M),E=m._write(j,M,h),Ew(i.query("GET_ITEMS")),E&&i.processDispatchQueue())}},_=j=>M=>{const k={type:j};if(!M)return k;if(M.hasOwnProperty("error")&&(k.error=M.error?I({},M.error):null),M.status&&(k.status=I({},M.status)),M.file&&(k.output=M.file),M.source)k.file=M.source;else if(M.item||M.id){const U=M.item?M.item:i.query("GET_ITEM",M.id);k.file=U?es(U):null}return M.items&&(k.items=M.items.map(es)),/progress/.test(j)&&(k.progress=M.progress),M.hasOwnProperty("origin")&&M.hasOwnProperty("target")&&(k.origin=M.origin,k.target=M.target),k},v={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},R=j=>{const M=I({pond:W},j);delete M.type,m.element.dispatchEvent(new CustomEvent(`FilePond:${j.type}`,{detail:M,bubbles:!0,cancelable:!0,composed:!0}));const k=[];j.hasOwnProperty("error")&&k.push(j.error),j.hasOwnProperty("file")&&k.push(j.file);const U=["type","error","file"];Object.keys(j).filter(Y=>!U.includes(Y)).forEach(Y=>k.push(j[Y])),W.fire(j.type,...k);const H=i.query(`GET_ON${j.type.toUpperCase()}`);H&&H(...k)},w=j=>{j.length&&j.filter(M=>v[M.type]).forEach(M=>{const k=v[M.type];(Array.isArray(k)?k:[k]).forEach(U=>{M.type==="DID_INIT_ITEM"?R(U(M.data)):setTimeout(()=>{R(U(M.data))},0)})})},x=j=>i.dispatch("SET_OPTIONS",{options:j}),C=j=>i.query("GET_ACTIVE_ITEM",j),O=j=>new Promise((M,k)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:j,success:U=>{M(U)},failure:U=>{k(U)}})}),y=(j,M={})=>new Promise((k,U)=>{D([{source:j,options:M}],{index:M.index}).then(H=>k(H&&H[0])).catch(U)}),P=j=>j.file&&j.id,$=(j,M)=>(typeof j=="object"&&!P(j)&&!M&&(M=j,j=void 0),i.dispatch("REMOVE_ITEM",L(I({},M),{query:j})),i.query("GET_ACTIVE_ITEM",j)===null),D=(...j)=>new Promise((M,k)=>{const U=[],H={};if(Au(j[0]))U.push.apply(U,j[0]),Object.assign(H,j[1]||{});else{const Y=j[j.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(H,j.pop()),U.push(...j)}i.dispatch("ADD_ITEMS",{items:U,index:H.index,interactionMethod:Fs.API,success:M,failure:k})}),V=()=>i.query("GET_ACTIVE_ITEMS"),B=j=>new Promise((M,k)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:j,success:U=>{M(U)},failure:U=>{k(U)}})}),G=(...j)=>{const M=Array.isArray(j[0])?j[0]:j,k=M.length?M:V();return Promise.all(k.map(O))},X=(...j)=>{const M=Array.isArray(j[0])?j[0]:j;if(!M.length){const k=V().filter(U=>!(U.status===it.IDLE&&U.origin===te.LOCAL)&&U.status!==it.PROCESSING&&U.status!==it.PROCESSING_COMPLETE&&U.status!==it.PROCESSING_REVERT_ERROR);return Promise.all(k.map(B))}return Promise.all(M.map(B))},N=(...j)=>{const M=Array.isArray(j[0])?j[0]:j;let k;typeof M[M.length-1]=="object"?k=M.pop():Array.isArray(j[0])&&(k=j[1]);const U=V();return M.length?M.map(Y=>ur(Y)?U[Y]?U[Y].id:null:Y).filter(Y=>Y).map(Y=>$(Y,k)):Promise.all(U.map(Y=>$(Y,k)))},W=L(I(I(I({},Mu()),g),uw(i,s)),{setOptions:x,addFile:y,addFiles:D,getFile:C,processFile:B,prepareFile:O,removeFile:$,moveFile:(j,M)=>i.dispatch("MOVE_ITEM",{query:j,index:M}),getFiles:V,processFiles:X,removeFiles:N,prepareFiles:G,sort:j=>i.dispatch("SORT",{compare:j}),browse:()=>{var j=m.element.querySelector("input[type=file]");j&&j.click()},destroy:()=>{W.fire("destroy",m.element),i.dispatch("ABORT_ALL"),m._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",n),i.dispatch("DID_DESTROY")},insertBefore:j=>cf(m.element,j),insertAfter:j=>hf(m.element,j),appendTo:j=>j.appendChild(m.element),replaceElement:j=>{cf(m.element,j),j.parentNode.removeChild(j),e=j},restoreElement:()=>{e&&(hf(e,m.element),m.element.parentNode.removeChild(m.element),e=null)},isAttachedTo:j=>m.element===j||e===j,element:{get:()=>m.element},status:{get:()=>i.query("GET_STATUS")}});return i.dispatch("DID_INIT"),Zn(W)},EE=(t={})=>{const e={};return $t(Oh(),(i,n)=>{e[i]=n[0]}),c0(I(I({},e),t))},h0=t=>t.charAt(0).toLowerCase()+t.slice(1),d0=t=>fE(t.replace(/^data-/,"")),bE=(t,e)=>{$t(e,(s,i)=>{$t(t,(n,o)=>{const a=new RegExp(s);if(!a.test(n)||(delete t[n],i===!1))return;if(ze(i)){t[i]=o;return}const c=i.group;le(i)&&!t[c]&&(t[c]={}),t[c][h0(n.replace(a,""))]=o}),i.mapping&&bE(t[i.group],i.mapping)})},u0=(t,e={})=>{const s=[];$t(t.attributes,n=>{s.push(t.attributes[n])});const i=s.filter(n=>n.name).reduce((n,o)=>{const a=ee(t,o.name);return n[d0(o.name)]=a===o.name?!0:a,n},{});return bE(i,e),i},p0=(t,e={})=>{const s={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Hr("SET_ATTRIBUTE_TO_OPTION_MAP",s);const i=I({},e),n=u0(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,s);Object.keys(n).forEach(a=>{le(n[a])?(le(i[a])||(i[a]={}),Object.assign(i[a],n[a])):i[a]=n[a]}),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const o=EE(i);return t.files&&Array.from(t.files).forEach(a=>{o.addFile(a)}),o.replaceElement(t),o},m0=(...t)=>Sv(t[0])?p0(...t):EE(...t),f0=["fire","_read","_write"],Bf=t=>{const e={};return kg(t,e,f0),e},g0=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(s,i)=>e[i]),E0=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s);return{transfer:(n,o)=>{},post:(n,o,a)=>{const h=Im();i.onmessage=c=>{c.data.id===h&&o(c.data.message)},i.postMessage({id:h,message:n},a)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},b0=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),IE=(t,e)=>{const s=t.slice(0,t.size,t.type);return s.lastModifiedDate=t.lastModifiedDate,s.name=e,s},I0=t=>IE(t,t.name),Uf=[],_0=t=>{if(Uf.includes(t))return;Uf.push(t);const e=t({addFilter:Iw,utils:{Type:z,forin:$t,isString:ze,isFile:Br,toNaturalFileSize:Jg,replaceInString:g0,getExtensionFromFilename:Nu,getFilenameWithoutExtension:Xg,guesstimateMimeType:cE,getFileFromBlob:bo,getFilenameFromURL:Nc,createRoute:We,createWorker:E0,createView:Ut,createItemAPI:es,loadImage:b0,copyFile:I0,renameFile:IE,createBlob:Hg,applyFilterChain:si,text:Ft,getNumericAspectRatioFromString:Ug},views:{fileActionButton:Qg}});_w(e.options)},v0=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",w0=()=>"Promise"in window,T0=()=>"slice"in Blob.prototype,x0=()=>"URL"in window&&"createObjectURL"in window.URL,S0=()=>"visibilityState"in document,R0=()=>"performance"in window,C0=()=>"supports"in(window.CSS||{}),O0=()=>/MSIE|Trident/.test(window.navigator.userAgent),rp=(()=>{const t=Mg()&&!v0()&&S0()&&w0()&&T0()&&x0()&&R0()&&(C0()||O0());return()=>t})(),mn={apps:[]},L0="filepond",qr=()=>{};let _E={},vE={},wE={},ap={},Kc=qr,th=qr,op=qr,lp=qr,cp=qr,hp=qr,dp=qr;if(rp()){Qv(()=>{mn.apps.forEach(s=>s._read())},s=>{mn.apps.forEach(i=>i._write(s))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:rp,create:Kc,destroy:th,parse:op,find:lp,registerPlugin:cp,setOptions:dp}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>$t(Oh(),(s,i)=>{ap[s]=i[1]});_E=I({},Vg),wE=I({},te),vE=I({},it),ap={},e(),Kc=(...s)=>{const i=m0(...s);return i.on("destroy",th),mn.apps.push(i),Bf(i)},th=s=>{const i=mn.apps.findIndex(n=>n.isAttachedTo(s));return i>=0?(mn.apps.splice(i,1)[0].restoreElement(),!0):!1},op=s=>Array.from(s.querySelectorAll(`.${L0}`)).filter(o=>!mn.apps.find(a=>a.isAttachedTo(o))).map(o=>Kc(o)),lp=s=>{const i=mn.apps.find(n=>n.isAttachedTo(s));return i?Bf(i):null},cp=(...s)=>{s.forEach(_0),e()},hp=()=>{const s={};return $t(Oh(),(i,n)=>{s[i]=n[0]}),s},dp=s=>(le(s)&&(mn.apps.forEach(i=>{i.setOptions(s)}),vw(s)),hp())}var Vf=Object.freeze({__proto__:null,get FileOrigin(){return wE},get FileStatus(){return vE},get OptionTypes(){return ap},get Status(){return _E},get create(){return Kc},get destroy(){return th},get find(){return lp},get getOptions(){return hp},get parse(){return op},get registerPlugin(){return cp},get setOptions(){return dp},supported:rp});function xt({formID:t,fieldKey:e,fieldData:s,children:i,noLabel:n,noErrMsg:o,isBuilder:a}){var C,O,y,P,$,D,V,B,G,X;const{"*":h}=Su(),c=K(Jb),d=K(Es),{styleMode:p}=d,[m,E,f]=h.split("/"),g=p&&m==="theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(E)>=0,_=p&&m==="field-theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(E)>=0&&f===e,v=((C=s.valid)==null?void 0:C.hide)||!1,R=((y=(O=s.err)==null?void 0:O.req)==null?void 0:y.dflt)||"",w=F.useRef(null),x=N=>{const W=N.getBoundingClientRect();return W.top>=0&&W.left>=0&&W.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&W.right<=(window.innerWidth||document.documentElement.clientWidth)};if(R&&w.current){const N=w.current,W=document.body.getBoundingClientRect(),M=N.getBoundingClientRect().top-W.top;x(N)||window.scroll({top:M,behavior:"smooth"})}return u.jsxs("div",L(I({ref:w,"data-testid":`${e}-fld-wrp`,"data-dev-fld-wrp":e,className:`${e}-fld-wrp ${S(e,"fld-wrp")} ${p?"":"drag"} ${v?"fld-hide":""}`,style:{direction:c}},A(e,"fld-wrp")),{children:[!n&&u.jsxs("div",L(I({"data-testid":`${e}-lbl-wrp`,"data-dev-lbl-wrp":e,className:`${e}-lbl-wrp ${S(e,"lbl-wrp")}`},A(e,"lbl-wrp")),{children:[!((P=s==null?void 0:s.valid)!=null&&P.hideLbl)&&"lbl"in s&&u.jsxs("label",L(I({"data-testid":`${e}-lbl`,"data-dev-lbl":e,title:s.lbl,className:`${e}-lbl ${S(e,"lbl")}`,htmlFor:e},A(e,"lbl")),{children:[(($=s.valid)==null?void 0:$.req)&&((D=s.valid)==null?void 0:D.reqShow)&&((V=s.valid)==null?void 0:V.reqPos)==="before"&&u.jsx("span",L(I({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${S(e,"req-smbl")}`},A(e,"req-smbl")),{children:"*"})),s.lblPreIcn&&u.jsx("img",I({"data-testid":`${e}-lbl-pre-i`,"data-dev-lbl-pre-i":e,className:`${e}-lbl-pre-i ${S(e,"lbl-pre-i")}`,src:s.lblPreIcn,alt:""},A(e,"lbl-pre-i"))),u.jsx(Oe,{html:s.lbl.replace(/\$_bf_\$/g,"\\")}),s.lblSufIcn&&u.jsx("img",I({"data-testid":`${e}-lbl-suf-i`,"data-dev-lbl-suf-i":e,className:`${e}-lbl-suf-i ${S(e,"lbl-suf-i")}`,src:s.lblSufIcn,alt:""},A(e,"lbl-suf-i"))),((B=s.valid)==null?void 0:B.req)&&((G=s.valid)==null?void 0:G.reqShow)&&((X=s.valid)==null?void 0:X.reqPos)!=="before"&&u.jsx("span",L(I({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${S(e,"req-smbl")}`},A(e,"req-smbl")),{children:"*"}))]})),(s.subtitle||s.subTlePreIcn||s.subTleSufIcn)&&u.jsxs("div",L(I({"data-testid":`${e}-sub-titl`,"data-dev-sub-titl":e,className:`${e}-sub-titl ${S(e,"sub-titl")}`},A(e,"sub-titl")),{children:[s.subTlePreIcn&&u.jsx("img",I({"data-testid":`${e}-sub-titl-pre-i`,"data-dev-sub-titl-pre-i":e,className:`${e}-sub-titl-pre-i ${S(e,"sub-titl-pre-i")}`,src:s.subTlePreIcn,alt:""},A(e,"sub-titl-pre-i"))),u.jsx(Oe,{html:s.subtitle||""}),s.subTleSufIcn&&u.jsx("img",I({"data-testid":`${e}-sub-titl-suf-i`,"data-dev-sub-titl-suf-i":e,className:`${e}-sub-titl-suf-i ${S(e,"sub-titl-suf-i")}`,src:s.subTleSufIcn,alt:""},A(e,"sub-titl-suf-i")))]}))]})),u.jsxs("div",L(I({"data-testid":`${e}-inp-wrp`,className:`${e}-inp-wrp ${S(e,"inp-wrp")}`},A(e,"inp-wrp")),{children:[i,(s.helperTxt||s.hlpPreIcn||s.hlpSufIcn)&&u.jsxs("div",L(I({"data-testid":`${e}-hlp-txt`,"data-dev-hlp-txt":e,className:`${e}-hlp-txt ${S(e,"hlp-txt")}`},A(e,"hlp-txt")),{children:[s.hlpPreIcn&&u.jsx("img",I({"data-testid":`${e}-hlp-txt-pre-i`,"data-dev-hlp-txt-pre-i":e,className:`${e}-hlp-txt-pre-i ${S(e,"hlp-txt-pre-i")}`,src:s.hlpPreIcn,alt:""},A(e,"hlp-txt-pre-i"))),u.jsx(Oe,{html:s.helperTxt||""}),s.hlpSufIcn&&u.jsx("img",I({"data-testid":`${e}-hlp-txt-suf-i`,"data-dev-hlp-txt-suf-i":e,className:`${e}-hlp-txt-suf-i ${S(e,"hlp-txt-suf-i")}`,src:s.hlpSufIcn,alt:""},A(e,"hlp-txt-suf-i")))]})),!o&&(g||_)&&u.jsxs("div",L(I({"data-testid":`${e}-err-msg`,"data-dev-err-msg":e,className:`${e}-err-msg ${S(e,"err-msg")}`},A(e,"err-msg")),{children:[s.errPreIcn&&u.jsx("img",I({"data-testid":`${e}-err-txt-pre-i`,"data-dev-err-txt-pre-i":e,className:`${e}-err-txt-pre-i ${S(e,"err-txt-pre-i")}`,src:s.errPreIcn,alt:""},A(e,"err-txt-pre-i"))),u.jsx("div",L(I({"data-testid":`${e}-err-txt`,"data-dev-err-txt":e,className:`${e}-err-txt ${S(e,"err-txt")}`},A(e,"err-txt")),{children:u.jsx(Oe,{html:`${R||"This is an example of an error message. this message will vary by a condition or validation check."} `})})),s.errSufIcn&&u.jsx("img",I({"data-testid":`${e}-err-txt-suf-i`,"data-dev-err-txt-suf-i":e,className:`${e}-err-txt-suf-i ${S(e,"err-txt-suf-i")}`,src:s.errSufIcn,alt:""},A(e,"err-txt-suf-i")))]}))]}))]}))}function A0({attr:t,formID:e,fieldKey:s,styleClasses:i}){const[n]=cn(Bt),o=n[s],{config:a}=o,[h,c]=F.useState(0),d=F.useRef(null),p=F.useRef(null),m=K(Es),{styleMode:E}=m;F.useEffect(()=>{const g=document.getElementById("bit-grid-layout").contentWindow;g.bit_filepond||(g.bit_filepond=Vf),g.bit_filepond_plugin_image_preview||(g.bit_filepond_plugin_image_preview=Tg),g.bit_filepond_plugin_file_validate_size||(g.bit_filepond_plugin_file_validate_size=Eg),g.bit_filepond_plugin_file_validate_type||(g.bit_filepond_plugin_file_validate_type=bg),g.bit_filepond_plugin_image_crop||(g.bit_filepond_plugin_image_crop=Ig),g.bit_filepond_plugin_image_resize||(g.bit_filepond_plugin_image_resize=xg),g.bit_filepond_plugin_image_transform||(g.bit_filepond_plugin_image_transform=Ag),g.bit_filepond_plugin_image_validate_size||(g.bit_filepond_plugin_image_validate_size=$g),g.bit_filepond_plugin_media_preview||(g.bit_filepond_plugin_media_preview=yg);const _={configSetting:a,fieldKey:s,window:g,document:document.getElementById("bit-grid-layout").contentDocument,formID:e,ajaxURL:typeof bits=="undefined"?bitFromsFront==null?void 0:bitFromsFront.ajaxURL:bits.ajaxURL,nonce:typeof bits=="undefined"?"":bits.nonce,uploadFileToServer:!0,onFileUpdate:()=>c(w=>w+1)};p!=null&&p.current||(p.current=At(`#filepond-${s}-container`));const v=d.current,R=p.current;v&&(Vf.destroy(p.current),R.firstChild&&R.removeChild(R.firstChild)),d.current=new dI(R,_),c(w=>w+1)},[o==null?void 0:o.config]);const f=(g,_=!1)=>{var v;if((v=At(`.${s}-inp-wrp .${g}`))==null||v.setAttribute(`data-dev-${g}`,s),_){const R=Kb(`.${s}-inp-wrp .${g}`);R.length>0&&[...R].map(w=>{w.setAttribute(`data-dev-${g}`,s)})}};return F.useEffect(()=>{f("filepond--root"),f("filepond--drop-label"),f("filepond--label-action"),f("filepond--panel-root"),f("filepond--item-panel",!0),f("filepond--file-action-button",!0),f("filepond--drip-blob"),f("filepond--file")},[h]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:i}),u.jsxs(xt,{formID:e,fieldKey:s,fieldData:t,children:[u.jsx("input",I(I(L(I({hidden:!0},E&&{id:s}),{type:"file",className:"filepond",name:"filepond"}),"disabled"in o.valid&&{disabled:o.valid.disabled}),"readonly"in o.valid&&{readOnly:o.valid.readonly})),u.jsx("div",{ref:p,id:`filepond-${s}-container`,className:`filepond-${s}-container ${o.valid.disabled?"disabled":""} ${o.valid.readonly?"readonly":""}`})]})]})}var $0=F.memo(A0);function y0({fieldKey:t,attr:e,styleClasses:s,buttonDisabled:i,handleReset:n,formID:o,data:a}){const h=Vr(s);return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:h}),u.jsx(xt,{formID:o,fieldKey:t,fieldData:e,noLabel:!0,noErrMsg:!0,children:u.jsx("div",L(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{children:u.jsxs("button",L(I(I(L(I({"data-testid":t,"data-dev-btn":t,className:`${t}-btn ${S(t,"btn")}`},A(t,"btn")),{type:e.btnTyp}),e.btnTyp==="reset"&&{onClick:n}),"disabled"in e.valid&&{disabled:e.valid.disabled}),{name:e.fieldName,children:[e.btnPreIcn&&u.jsx("img",I({"data-testid":`${t}-btn-pre-i`,"data-dev-btn-pre-i":t,className:`${t}-btn-pre-i ${S(t,"btn-pre-i")}`,src:e.btnPreIcn,alt:""},A(t,"btn-pre-i"))),u.jsx(Oe,{html:e.txt||""}),e.btnSufIcn&&u.jsx("img",I({"data-testid":`${t}-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-btn-suf-i ${S(t,"btn-suf-i")}`,src:e.btnSufIcn,alt:""},A(t,"btn-suf-i")))]}))}))})]})}function M0({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:o}){const a=K(Bt),[h,c]=F.useState({checked:[]}),d=Vr(a[n]),[p,m]=F.useState(""),E=(f,g)=>{const{checked:_}=f.target;if(_)h.checked.push(g);else{const v=h.checked.indexOf(g);h.checked.splice(v,1),c({checked:h.checked})}Tt(n)};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:n,fieldData:t,children:u.jsxs("div",L(I({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},A(n,"cc")),{children:[u.jsx("svg",{className:`${n}-cks`,children:u.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:u.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),t.opt.map((f,g)=>u.jsxs("div",L(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},A(n,"cw")),{children:[u.jsx("input",I(L(I(L(I({"data-testid":`${n}-ci`,id:`${n}-chk-${g}`,type:"checkbox",className:`${n}-ci ${S(n,"ci")}`},(t.valid.disabled||f.disabled)&&{disabled:!0}),{defaultValue:f.val||f.lbl}),t.valid.req&&{required:!0}),{name:`${d.lbl}[]`,checked:h.checked.includes(g)||(f==null?void 0:f.check),onChange:_=>E(_,g)}),A(n,"ci"))),u.jsxs("label",L(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${g}`,className:`${n}-cl ${S(n,"cl")}`},A(n,"cl")),{children:[u.jsx("span",L(I({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},A(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),u.jsx("span",L(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},A(n,"ct")),{children:u.jsx(Oe,{html:f.lbl})}))]}))]}),`opt-${g+24}`)),t.addOtherOpt&&u.jsxs("div",L(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},A(n,"cw")),{children:[u.jsx("input",I(L(I({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"checkbox",className:`${n}-ci ${S(n,"ci")}`,disabled:t.valid.disabled,value:p},t.valid.req&&{required:!0}),{name:`${d.lbl}[]`,checked:h.checked.includes(t.opt.length),onChange:f=>E(f,t.opt.length)}),A(n,"ci"))),u.jsxs("label",L(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${S(n,"cl")}`},A(n,"cl")),{children:[u.jsx("span",L(I({"data-testid":`${n}-bx`,"data-dev-ck":n,"data-bx":!0,className:`${n}-bx ${n}-ck ${S(n,"ck")}`},A(n,"ck")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),u.jsx("span",L(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},A(n,"ct")),{children:"Other.."}))]})),u.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:u.jsx("input",L(I(I(I({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${S(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:p,onChange:f=>m(f.target.value)}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var qt,ie,yt,wn,_a,zs,kh,Gh,ue,ui,rl,pi,Gi,xs,gr,Ws,Tn,al,ol,ll,va,Er,Bh,cl,wa,Ta,mi,fi,pe,Ss,Rs,xa,hl,dl,Sa,Ra,Ca,Oa,Uh,TE,Vh,xE,ul,up,zh,SE,Wh,RE,me,ye,Cs,ai,Hh,CE,qh,OE,Yh,LE,br,$o,La,eh,pl,pp,ml,mp,Aa,sh,fl,fp,gl,gp,Ir,yo,Hs,Mi,_r,Mo,ht,mt,Je,ws,El,Ep,vr,No,wr,Po,lm,P0,bl,bp,Xh,AE,Zh,$E,Il,Ip,xn,Zr,Qh,yE,_l,_p,Jh,ME;class N0{constructor(e,s){b(this,Uh);b(this,Vh);b(this,ul);b(this,zh);b(this,Wh);b(this,me);b(this,Cs);b(this,Hh);b(this,qh);b(this,Yh);b(this,br);b(this,La);b(this,pl);b(this,ml);b(this,Aa);b(this,fl);b(this,gl);b(this,Ir);b(this,Hs);b(this,_r);b(this,ht);b(this,Je);b(this,El);b(this,vr);b(this,wr);b(this,lm);b(this,bl);b(this,Xh);b(this,Zh);b(this,Il);b(this,xn);b(this,Qh);b(this,_l);b(this,Jh);b(this,qt,void 0);b(this,ie,void 0);b(this,yt,void 0);b(this,wn,void 0);b(this,_a,void 0);b(this,zs,void 0);b(this,kh,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,Gh,void 0);b(this,ue,void 0);b(this,ui,void 0);b(this,rl,void 0);b(this,pi,void 0);b(this,Gi,"");b(this,xs,[]);b(this,gr,!0);b(this,Ws,!0);b(this,Tn,!0);b(this,al,!0);b(this,ol,!1);b(this,ll,!1);b(this,va,"");b(this,Er,"Select a Country");b(this,Bh,"Search Country");b(this,cl,"No Currency Found");b(this,wa,370);b(this,Ta,30);b(this,mi,void 0);b(this,fi,{});b(this,pe,[]);b(this,Ss,{});b(this,Rs,{});b(this,xa,"");b(this,hl,"");b(this,dl,null);b(this,Sa,"");b(this,Ra,[]);b(this,Ca,void 0);b(this,Oa,!1);l(this,Uh,TE).call(this,s),typeof e=="string"?T(this,qt,r(this,mi).querySelector(e)):T(this,qt,e),this.fieldKey=r(this,hl),this.init()}init(){var e;T(this,ie,l(this,me,ye).call(this,`.${this.fieldKey}-country-hidden-input`)),T(this,yt,l(this,me,ye).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,wn,l(this,me,ye).call(this,`.${this.fieldKey}-selected-country-img`)),T(this,_a,l(this,me,ye).call(this,`.${this.fieldKey}-selected-country-lbl`)),T(this,zs,r(this,Ws)?l(this,me,ye).call(this,`.${this.fieldKey}-inp-clr-btn`):{}),T(this,Gh,l(this,me,ye).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,ue,l(this,me,ye).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,ui,l(this,me,ye).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,rl,l(this,me,ye).call(this,`.${this.fieldKey}-option-wrp`)),T(this,pi,l(this,me,ye).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),r(this,ol)&&l(this,Hh,CE).call(this),r(this,ll)&&l(this,qh,OE).call(this),r(this,va)&&l(this,zh,SE).call(this),l(this,Wh,RE).call(this),l(this,ul,up).call(this),r(this,fi).observeElm(r(this,ie),"value",(s,i)=>{l(this,pl,pp).call(this,s,i)}),r(this,gr)||(e=r(this,wn))==null||e.remove(),r(this,Tn)&&(l(this,Je,ws).call(this,r(this,ue),"padding-right","35px"),l(this,Je,ws).call(this,r(this,ui),"display","none"))}setSelectedCountryItem(e){if(T(this,Gi,e),!r(this,Gi))return;const s=l(this,gl,gp).call(this);s&&(r(this,gr)&&r(this,wn)&&(r(this,wn).src=`${r(this,xa)}${s.img}`),l(this,_r,Mo).call(this,r(this,_a),s.lbl),this.setMenu({open:!1}),this.value=s.val||s.lbl,r(this,Ws)&&(l(this,Je,ws).call(this,r(this,zs),"display","grid"),l(this,Cs,ai).call(this,r(this,zs),"click",i=>{l(this,ml,mp).call(this,i)})),r(this,Ca)&&r(this,Ca).call(this,s.val||s.lbl),l(this,ht,mt).call(this,r(this,yt),"aria-label",`${s.lbl} selected`),l(this,Aa,sh).call(this,r(this,ie),"blur"),setTimeout(()=>{l(this,ht,mt).call(this,r(this,yt),"aria-label",s.lbl)},100))}searchOptions(e){l(this,Zh,$E).call(this,e);let s=[];e?(s=r(this,pe).filter(i=>i.lbl.toLowerCase().includes(e.toLowerCase())),s.length||(s=[{i:0,lbl:r(this,cl)}]),T(this,xs,s),r(this,Tn)&&l(this,Je,ws).call(this,r(this,ui),"display","grid")):(T(this,xs,r(this,pe)),r(this,Tn)&&l(this,Je,ws).call(this,r(this,ui),"display","none")),l(this,El,Ep).call(this)}setMenu({open:e}){l(this,Je,ws).call(this,r(this,rl),"max-height",`${e?r(this,wa):0}px`),e?(l(this,Qh,yE).call(this),r(this,qt).classList.add("menu-open"),l(this,Cs,ai).call(this,r(this,mi),"click",s=>l(this,Il,Ip).call(this,s)),r(this,ue).tabIndex="0",r(this,ui).tabIndex="0",r(this,yt).setAttribute("aria-expanded","true"),l(this,ht,mt).call(this,r(this,pi),"aria-hidden",!1),l(this,ht,mt).call(this,r(this,ue),"aria-hidden",!1),l(this,El,Ep).call(this)):(r(this,qt).classList.remove("menu-open"),r(this,mi).removeEventListener("click",l(this,Il,Ip)),setTimeout(()=>{this.searchOptions("")},100),r(this,ue).blur(),r(this,ue).tabIndex="-1",r(this,ui).tabIndex="-1",r(this,yt).setAttribute("aria-expanded","false"),l(this,ht,mt).call(this,r(this,pi),"aria-hidden",!0),l(this,ht,mt).call(this,r(this,ue),"aria-hidden",!0))}set disabled(e){String(e).toLowerCase()==="true"?(r(this,qt).classList.add("disabled"),r(this,ie).disabled=!0,r(this,Ws)&&l(this,ht,mt).call(this,r(this,zs),"tabindex","-1"),l(this,ht,mt).call(this,r(this,yt),"aria-label","Country Field disabled"),l(this,ht,mt).call(this,r(this,yt),"tabindex","-1"),this.setMenu({open:!1}),r(this,Ra).forEach(({selector:s,eventType:i,cb:n})=>{s.removeEventListener(i,n)})):String(e).toLowerCase()==="false"&&(r(this,qt).classList.remove("disabled"),r(this,ie).removeAttribute("disabled"),l(this,ht,mt).call(this,r(this,yt),"tabindex","0"),r(this,Ws)&&l(this,ht,mt).call(this,r(this,zs),"tabindex","0"),l(this,ht,mt).call(this,r(this,yt),"aria-label",r(this,Er)),l(this,ul,up).call(this))}get disabled(){return r(this,ie).disabled}set readonly(e){String(e).toLowerCase()==="true"?(r(this,qt).classList.add("disabled"),r(this,ie).readOnly=!0,l(this,ht,mt).call(this,r(this,yt),"tabindex","-1"),r(this,Ws)&&l(this,ht,mt).call(this,r(this,zs),"tabindex","-1"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(r(this,qt).classList.remove("disabled"),r(this,ie).removeAttribute("readonly"),r(this,Ws)&&l(this,ht,mt).call(this,r(this,yt),"tabindex","0"),l(this,ht,mt).call(this,r(this,zs),"tabindex","0"))}get readonly(){return r(this,ie).readOnly}set value(e){r(this,ie).value=e,l(this,ht,mt).call(this,r(this,ie),"value",e)}get value(){const e=l(this,gl,gp).call(this);return e.val||e.lbl}destroy(){r(this,pi).innerHTML="",this.value="",l(this,Jh,ME).call(this)}reset(e){T(this,Oa,!0),l(this,ml,mp).call(this),this.destroy(),this.init(),this.setSelectedCountryItem(e),T(this,Oa,!1)}}qt=new WeakMap,ie=new WeakMap,yt=new WeakMap,wn=new WeakMap,_a=new WeakMap,zs=new WeakMap,kh=new WeakMap,Gh=new WeakMap,ue=new WeakMap,ui=new WeakMap,rl=new WeakMap,pi=new WeakMap,Gi=new WeakMap,xs=new WeakMap,gr=new WeakMap,Ws=new WeakMap,Tn=new WeakMap,al=new WeakMap,ol=new WeakMap,ll=new WeakMap,va=new WeakMap,Er=new WeakMap,Bh=new WeakMap,cl=new WeakMap,wa=new WeakMap,Ta=new WeakMap,mi=new WeakMap,fi=new WeakMap,pe=new WeakMap,Ss=new WeakMap,Rs=new WeakMap,xa=new WeakMap,hl=new WeakMap,dl=new WeakMap,Sa=new WeakMap,Ra=new WeakMap,Ca=new WeakMap,Oa=new WeakMap,Uh=new WeakSet,TE=function(e){T(this,mi,e.document||document),T(this,fi,e.window||window),T(this,hl,e.fieldKey),T(this,va,e.defaultValue),T(this,Er,e.placeholder),T(this,Bh,e.searchPlaceholder||"Search Country"),T(this,cl,e.noCountryFoundText||"No Country Found"),T(this,Ta,e.rowHeight||30),T(this,wa,e.maxHeight||370),T(this,gr,e.selectedFlagImage),T(this,Ws,e.selectedCountryClearable),T(this,Tn,e.searchClearable),T(this,al,e.optionFlagImage),T(this,ol,e.detectCountryByIp),T(this,ll,e.detectCountryByGeo),T(this,xa,e.assetsURL),T(this,Ca,e.onChange),T(this,Ss,e.attributes||{}),T(this,Rs,e.classNames||{}),typeof e.options=="string"&&(e.options=l(this,Vh,xE).call(this,e.options)),T(this,pe,e.options.filter(s=>!s.hide)),T(this,xs,r(this,pe))},Vh=new WeakSet,xE=function(e){const s=e.split("->");let i=r(this,fi);return s.forEach(n=>{i=i[n]}),i},ul=new WeakSet,up=function(){l(this,Cs,ai).call(this,r(this,yt),"click",e=>{l(this,_l,_p).call(this,e)}),l(this,Cs,ai).call(this,r(this,yt),"keyup",e=>{l(this,_l,_p).call(this,e)}),l(this,Cs,ai).call(this,r(this,qt),"keydown",e=>{l(this,Yh,LE).call(this,e)}),r(this,Tn)&&l(this,Cs,ai).call(this,r(this,ui),"click",()=>{this.searchOptions("")}),l(this,Cs,ai).call(this,r(this,ue),"keyup",e=>{l(this,Xh,AE).call(this,e)})},zh=new WeakSet,SE=function(){const e=r(this,pe).find(s=>{const i=r(this,va);return s.i===i?!0:s.val?s.val===i:s.lbl===i});e&&this.setSelectedCountryItem(e.i)},Wh=new WeakSet,RE=function(){const e=r(this,ie).name,i=decodeURIComponent(`${r(this,mi).URL}`.replace(/\+/g,"%20")).replace(new RegExp(`.*${e}=([^&]*).*|(.*)`),"$1");i&&l(this,pl,pp).call(this,"",i)},me=new WeakSet,ye=function(e){return r(this,qt).querySelector(e)},Cs=new WeakSet,ai=function(e,s,i){e.addEventListener(s,i),r(this,Ra).push({selector:e,eventType:s,cb:i})},Hh=new WeakSet,CE=function(){const{protocol:e}=r(this,fi).location;fetch(`${e}//www.cloudflare.com/cdn-cgi/trace`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,o)=>{const[a,h]=o.split("=");return n[a]=h,n},{});this.setSelectedCountryItem(i==null?void 0:i.loc)})},qh=new WeakSet,OE=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,fi).location,o=n==="https:"?`${n}//secure`:`${n}//api`;fetch(`${o}.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${s}&lng=${i}`).then(a=>a.json()).then(a=>{this.setSelectedCountryItem(a.countryCode)})})},Yh=new WeakSet,LE=function(e){var o,a;e.stopPropagation();const s=r(this,mi).activeElement;let i=null;if(l(this,xn,Zr).call(this)){const h=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,ue))i=l(this,me,ye).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,La,eh).call(this,h,"next"),d=l(this,br,$o).call(this,c);d?i=d:c+1<r(this,xs).length&&((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const p=l(this,br,$o).call(this,c);p&&p.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,ue))i=r(this,yt),l(this,xn,Zr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,La,eh).call(this,h,"previous"),d=l(this,br,$o).call(this,c);d?i=d:c>0?((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const p=l(this,br,$o).call(this,c);p&&p.focus()},50)):d||(i=r(this,ue))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,dl)),T(this,Sa,r(this,Sa)+e.key),T(this,dl,setTimeout(()=>{T(this,Sa,"")},300));const h=r(this,pe).find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,Sa)));h&&this.setSelectedCountryItem(h.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const h=l(this,fl,fp).call(this),c=e.key==="ArrowDown"?"next":"previous",d=l(this,La,eh).call(this,h,c);d>-1&&d<r(this,pe).length&&(this.value=r(this,pe)[d].val||r(this,pe)[d].lbl,l(this,Aa,sh).call(this,r(this,ie),"blur"))}i&&i.focus()},br=new WeakSet,$o=function(e){return l(this,me,ye).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},La=new WeakSet,eh=function(e=-1,s){if(s==="next"){const i=r(this,pe).length;for(let n=e+1;n<i;n+=1)if(!r(this,pe)[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,pe)[i].disabled)return i}},pl=new WeakSet,pp=function(e,s){const i=r(this,pe).find(n=>n.i===s||n.val===s||n.lbl===s);i&&e!==s&&this.setSelectedCountryItem(i.i),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,ie)})},ml=new WeakSet,mp=function(e){e==null||e.stopPropagation(),T(this,Gi,""),r(this,gr)&&(r(this,wn).src=r(this,kh)),l(this,_r,Mo).call(this,r(this,_a),r(this,Er)),r(this,Ws)&&l(this,Je,ws).call(this,r(this,zs),"display","none"),l(this,ht,mt).call(this,r(this,yt),"aria-label","Selected country cleared"),r(this,Oa)||r(this,yt).focus(),this.setMenu({open:!1}),this.value="",l(this,Aa,sh).call(this,r(this,ie),"blur"),setTimeout(()=>{l(this,ht,mt).call(this,r(this,yt),"aria-label",r(this,Er))},100)},Aa=new WeakSet,sh=function(e,s){const i=new Event(s);e.dispatchEvent(i)},fl=new WeakSet,fp=function(){return r(this,xs).findIndex(e=>e.i===r(this,Gi))},gl=new WeakSet,gp=function(){return r(this,pe).find(e=>e.i===r(this,Gi))},Ir=new WeakSet,yo=function(e){return r(this,mi).createElement(e)},Hs=new WeakSet,Mi=function(e,s){e.classList.add(s)},_r=new WeakSet,Mo=function(e,s){e.textContent=s},ht=new WeakSet,mt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Je=new WeakSet,ws=function(e,s,i){e.style.setProperty(s,i,"important")},El=new WeakSet,Ep=function(){if(!l(this,xn,Zr).call(this))return;l(this,bl,bp).call(this);const e=l(this,fl,fp).call(this),s=l(this,me,ye).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},vr=new WeakSet,No=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,Hs,Mi).call(this,e,i))},wr=new WeakSet,Po=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,ht,mt).call(this,e,s[n].key,s[n].value)},lm=new WeakSet,P0=function(){const e=l(this,me,ye).call(this,".option");if(!e)return;const s=r(this,fi).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Ta)&&(T(this,Ta,n),r(this,pi).innerHTML="",l(this,bl,bp).call(this))},bl=new WeakSet,bp=function(){r(this,pi).innerHTML="";const e=r(this,xs).map((s,i)=>{const n=l(this,Ir,yo).call(this,"li");if(l(this,ht,mt).call(this,n,"data-key",s.i),l(this,ht,mt).call(this,n,"data-index",i),"option"in r(this,Ss)){const h=r(this,Ss).option;l(this,wr,Po).call(this,n,h)}if(l(this,ht,mt).call(this,n,"data-dev-option",this.fieldKey),!s.i)return l(this,_r,Mo).call(this,n,s.lbl),l(this,Hs,Mi).call(this,n,"opt-not-found"),n;if(l(this,Hs,Mi).call(this,n,"option"),"option"in r(this,Rs)){const h=r(this,Rs).option;h&&l(this,vr,No).call(this,n,h)}const o=l(this,Ir,yo).call(this,"span");if(l(this,Hs,Mi).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Rs)){const h=r(this,Rs)["opt-lbl-wrp"];h&&l(this,vr,No).call(this,o,h)}if("opt-lbl-wrp"in r(this,Ss)){const h=r(this,Ss)["opt-lbl-wrp"];l(this,wr,Po).call(this,o,h)}if(r(this,al)){const h=l(this,Ir,yo).call(this,"img");if("opt-icn"in r(this,Ss)){const c=r(this,Ss)["opt-icn"];c&&l(this,wr,Po).call(this,h,c)}if(l(this,Hs,Mi).call(this,h,"opt-icn"),"opt-icn"in r(this,Rs)){const c=r(this,Rs)["opt-icn"];c&&l(this,vr,No).call(this,h,c)}h.src=`${r(this,xa)}${s.img}`,h.alt=`${s.lbl} flag image`,h.loading="lazy",l(this,ht,mt).call(this,h,"aria-hidden",!0),o.append(h)}const a=l(this,Ir,yo).call(this,"span");if("opt-lbl"in r(this,Ss)){const h=r(this,Ss)["opt-lbl"];l(this,wr,Po).call(this,a,h)}if(l(this,Hs,Mi).call(this,a,"opt-lbl"),"opt-lbl"in r(this,Rs)){const h=r(this,Rs)["opt-lbl"];h&&l(this,vr,No).call(this,a,h)}return l(this,_r,Mo).call(this,a,s.lbl),o.append(a),n.tabIndex=l(this,xn,Zr).call(this)?"0":"-1",l(this,ht,mt).call(this,n,"role","option"),l(this,ht,mt).call(this,n,"aria-posinset",i+1),l(this,ht,mt).call(this,n,"aria-setsize",r(this,xs).length),l(this,Cs,ai).call(this,n,"click",h=>{this.setSelectedCountryItem(h.currentTarget.dataset.key)}),l(this,Cs,ai).call(this,n,"keyup",h=>{h.key==="Enter"&&this.setSelectedCountryItem(h.currentTarget.dataset.key)}),s.disabled&&l(this,Hs,Mi).call(this,n,"disabled-opt"),n.append(o),r(this,Gi)===s.i?(l(this,Hs,Mi).call(this,n,"selected-opt"),l(this,ht,mt).call(this,n,"aria-selected",!0)):l(this,ht,mt).call(this,n,"aria-selected",!1),n});r(this,pi).append(...e)},Xh=new WeakSet,AE=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,xs).length){const i=(s=r(this,xs))==null?void 0:s[0].i;i&&(this.setSelectedCountryItem(i),this.searchOptions(""))}else this.searchOptions(e.target.value)},Zh=new WeakSet,$E=function(e){r(this,ue).value=e},Il=new WeakSet,Ip=function(e){r(this,qt).contains(e.target)||this.setMenu({open:!1})},xn=new WeakSet,Zr=function(){return r(this,qt).classList.contains("menu-open")},Qh=new WeakSet,yE=function(){const e=r(this,fi),s=r(this,yt).getBoundingClientRect(),i=s.top,n=e.innerHeight-s.bottom;n<i&&n<r(this,wa)?(l(this,Je,ws).call(this,r(this,qt),"flex-direction","column-reverse"),l(this,Je,ws).call(this,r(this,qt),"bottom","0%")):(l(this,Je,ws).call(this,r(this,qt),"flex-direction","column"),l(this,Je,ws).call(this,r(this,qt),"bottom","auto"))},_l=new WeakSet,_p=function(e){e.code==="Space"&&(r(this,ue).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,xn,Zr).call(this)?this.setMenu({open:!1}):(r(this,ue).focus(),this.setMenu({open:!0})))},Jh=new WeakSet,ME=function(){r(this,Ra).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function Fu(t,e,s,i=0){const n=new MutationObserver(a=>{a.forEach(h=>{if(h.attributeName===e){const{oldValue:c}=h,d=h.target[e];typeof s=="function"&&setTimeout(s.call(this,c,d),i)}})}),o={attributes:!0,attributeOldValue:!0,attributeFilter:[e]};return n.observe(t,o),n}var zf=11;function D0(t,e){var s=e.attributes,i,n,o,a,h;if(!(e.nodeType===zf||t.nodeType===zf)){for(var c=s.length-1;c>=0;c--)i=s[c],n=i.name,o=i.namespaceURI,a=i.value,o?(n=i.localName||n,h=t.getAttributeNS(o,n),h!==a&&(i.prefix==="xmlns"&&(n=i.name),t.setAttributeNS(o,n,a))):(h=t.getAttribute(n),h!==a&&t.setAttribute(n,a));for(var d=t.attributes,p=d.length-1;p>=0;p--)i=d[p],n=i.name,o=i.namespaceURI,o?(n=i.localName||n,e.hasAttributeNS(o,n)||t.removeAttributeNS(o,n)):e.hasAttribute(n)||t.removeAttribute(n)}}var Hc,F0="http://www.w3.org/1999/xhtml",is=typeof document=="undefined"?void 0:document,j0=!!is&&"content"in is.createElement("template"),k0=!!is&&is.createRange&&"createContextualFragment"in is.createRange();function G0(t){var e=is.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function B0(t){Hc||(Hc=is.createRange(),Hc.selectNode(is.body));var e=Hc.createContextualFragment(t);return e.childNodes[0]}function U0(t){var e=is.createElement("body");return e.innerHTML=t,e.childNodes[0]}function V0(t){return t=t.trim(),j0?G0(t):k0?B0(t):U0(t)}function qc(t,e){var s=t.nodeName,i=e.nodeName,n,o;return s===i?!0:(n=s.charCodeAt(0),o=i.charCodeAt(0),n<=90&&o>=97?s===i.toUpperCase():o<=90&&n>=97?i===s.toUpperCase():!1)}function z0(t,e){return!e||e===F0?is.createElement(t):is.createElementNS(e,t)}function W0(t,e){for(var s=t.firstChild;s;){var i=s.nextSibling;e.appendChild(s),s=i}return e}function Yu(t,e,s){t[s]!==e[s]&&(t[s]=e[s],t[s]?t.setAttribute(s,""):t.removeAttribute(s))}var Wf={OPTION:function(t,e){var s=t.parentNode;if(s){var i=s.nodeName.toUpperCase();i==="OPTGROUP"&&(s=s.parentNode,i=s&&s.nodeName.toUpperCase()),i==="SELECT"&&!s.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),s.selectedIndex=-1)}Yu(t,e,"selected")},INPUT:function(t,e){Yu(t,e,"checked"),Yu(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var s=e.value;t.value!==s&&(t.value=s);var i=t.firstChild;if(i){var n=i.nodeValue;if(n==s||!s&&n==t.placeholder)return;i.nodeValue=s}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var s=-1,i=0,n=t.firstChild,o,a;n;)if(a=n.nodeName&&n.nodeName.toUpperCase(),a==="OPTGROUP")o=n,n=o.firstChild;else{if(a==="OPTION"){if(n.hasAttribute("selected")){s=i;break}i++}n=n.nextSibling,!n&&o&&(n=o.nextSibling,o=null)}t.selectedIndex=s}}},Ao=1,Hf=11,qf=3,Yf=8;function fn(){}function H0(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function q0(t){return function(s,i,n){if(n||(n={}),typeof i=="string")if(s.nodeName==="#document"||s.nodeName==="HTML"||s.nodeName==="BODY"){var o=i;i=is.createElement("html"),i.innerHTML=o}else i=V0(i);else i.nodeType===Hf&&(i=i.firstElementChild);var a=n.getNodeKey||H0,h=n.onBeforeNodeAdded||fn,c=n.onNodeAdded||fn,d=n.onBeforeElUpdated||fn,p=n.onElUpdated||fn,m=n.onBeforeNodeDiscarded||fn,E=n.onNodeDiscarded||fn,f=n.onBeforeElChildrenUpdated||fn,g=n.skipFromChildren||fn,_=n.addChild||function(M,k){return M.appendChild(k)},v=n.childrenOnly===!0,R=Object.create(null),w=[];function x(M){w.push(M)}function C(M,k){if(M.nodeType===Ao)for(var U=M.firstChild;U;){var H=void 0;k&&(H=a(U))?x(H):(E(U),U.firstChild&&C(U,k)),U=U.nextSibling}}function O(M,k,U){m(M)!==!1&&(k&&k.removeChild(M),E(M),C(M,U))}function y(M){if(M.nodeType===Ao||M.nodeType===Hf)for(var k=M.firstChild;k;){var U=a(k);U&&(R[U]=k),y(k),k=k.nextSibling}}y(s);function P(M){c(M);for(var k=M.firstChild;k;){var U=k.nextSibling,H=a(k);if(H){var Y=R[H];Y&&qc(k,Y)?(k.parentNode.replaceChild(Y,k),D(Y,k)):P(k)}else P(k);k=U}}function $(M,k,U){for(;k;){var H=k.nextSibling;(U=a(k))?x(U):O(k,M,!0),k=H}}function D(M,k,U){var H=a(k);if(H&&delete R[H],!U){var Y=d(M,k);if(Y===!1||(Y instanceof HTMLElement&&(M=Y,y(M)),t(M,k),p(M),f(M,k)===!1))return}M.nodeName!=="TEXTAREA"?V(M,k):Wf.TEXTAREA(M,k)}function V(M,k){var U=g(M,k),H=k.firstChild,Y=M.firstChild,lt,nt,ct,Et,Q;t:for(;H;){for(Et=H.nextSibling,lt=a(H);!U&&Y;){if(ct=Y.nextSibling,H.isSameNode&&H.isSameNode(Y)){H=Et,Y=ct;continue t}nt=a(Y);var tt=Y.nodeType,at=void 0;if(tt===H.nodeType&&(tt===Ao?(lt?lt!==nt&&((Q=R[lt])?ct===Q?at=!1:(M.insertBefore(Q,Y),nt?x(nt):O(Y,M,!0),Y=Q,nt=a(Y)):at=!1):nt&&(at=!1),at=at!==!1&&qc(Y,H),at&&D(Y,H)):(tt===qf||tt==Yf)&&(at=!0,Y.nodeValue!==H.nodeValue&&(Y.nodeValue=H.nodeValue))),at){H=Et,Y=ct;continue t}nt?x(nt):O(Y,M,!0),Y=ct}if(lt&&(Q=R[lt])&&qc(Q,H))U||_(M,Q),D(Q,H);else{var dt=h(H);dt!==!1&&(dt&&(H=dt),H.actualize&&(H=H.actualize(M.ownerDocument||is)),_(M,H),P(H))}H=Et,Y=ct}$(M,Y,nt);var pt=Wf[M.nodeName];pt&&pt(M,k)}var B=s,G=B.nodeType,X=i.nodeType;if(!v){if(G===Ao)X===Ao?qc(s,i)||(E(s),B=W0(s,z0(i.nodeName,i.namespaceURI))):B=i;else if(G===qf||G===Yf){if(X===G)return B.nodeValue!==i.nodeValue&&(B.nodeValue=i.nodeValue),B;B=i}}if(B===i)E(s);else{if(i.isSameNode&&i.isSameNode(B))return;if(D(B,i,v),w)for(var N=0,W=w.length;N<W;N++){var j=R[w[N]];j&&O(j,j.parentNode,!1)}}return!v&&B!==s&&s.parentNode&&(B.actualize&&(B=B.actualize(s.ownerDocument||is)),s.parentNode.replaceChild(B,s)),B}}var Y0=q0(D0);function X0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Z0="start",Q0="center",J0="end",K0=function(){function t(e){var s=e.itemCount,i=e.itemSizeGetter,n=e.estimatedItemSize;X0(this,t),this._itemSizeGetter=i,this._itemCount=s,this._estimatedItemSize=n,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return t.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},t.prototype.getSizeAndPositionForIndex=function(s){if(s<0||s>=this._itemCount)throw Error("Requested index "+s+" is outside of range 0.."+this._itemCount);if(s>this._lastMeasuredIndex){for(var i=this.getSizeAndPositionOfLastMeasuredItem(),n=i.offset+i.size,o=this._lastMeasuredIndex+1;o<=s;o++){var a=this._itemSizeGetter({index:o});if(a==null||isNaN(a))throw Error("Invalid size returned for index "+o+" of value "+a);this._itemSizeAndPositionData[o]={offset:n,size:a},n+=a}this._lastMeasuredIndex=s}return this._itemSizeAndPositionData[s]},t.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},t.prototype.getTotalSize=function(){var s=this.getSizeAndPositionOfLastMeasuredItem();return s.offset+s.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},t.prototype.getUpdatedOffsetForIndex=function(s){var i=s.align,n=i===void 0?Z0:i,o=s.containerSize,a=s.targetIndex;if(o<=0)return 0;var h=this.getSizeAndPositionForIndex(a),c=h.offset,d=c-o+h.size,p=void 0;switch(n){case J0:p=d;break;case Q0:p=c-(o-h.size)/2;break;default:p=c;break}var m=this.getTotalSize();return Math.max(0,Math.min(m-o,p))},t.prototype.getVisibleRange=function(s){var i=s.containerSize,n=s.offset,o=s.overscanCount,a=this.getTotalSize();if(a===0)return{};var h=n+i,c=this._findNearestItem(n),d=c,p=this.getSizeAndPositionForIndex(c);for(n=p.offset+p.size;n<h&&d<this._itemCount-1;)d++,n+=this.getSizeAndPositionForIndex(d).size;return o&&(c=Math.max(0,c-o),d=Math.min(d+o,this._itemCount)),{start:c,stop:d}},t.prototype.resetItem=function(s){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,s-1)},t.prototype._binarySearch=function(s){for(var i=s.low,n=s.high,o=s.offset,a=void 0,h=void 0;i<=n;){if(a=i+Math.floor((n-i)/2),h=this.getSizeAndPositionForIndex(a).offset,h===o)return a;h<o?i=a+1:h>o&&(n=a-1)}if(i>0)return i-1},t.prototype._exponentialSearch=function(s){for(var i=s.index,n=s.offset,o=1;i<this._itemCount&&this.getSizeAndPositionForIndex(i).offset<n;)i+=o,o*=2;return this._binarySearch({high:Math.min(i,this._itemCount-1),low:Math.floor(i/2),offset:n})},t.prototype._findNearestItem=function(s){if(isNaN(s))throw Error("Invalid offset "+s+" specified");s=Math.max(0,s);var i=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this._lastMeasuredIndex);return i.offset>=s?this._binarySearch({high:n,low:0,offset:s}):this._exponentialSearch({index:n,offset:s})},t}();function tS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var eS="position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;",sS="position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;",$m=function(){function t(e,s){var i=this;tS(this,t),this.getRowHeight=function(n){var o=n.index,a=i.options.rowHeight;return typeof a=="function"?a(o):Array.isArray(a)?a[o]:a},this.container=e,this.options=s,this.state={},this._initializeSizeAndPositionManager(s.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return t.prototype.componentDidMount=function(){var s=this,i=this.options,n=i.onMount,o=i.initialScrollTop,a=i.initialIndex,h=i.height,c=o||a!=null&&this.getRowOffset(a)||0,d=this.inner=document.createElement("div"),p=this.content=document.createElement("div");d.setAttribute("style",eS),p.setAttribute("style",sS),d.appendChild(p),this.container.appendChild(d),this.setState({offset:c,height:h},function(){c&&(s.container.scrollTop=c),s.container.addEventListener("scroll",s.handleScroll),typeof n=="function"&&n()})},t.prototype._initializeSizeAndPositionManager=function(s){this._sizeAndPositionManager=new K0({itemCount:s,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},t.prototype.setState=function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments[1];this.state=Object.assign(this.state,i),requestAnimationFrame(function(){s.render(),typeof n=="function"&&n()})},t.prototype.resize=function(s,i){this.setState({height:s},i)},t.prototype.handleScroll=function(s){var i=this.options.onScroll,n=this.container.scrollTop;this.setState({offset:n}),typeof i=="function"&&i(n,s)},t.prototype.getRowOffset=function(s){var i=this._sizeAndPositionManager.getSizeAndPositionForIndex(s),n=i.offset;return n},t.prototype.scrollToIndex=function(s,i){var n=this.state.height,o=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:n,targetIndex:s});this.container.scrollTop=o},t.prototype.setRowCount=function(s){this._initializeSizeAndPositionManager(s),this.render()},t.prototype.onRowsRendered=function(s){var i=this.options.onRowsRendered;typeof i=="function"&&i(s)},t.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},t.prototype.render=function(){for(var s=this.options,i=s.overscanCount,n=s.renderRow,o=this.state,a=o.height,h=o.offset,c=h===void 0?0:h,d=this._sizeAndPositionManager.getVisibleRange({containerSize:a,offset:c,overscanCount:i}),p=d.start,m=d.stop,E=document.createDocumentFragment(),f=p;f<=m;f++)E.appendChild(n(f));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(p)+"px",Y0(this.content,E,{childrenOnly:!0,getNodeKey:function(_){return _.nodeIndex}}),this.onRowsRendered({startIndex:p,stopIndex:m})},t}();const iS=({fieldKey:t,formID:e,attr:s,styleClasses:i})=>{const n=F.useRef(null),o=F.useRef(null),h=K(Bt)[t],c=K(Mc),{options:d,ph:p}=h;return F.useEffect(()=>{const m=document.getElementById("bit-grid-layout").contentWindow;n!=null&&n.current||(n.current=At(`.${t}-country-fld-wrp`));const E=o.current,f=n.current;E&&f&&"destroy"in E&&E.destroy();const{selectedFlagImage:g,selectedCountryClearable:_,searchClearable:v,optionFlagImage:R,detectCountryByIp:w,detectCountryByGeo:x,defaultValue:C,searchPlaceholder:O,noCountryFoundText:y}=h.config;m.bit_virtualized_list||(m.bit_virtualized_list=$m),m.observeElm||(m.observeElm=Fu);const P={fieldKey:t,selectedFlagImage:g,selectedCountryClearable:_,searchClearable:v,optionFlagImage:R,detectCountryByIp:w,detectCountryByGeo:x,defaultValue:C,placeholder:p,searchPlaceholder:O,noCountryFoundText:y,options:d,assetsURL:`${c.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:m,attributes:{option:bt(t,"option"),"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl")},classNames:{option:S(t,"option"),"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl")}};o.current=new N0(f,P)},[h]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:i}),u.jsx(xt,{formID:e,fieldKey:t,fieldData:s,children:u.jsx("div",{className:`${t}-country-fld-container`,children:u.jsxs("div",L(I({"data-dev-country-fld-wrp":t,className:`${t}-country-fld-wrp ${S(t,"country-fld-wrp")} ${h.valid.disabled?"disabled":""} ${h.valid.readonly?"readonly":""}`,ref:n},A(t,"country-fld-wrp")),{children:[u.jsx("input",I(I({name:"country-name",type:"hidden",className:`${t}-country-hidden-input`},"disabled"in h.valid&&{disabled:h.valid.disabled}),"readonly"in h.valid&&{readOnly:h.valid.readonly})),u.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"aria-live":"assertive","aria-label":"Select a Country",role:"combobox","aria-expanded":"false",tabIndex:h.valid.disabled?"-1":"0",children:[u.jsxs("div",{className:`${t}-selected-country-wrp`,children:[h.config.selectedFlagImage&&u.jsx("img",I({"data-dev-selected-country-img":t,className:`${t}-selected-country-img ${S(t,"selected-country-img")}`,"aria-hidden":"true",alt:"selected country flag",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},A(t,"selected-country-img"))),u.jsx("span",{"data-testid":`${t}-slctd-cntry-lbl`,"data-dev-selected-country-lbl":t,className:`${t}-selected-country-lbl`,children:p})]}),u.jsxs("div",{className:`${t}-dpd-btn-wrp`,children:[h.config.selectedCountryClearable&&u.jsx("button",L(I({"data-testid":`${t}-clr-slctd-cntry-btn`,type:"button",title:"Clear selected country value","data-dev-inp-clr-btn":t,className:`${t}-inp-clr-btn ${S(t,"inp-clr-btn")}`},A(t,"inp-clr-btn")),{children:u.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),u.jsx("div",{className:`${t}-dpd-down-btn`,children:u.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Cross icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),u.jsx("div",L(I({className:`${t}-option-wrp  ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},A(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp`,children:[u.jsxs("div",{className:`${t}-option-search-wrp`,"data-dev-option-search-wrp":t,children:[u.jsx("input",I({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${S(t,"opt-search-input")}`,placeholder:h.config.searchPlaceholder,autoComplete:"country-name",tabIndex:"-1"},A(t,"opt-search-input"))),u.jsxs("svg",L(I({"data-dev-opt-search-icn":t,className:`${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"aria-hidden":"true",width:"22",height:"22",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},A(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),h.config.searchClearable&&u.jsx("button",L(I({"data-testid":`${t}-srch-clr-btn`,type:"button",title:"Clear search","data-dev-search-clear-btn":t,className:`${t}-search-clear-btn ${S(t,"search-clear-btn")}`,tabIndex:"-1"},A(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"13",height:"13",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),u.jsx("ul",L(I({className:`${t}-option-list ${S(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},A(t,"option-list")),{children:u.jsxs("li",{className:"option",children:[u.jsx("span",{className:"opt-prefix",children:"Prefix"}),u.jsxs("span",{className:"opt-lbl-wrp",children:[u.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),u.jsx("span",{className:"opt-lbl",children:"Option"})]}),u.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};var Kh,Me,Ne,Bi,Sn,vl,$a,Ui,td,Pe,wl,vt,gi,Rn,Tl,Tr,qs,Vi,Cn,ya,Z,xl,Ma,Sl,ed,NE,sd,PE,Rl,vp,Na,ih,Cl,wp,id,DE,nd,FE,rd,jE,Pa,nh,Yt,ce,De,ns,ad,kE,od,GE,Da,rh,ld,BE,xr,Do,Fa,ah,Ol,Tp,ja,oh,Ll,xp,cd,UE,Al,Sp,$l,Rp,On,Qr,cs,ks,ka,lh,gt,It,Ln,Jr,An,Kr,Te,He,cm,rS,yl,Cp,Ml,Op,Nl,Lp,hd,VE,dd,zE,$n,ta,ud,WE,Pl,Ap,pd,HE;class nS{constructor(e,s){b(this,ed);b(this,sd);b(this,Rl);b(this,Na);b(this,Cl);b(this,id);b(this,nd);b(this,rd);b(this,Pa);b(this,Yt);b(this,De);b(this,ad);b(this,od);b(this,Da);b(this,ld);b(this,xr);b(this,Fa);b(this,Ol);b(this,ja);b(this,Ll);b(this,cd);b(this,Al);b(this,$l);b(this,On);b(this,cs);b(this,ka);b(this,gt);b(this,Ln);b(this,An);b(this,Te);b(this,cm);b(this,yl);b(this,Ml);b(this,Nl);b(this,hd);b(this,dd);b(this,$n);b(this,ud);b(this,Pl);b(this,pd);b(this,Kh,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,Me,null);b(this,Ne,null);b(this,Bi,null);b(this,Sn,null);b(this,vl,null);b(this,$a,null);b(this,Ui,null);b(this,td,null);b(this,Pe,null);b(this,wl,null);b(this,vt,null);b(this,gi,null);b(this,Rn,null);b(this,Tl,30);b(this,Tr,!1);b(this,qs,[]);b(this,Vi,void 0);b(this,Cn,{});b(this,ya,"");b(this,Z,{maxHeight:370,searchCurrencyPlaceholder:"Search Currency",noCurrencyFoundText:"No Currency Found",selectedCurrencyClearable:!0,searchClearable:!0,selectedFlagImage:!0,defaultCurrencyKey:"",defaultValue:"",optionFlagImage:!0,inputFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},valueFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},attributes:{},classNames:{},assetsURL:""});b(this,xl,null);b(this,Ma,"");b(this,Sl,[]);Object.assign(r(this,Z),s),T(this,Cn,s.window?s.window:window),T(this,Vi,s.document?s.document:document),typeof e=="string"?T(this,Me,r(this,Vi).querySelector(e)):T(this,Me,e),typeof r(this,Z).options=="string"&&(r(this,Z).options=l(this,ed,NE).call(this,r(this,Z).options)),r(this,Z).options=r(this,Z).options.filter(i=>!i.hide),T(this,qs,[...r(this,Z).options]),this.fieldKey=r(this,Z).fieldKey,T(this,ya,s.assetsURL),this.init()}init(){T(this,wl,l(this,Yt,ce).call(this,`.${this.fieldKey}-currency-inner-wrp`)),T(this,vt,l(this,Yt,ce).call(this,`.${this.fieldKey}-currency-amount-input`)),T(this,Ne,l(this,Yt,ce).call(this,`.${this.fieldKey}-currency-hidden-input`)),T(this,Bi,l(this,Yt,ce).call(this,`.${this.fieldKey}-input-clear-btn`)),T(this,$a,l(this,Yt,ce).call(this,`.${this.fieldKey}-selected-currency-img`)),T(this,td,l(this,Yt,ce).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Pe,l(this,Yt,ce).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Sn,l(this,Yt,ce).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,vl,l(this,Yt,ce).call(this,`.${this.fieldKey}-option-wrp`)),T(this,gi,l(this,Yt,ce).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,Rn,l(this,Yt,ce).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,De,ns).call(this,r(this,Me),"keydown",e=>{l(this,od,GE).call(this,e)}),l(this,De,ns).call(this,r(this,Sn),"click",e=>{l(this,Pl,Ap).call(this,e)}),l(this,De,ns).call(this,r(this,Sn),"keyup",e=>{l(this,Pl,Ap).call(this,e)}),l(this,De,ns).call(this,r(this,vt),"focus",()=>{l(this,sd,PE).call(this)}),l(this,De,ns).call(this,r(this,vt),"blur",()=>{l(this,Na,ih).call(this)}),l(this,De,ns).call(this,r(this,vt),"input",e=>{l(this,cd,UE).call(this,e)}),r(this,Z).selectedCurrencyClearable&&l(this,De,ns).call(this,r(this,Bi),"click",e=>{l(this,ld,BE).call(this,e)}),r(this,Cn).observeElm(r(this,Ne),"value",(e,s)=>{l(this,Ll,xp).call(this,e,s)}),r(this,Z).defaultValue&&l(this,ad,kE).call(this),!r(this,Z).defaultValue&&r(this,Z).defaultCurrencyKey&&this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),r(this,Z).searchClearable&&(l(this,Te,He).call(this,r(this,Pe),"padding-right","35px"),l(this,Te,He).call(this,r(this,gi),"display","none"),l(this,De,ns).call(this,r(this,gi),"click",()=>{this.searchOptions("")})),r(this,Pe).value="",l(this,De,ns).call(this,r(this,Pe),"keyup",e=>{l(this,dd,zE).call(this,e)})}setSelectedCurrencyItem(e){if(T(this,Ui,e),!r(this,Ui)){l(this,Ml,Op).call(this);return}const s=l(this,$l,Rp).call(this);s&&(r(this,Z).selectedFlagImage&&(r(this,$a).src=`${r(this,ya)}${s.img}`),this.setMenu({open:!1}),l(this,Na,ih).call(this),r(this,Tr)&&(!this.value&&r(this,vt).focus(),T(this,Tr,!1)))}searchOptions(e){l(this,hd,VE).call(this,e);let s=[];e?(s=r(this,Z).options.filter(i=>{const n=e.toLowerCase(),o=(i.lbl||"").toLowerCase(),a=(i.val||"").toLowerCase(),h=(i.i||"").toLowerCase();if(o.includes(n)||a.includes(n)||h.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,Z).noCurrencyFoundText}]),T(this,qs,s),r(this,Z).searchClearable&&l(this,Te,He).call(this,r(this,gi),"display","grid")):(T(this,qs,r(this,Z).options),r(this,Z).searchClearable&&l(this,Te,He).call(this,r(this,gi),"display","none")),l(this,Nl,Lp).call(this)}setMenu({open:e}){l(this,Te,He).call(this,r(this,vl),"max-height",`${e?r(this,Z).maxHeight:0}px`),e?(l(this,ud,WE).call(this),l(this,cs,ks).call(this,r(this,Me),"menu-open"),l(this,De,ns).call(this,r(this,Vi),"click",s=>l(this,Ol,Tp).call(this,s)),l(this,gt,It).call(this,r(this,Pe),"tabindex",0),l(this,gt,It).call(this,r(this,gi),"tabindex",0),l(this,gt,It).call(this,r(this,Sn),"aria-expanded",!0),l(this,Nl,Lp).call(this)):(r(this,Me).classList.remove("menu-open"),r(this,Vi).removeEventListener("click",l(this,Ol,Tp)),setTimeout(()=>{this.searchOptions("")},100),l(this,gt,It).call(this,r(this,Pe),"tabindex",-1),l(this,gt,It).call(this,r(this,gi),"tabindex",-1),l(this,gt,It).call(this,r(this,Sn),"aria-expanded",!1))}set value(e){r(this,Ne).value=e||"",l(this,gt,It).call(this,r(this,Ne),"value",e||"")}get value(){return r(this,Ne).value}destroy(){r(this,Rn).innerHTML="",this.value=r(this,Z).defaultValue,l(this,pd,HE).call(this)}reset(){l(this,Ml,Op).call(this),this.destroy(),this.init()}}Kh=new WeakMap,Me=new WeakMap,Ne=new WeakMap,Bi=new WeakMap,Sn=new WeakMap,vl=new WeakMap,$a=new WeakMap,Ui=new WeakMap,td=new WeakMap,Pe=new WeakMap,wl=new WeakMap,vt=new WeakMap,gi=new WeakMap,Rn=new WeakMap,Tl=new WeakMap,Tr=new WeakMap,qs=new WeakMap,Vi=new WeakMap,Cn=new WeakMap,ya=new WeakMap,Z=new WeakMap,xl=new WeakMap,Ma=new WeakMap,Sl=new WeakMap,ed=new WeakSet,NE=function(e){const s=e.split("->");let i=r(this,Cn);return s.forEach(n=>{i=i[n]}),i},sd=new WeakSet,PE=function(){l(this,gt,It).call(this,r(this,vt),"type","number"),r(this,vt).value=r(this,vt).dataset.numValue||""},Rl=new WeakSet,vp=function(e,s=0){const i=Vm(10,s||0);return Math.round(e*i)/i},Na=new WeakSet,ih=function(){l(this,gt,It).call(this,r(this,vt),"type","text");const e=Number(r(this,vt).dataset.numValue);if(!e||Number.isNaN(e)){r(this,vt).value="",r(this,Ne).value="",l(this,gt,It).call(this,r(this,Ne),"value","");return}const{inputFormatOptions:s,valueFormatOptions:i}=r(this,Z),n=l(this,Cl,wp).call(this,e,s);r(this,vt).value=n,this.value=l(this,Cl,wp).call(this,e,i),l(this,Da,rh).call(this,r(this,Ne),"blur")},Cl=new WeakSet,wp=function(e,s){const i=l(this,$l,Rp).call(this),{defaultCurrencyKey:n}=r(this,Z),{formatter:o,roundToClosestInteger:a,showCurrencySymbol:h,currencyPosition:c,symbolPosition:d}=s,p=(i==null?void 0:i.i)||n;if(!p)return e;a&&(e=l(this,Rl,vp).call(this,e));let m="";return o==="browser"?m=l(this,id,DE).call(this,e,p,s):o==="custom"||!o?m=l(this,nd,FE).call(this,e,s):o==="none"&&(m=e),d==="left-number"?m=`${(i==null?void 0:i.symbol)||""}${m}`:d==="right-number"&&(m=`${m}${(i==null?void 0:i.symbol)||""}`),h&&(c==="left"?m=`${h?`${p} `:""}${m}`:c==="right"&&(m=`${m}${h?` ${p}`:""}`)),d==="left-currency"?m=`${(i==null?void 0:i.symbol)||""}${m}`:d==="right-currency"&&(m=`${m}${(i==null?void 0:i.symbol)||""}`),m},id=new WeakSet,DE=function(e,s,i){const{showCurrencySymbol:n,roundToClosestInteger:o}=i;return new Intl.NumberFormat(navigator.language,{style:"currency",currency:s}).formatToParts(e).map(c=>!n&&c.type==="currency"||o&&(c.type==="decimal"||c.type==="fraction")?"":c.value).join("")},nd=new WeakSet,FE=function(e,s){const{decimalSeparator:i,roundToClosestFractionDigits:n,minimumFractionDigits:o,maximumFractionDigits:a,numberFormat:h}=s,[c]=h.split(i),[d,p=""]=e.toString().split("."),m=l(this,rd,jE).call(this,d,c);let E=p;const f=E.length;if(f>0){const _=a>0,v=o>0;if(n&&E){let R;_&&f>a?R=a:v&&f<o?R=o:R=f,E=l(this,Rl,vp).call(this,+`0.${E}`,R).toString().replace("0.","")}_&&E&&(E=E.slice(0,a))}E.length<o&&(E=E.padEnd(o,"0"));let g="";return E?g=`${m}${i}${E}`:g=m,g},rd=new WeakSet,jE=function(e="",s=""){let i="",n=e.length-1;for(let o=s.length-1;o>=0;o--){const a=s[o],h=e[n];if(!h)break;a==="#"?(i=h+i,n--):i=a+i}return n>=0&&(i=e.substring(0,n+1)+i),i},Pa=new WeakSet,nh=function(e=""){const{decimalSeparator:s}=r(this,Z).valueFormatOptions,i=new RegExp(`[^0-9${s}]`,"g");return e.replace(i,"")},Yt=new WeakSet,ce=function(e){return r(this,Me).querySelector(e)},De=new WeakSet,ns=function(e,s,i){e.addEventListener(s,i),r(this,Sl).push({selector:e,eventType:s,cb:i})},ad=new WeakSet,kE=function(){r(this,vt).dataset.numValue=l(this,Pa,nh).call(this,r(this,Z).defaultValue),l(this,Ll,xp).call(this,"",r(this,Z).defaultValue),r(this,Z).selectedCurrencyClearable&&l(this,Te,He).call(this,r(this,Bi),"display","grid")},od=new WeakSet,GE=function(e){var o,a;const s=r(this,Vi).activeElement;let i=null;const n=l(this,$n,ta).call(this);if(e.target!==r(this,vt)){if(n){const h=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Pe))i=l(this,Yt,ce).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,Fa,ah).call(this,h,"next"),d=l(this,xr,Do).call(this,c);d?i=d:c+1<r(this,qs).length&&((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const p=l(this,xr,Do).call(this,c);p&&p.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Pe))i=r(this,vt),l(this,$n,ta).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,Fa,ah).call(this,h,"previous"),d=l(this,xr,Do).call(this,c);d?i=d:c>0?((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const p=l(this,xr,Do).call(this,c);p&&p.focus()},50)):d||(i=r(this,Pe))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,xl)),T(this,Ma,r(this,Ma)+e.key),T(this,xl,setTimeout(()=>{T(this,Ma,"")},300));const h=r(this,Z).options.find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,Ma)));h&&this.setSelectedCurrencyItem(h.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const h=l(this,Al,Sp).call(this),c=e.key==="ArrowDown"?"next":"previous",d=l(this,Fa,ah).call(this,h,c);d>-1&&d<r(this,Z).options.length&&(this.value=r(this,Z).options[d].val)}i&&i.focus()}},Da=new WeakSet,rh=function(e,s){const i=new Event(s);e.dispatchEvent(i)},ld=new WeakSet,BE=function(){r(this,vt).value="",l(this,gt,It).call(this,r(this,Ne),"value",""),l(this,gt,It).call(this,r(this,vt),"data-num-value",""),this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),l(this,Da,rh).call(this,r(this,vt),"input"),this.value="",l(this,Da,rh).call(this,r(this,Ne),"blur")},xr=new WeakSet,Do=function(e){return l(this,Yt,ce).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},Fa=new WeakSet,ah=function(e=-1,s){if(s==="next"){const i=r(this,Z).options.length;for(let n=e+1;n<i;n++)if(!r(this,Z).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i--)if(!r(this,Z).options[i].disabled)return i}},Ol=new WeakSet,Tp=function(e){r(this,Me).contains(e.target)||this.setMenu({open:!1})},ja=new WeakSet,oh=function(e){var s;return((s=e==null?void 0:e.match(/[a-zA-Z]+/))==null?void 0:s[0])||""},Ll=new WeakSet,xp=function(e,s){const i=l(this,ja,oh).call(this,s),n=r(this,Z).options.find(o=>o.i===i);if((i&&n||!i&&r(this,Z).defaultCurrencyKey)&&e!==s){const o=l(this,ja,oh).call(this,r(this,Z).defaultValue);this.setSelectedCurrencyItem(i||o||r(this,Z).defaultCurrencyKey);const{decimalSeparator:a}=r(this,Z).valueFormatOptions,[h,c]=s.split(a),d=l(this,Pa,nh).call(this,h),p=l(this,Pa,nh).call(this,c),m=p?`${d}.${p}`:d;l(this,gt,It).call(this,r(this,vt),"data-num-value",m),l(this,Na,ih).call(this)}typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Ne)})},cd=new WeakSet,UE=function(e){const s=Number(e.target.value),{minValue:i,maxValue:n}=r(this,Z);if(s<i||s>n)return!1;l(this,gt,It).call(this,r(this,vt),"data-num-value",s||""),r(this,Z).selectedCurrencyClearable&&(s?l(this,Te,He).call(this,r(this,Bi),"display","grid"):l(this,Te,He).call(this,r(this,Bi),"display","none"))},Al=new WeakSet,Sp=function(){const e=r(this,qs).findIndex(s=>s.i===r(this,Ui));return e===-1?0:e},$l=new WeakSet,Rp=function(){return r(this,Z).options.find(e=>e.i===r(this,Ui))},On=new WeakSet,Qr=function(e){return r(this,Vi).createElement(e)},cs=new WeakSet,ks=function(e,s){e.classList.add(s)},ka=new WeakSet,lh=function(e,s){e.textContent=s},gt=new WeakSet,It=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Ln=new WeakSet,Jr=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,cs,ks).call(this,e,i))},An=new WeakSet,Kr=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,gt,It).call(this,e,s[n].key,s[n].value)},Te=new WeakSet,He=function(e,s,i){e.style.setProperty(s,i,"important")},cm=new WeakSet,rS=function(){const e=l(this,Yt,ce).call(this,".option");if(!e)return;const s=r(this,Cn).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Tl)&&(T(this,Tl,n),r(this,Rn).innerHTML="",l(this,yl,Cp).call(this))},yl=new WeakSet,Cp=function(){r(this,Rn).innerHTML="";const e=r(this,qs).map((s,i)=>{const n=l(this,On,Qr).call(this,"li");if(l(this,gt,It).call(this,n,"data-key",s.i),l(this,gt,It).call(this,n,"data-index",i),"option"in r(this,Z).attributes){const c=r(this,Z).attributes.option;l(this,An,Kr).call(this,n,c)}if(!s.i)return l(this,ka,lh).call(this,n,s.lbl),l(this,cs,ks).call(this,n,"opt-not-found"),n;if(l(this,cs,ks).call(this,n,"option"),"option"in r(this,Z).classNames){const c=r(this,Z).classNames.option;c&&l(this,Ln,Jr).call(this,n,c)}const o=l(this,On,Qr).call(this,"span");if("opt-lbl-wrp"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-lbl-wrp"];l(this,An,Kr).call(this,o,c)}if(l(this,cs,ks).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-lbl-wrp"];c&&l(this,Ln,Jr).call(this,o,c)}if(r(this,Z).optionFlagImage){const c=l(this,On,Qr).call(this,"img");if("opt-icn"in r(this,Z).attributes){const d=r(this,Z).attributes["opt-icn"];l(this,An,Kr).call(this,c,d)}if(l(this,cs,ks).call(this,c,"opt-icn"),"opt-icn"in r(this,Z).classNames){const d=r(this,Z).classNames["opt-icn"];d&&l(this,Ln,Jr).call(this,c,d)}c.src=`${r(this,ya)}${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,gt,It).call(this,c,"aria-hidden",!0),o.append(c)}const a=l(this,On,Qr).call(this,"span");if("opt-lbl"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-lbl"];l(this,An,Kr).call(this,a,c)}if(l(this,cs,ks).call(this,a,"opt-lbl"),"opt-lbl"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-lbl"];c&&l(this,Ln,Jr).call(this,a,c)}l(this,ka,lh).call(this,a,s.lbl),o.append(a);const h=l(this,On,Qr).call(this,"span");if("opt-suffix"in r(this,Z).attributes){const c=r(this,Z).attributes["opt-suffix"];l(this,An,Kr).call(this,h,c)}if(l(this,cs,ks).call(this,h,"opt-suffix"),"opt-suffix"in r(this,Z).classNames){const c=r(this,Z).classNames["opt-suffix"];c&&l(this,Ln,Jr).call(this,h,c)}return l(this,ka,lh).call(this,h,s.i),l(this,gt,It).call(this,n,"tabindex",l(this,$n,ta).call(this)?"0":"-1"),l(this,gt,It).call(this,n,"role","option"),l(this,gt,It).call(this,n,"aria-posinset",i+1),l(this,gt,It).call(this,n,"aria-setsize",r(this,qs).length),l(this,De,ns).call(this,n,"click",c=>{T(this,Tr,!0),this.setSelectedCurrencyItem(c.currentTarget.dataset.key)}),l(this,De,ns).call(this,n,"keyup",c=>{c.key==="Enter"&&(T(this,Tr,!0),this.setSelectedCurrencyItem(c.currentTarget.dataset.key))}),s.disabled&&l(this,cs,ks).call(this,n,"disabled-opt"),n.append(o,h),r(this,Ui)===s.i?(l(this,cs,ks).call(this,n,"selected-opt"),l(this,gt,It).call(this,n,"aria-selected",!0)):l(this,gt,It).call(this,n,"aria-selected",!1),n});r(this,Rn).append(...e)},Ml=new WeakSet,Op=function(){const e=l(this,ja,oh).call(this,r(this,Z).defaultValue);T(this,Ui,e||r(this,Z).defaultCurrencyKey||""),r(this,Z).selectedFlagImage&&(r(this,$a).src=r(this,Kh)),this.setMenu({open:!1}),l(this,gt,It).call(this,r(this,vt),"data-num-value",""),r(this,Z).selectedCurrencyClearable&&l(this,Te,He).call(this,r(this,Bi),"display","none"),l(this,gt,It).call(this,r(this,Ne),"value",r(this,Z).defaultValue)},Nl=new WeakSet,Lp=function(){if(!l(this,$n,ta).call(this))return;l(this,yl,Cp).call(this);const e=l(this,Al,Sp).call(this),s=l(this,Yt,ce).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},hd=new WeakSet,VE=function(e){r(this,Pe).value=e},dd=new WeakSet,zE=function(e){var s;if(e.key==="Enter"&&r(this,qs).length){const i=(s=l(this,Yt,ce).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCurrencyItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},$n=new WeakSet,ta=function(){return r(this,Me).classList.contains("menu-open")},ud=new WeakSet,WE=function(){const e=r(this,wl).getBoundingClientRect(),s=e.top,i=r(this,Cn).innerHeight-e.bottom;i<s&&i<r(this,Z).maxHeight?(l(this,Te,He).call(this,r(this,Me),"flex-direction","column-reverse"),l(this,Te,He).call(this,r(this,Me),"bottom","0%")):(l(this,Te,He).call(this,r(this,Me),"flex-direction","column"),l(this,Te,He).call(this,r(this,Me),"bottom","auto"))},Pl=new WeakSet,Ap=function(e){e.code==="Space"&&(r(this,Pe).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,$n,ta).call(this)?this.setMenu({open:!1}):(r(this,Pe).focus(),this.setMenu({open:!0})))},pd=new WeakSet,HE=function(){r(this,Sl).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};const aS=({fieldKey:t,formID:e,attr:s,onBlurHandler:i,contentID:n,styleClasses:o})=>{const a=F.useRef(null),h=F.useRef(null),d=K(Bt)[t],p=K(Mc),{selectedFlagImage:m,selectedCurrencyClearable:E,searchClearable:f,optionFlagImage:g,defaultCurrencyKey:_,searchPlaceholder:v,noCurrencyFoundText:R,defaultValue:w}=d.config;return F.useEffect(()=>{const x=document.getElementById("bit-grid-layout").contentWindow;a!=null&&a.current||(a.current=At(`.${t}-currency-fld-wrp`));const C=h.current,O=a.current;C&&O&&"destroy"in C&&C.destroy();const{options:y,inputFormatOptions:P,valueFormatOptions:$}=d,D={fieldKey:t,inputFormatOptions:P,valueFormatOptions:$,selectedFlagImage:m,selectedCurrencyClearable:E,searchClearable:f,optionFlagImage:g,defaultCurrencyKey:_,defaultValue:w,searchPlaceholder:v,noCurrencyFoundText:R,options:y,assetsURL:`${p.assetsURL}/../static/currencies/`,document:document.getElementById("bit-grid-layout").contentDocument,window:x,attributes:{option:bt(t,"option"),"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl"),"opt-suffix":bt(t,"opt-suffix")},classNames:{option:S(t,"option"),"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl"),"opt-suffix":S(t,"opt-suffix")}};x.bit_virtualized_list||(x.bit_virtualized_list=$m),x.observeElm||(x.observeElm=Fu),h.current=new nS(O,D)},[d]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:e,fieldKey:t,fieldData:s,children:u.jsx("div",{className:`${t}-currency-fld-container`,children:u.jsxs("div",L(I({"data-dev-currency-fld-wrp":t,className:`${t}-currency-fld-wrp ${S(t,"currency-fld-wrp")} ${d.valid.disabled?"disabled":""} ${d.valid.readonly?"readonly":""}`,ref:a},A(t,"currency-fld-wrp")),{children:[u.jsx("input",I(I({name:t,type:"hidden",className:`${t}-currency-hidden-input`},"disabled"in d.valid&&{disabled:d.valid.disabled}),"readonly"in d.valid&&{readOnly:d.valid.readonly})),u.jsxs("div",{className:`${t}-currency-inner-wrp`,children:[u.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-controls":"currency-dropdown","aria-live":"assertive","aria-labelledby":"currency-label-2","aria-expanded":"false",tabIndex:d.valid.disabled?"-1":"0",children:[m&&u.jsx("div",{className:`${t}-selected-currency-wrp`,children:u.jsx("img",I({"data-dev-selected-currency-img":t,alt:"Selected currency image","aria-hidden":"true",className:`${t}-selected-currency-img ${S(t,"selected-currency-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},A(t,"selected-currency-img")))}),u.jsx("div",{className:`${t}-dpd-down-btn`,children:u.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),u.jsx("input",L(I({"data-dev-currency-amount-input":t,"data-testid":`${t}-crncy-amnt-inp`,"aria-label":"Currency Input",type:"text"},"ph"in s&&{placeholder:s.ph}),{className:`${t}-currency-amount-input`,tabIndex:d.valid.disabled?"-1":"0"})),E&&u.jsx("button",L(I({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${S(t,"input-clear-btn")}`},A(t,"input-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),u.jsx("div",L(I({className:`${t}-option-wrp  ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},A(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp`,children:[u.jsxs("div",L(I({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${S(t,"option-search-wrp")}`},A(t,"option-search-wrp")),{children:[u.jsx("input",I({"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,type:"search",className:`${t}-opt-search-input ${S(t,"opt-search-input")}`,placeholder:d.config.searchPlaceholder,autoComplete:"off",tabIndex:"-1"},A(t,"opt-search-input"))),u.jsxs("svg",L(I({className:`${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},A(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),f&&u.jsx("button",L(I({"data-testid":`${t}-srch-clr-btn`,"data-dev-search-clear-btn":t,type:"button","aria-label":"Clear search",className:`${t}-search-clear-btn ${S(t,"search-clear-btn")}`,tabIndex:"-1"},A(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),u.jsx("ul",L(I({className:`${t}-option-list ${S(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"currency list","data-dev-option-list":t},A(t,"option-list")),{children:u.jsxs("li",{className:"option",children:[u.jsx("span",{className:"opt-prefix",children:"Prefix"}),u.jsxs("span",{className:"opt-lbl-wrp",children:[u.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),u.jsx("span",{className:"opt-lbl",children:"Option"})]}),u.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};function oS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:o}){var m,E;let{checked:a}=t.valid;const h=t.val||(a?t.msg.checked:t.msg.unchecked),[c,d]=F.useState(h);c===t.msg.unchecked?a=!1:c===t.msg.checked&&(a=!0);const p=f=>{if(t.valid.disabled)return;f.target.checked?d(t.msg.checked):d(t.msg.unchecked);const{form:g}=f.target;validateForm({input:{name:t.name,form:g,value:f.target.checked?t.msg.checked:t.msg.unchecked}})};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:n,fieldData:t,noLabel:!0,children:u.jsxs("div",L(I({"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},A(n,"cc")),{children:[u.jsx("svg",{className:`${n}-cks`,children:u.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:u.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),u.jsxs("div",L(I({"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},A(n,"cw")),{children:[u.jsx("input",L(I(L(I(I(I({"data-testid":n,id:`${n}-decision`,type:"checkbox",className:`${n}-ci`},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),{defaultValue:(m=t==null?void 0:t.info)==null?void 0:m.lbl}),"name"in t&&{name:t.name}),{checked:a,value:c,onChange:p})),u.jsxs("label",L(I({"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-decision`,className:`${n}-cl ${S(n,"cl")}`},A(n,"cl")),{children:[u.jsx("span",L(I({"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},A(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn`})})})),u.jsx("span",L(I({"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},A(n,"ct")),{children:u.jsx(Oe,{html:t.lbl||((E=t==null?void 0:t.info)==null?void 0:E.lbl)})}))]}))]}))]}))})]})}function lS({fieldKey:t,styleClasses:e,attr:s}){var a,h;const i=K(zr),{styleMode:n}=K(Es),o=((h=(a=s.valid)==null?void 0:a.hidden)==null?void 0:h.includes(i))||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:e}),u.jsx("div",L(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp drag ${n?"":"drag"} ${o?"fld-hide":""} ${S(t,"fld-wrp")}`},A(t,"fld-wrp")),{children:u.jsx("div",I({"data-dev-divider":t,className:`${t}-divider ${S(t,"divider")}`},A(t,"divider")))}))]})}var St,Sr,Xt,fe,Ga,xe,md,ge,zi,Os,Ei,Ls,hs,bi,Ys,ne,Ii,Rt,Wi,Ba,yn,q,Dl,Ua,Fl,jl,$p,Mt,Wt,kl,yp,Se,qe,Hi,ir,fd,qE,Gl,Mp,gd,YE,Rr,Fo,Va,ch,Ed,XE,qi,nr,bd,ZE,za,hh,Mn,ea,Bl,Np,Ul,Pp,_i,gn,Wa,dh,Id,QE,As,oi,re,_e,wt,Ct,Yi,rr,Ha,uh,Vl,Dp,Xs,Ni,Zt,he,zl,Fp,Wl,jp,Cr,jo,Xi,ar,Hl,kp,_d,JE,vd,KE,Ot,jt,Zs,Pi,Fe,rs,wd,tb,Td,eb,qa,ph,xd,sb,ql,Gp,Nn,sa,Sd,ib,Yl,Bp,Rd,nb;class cS{constructor(e,s){b(this,jl);b(this,Mt);b(this,kl);b(this,Se);b(this,Hi);b(this,fd);b(this,Gl);b(this,gd);b(this,Rr);b(this,Va);b(this,Ed);b(this,qi);b(this,bd);b(this,za);b(this,Mn);b(this,Bl);b(this,Ul);b(this,_i);b(this,Wa);b(this,Id);b(this,As);b(this,re);b(this,wt);b(this,Yi);b(this,Ha);b(this,Vl);b(this,Xs);b(this,Zt);b(this,zl);b(this,Wl);b(this,Cr);b(this,Xi);b(this,Hl);b(this,_d);b(this,vd);b(this,Ot);b(this,Zs);b(this,Fe);b(this,wd);b(this,Td);b(this,qa);b(this,xd);b(this,ql);b(this,Nn);b(this,Sd);b(this,Yl);b(this,Rd);b(this,St,null);b(this,Sr,null);b(this,Xt,null);b(this,fe,null);b(this,Ga,null);b(this,xe,null);b(this,md,null);b(this,ge,null);b(this,zi,null);b(this,Os,null);b(this,Ei,null);b(this,Ls,!1);b(this,hs,null);b(this,bi,null);b(this,Ys,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,ne,"");b(this,Ii,[]);b(this,Rt,[]);b(this,Wi,null);b(this,Ba,{});b(this,yn,!1);b(this,q,{separator:",",selectedOptImage:!1,dropdownIcn:"",selectedOptClearable:!0,searchClearable:!0,optionIcon:!0,defaultValue:"",placeholder:"Select an option",searchPlaceholder:"Search option",maxHeight:370,closeOnSelect:!1,showChip:!0,options:[],attributes:{},classNames:{},activeList:0,onChange:()=>{}});b(this,Dl,null);b(this,Ua,"");b(this,Fl,[]);Object.assign(r(this,q),s),T(this,Wi,s.document?s.document:document),T(this,Ba,s.window?s.window:window),typeof e=="string"?T(this,St,r(this,Wi).querySelector(e)):T(this,St,e),this.fieldKey=r(this,q).fieldKey,this.init()}init(){T(this,Xt,l(this,Mt,Wt).call(this,`.${this.fieldKey}-dpd-hidden-input`)),T(this,fe,l(this,Mt,Wt).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Ga,l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-wrp`)),T(this,xe,l(this,Mt,Wt).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,md,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-wrp`)),T(this,ge,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-img`)),T(this,zi,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-lbl`)),T(this,Os,l(this,Mt,Wt).call(this,`.${this.fieldKey}-selected-opt-clear-btn`)),T(this,Ei,r(this,q).searchClearable?l(this,Mt,Wt).call(this,`.${this.fieldKey}-search-clear-btn`):{}),l(this,Se,qe).call(this,r(this,xe),"click",e=>{l(this,Yl,Bp).call(this,e)}),l(this,Se,qe).call(this,r(this,xe),"keyup",e=>{l(this,Yl,Bp).call(this,e)}),l(this,Se,qe).call(this,r(this,St),"keydown",e=>{l(this,Ed,XE).call(this,e)}),l(this,jl,$p).call(this),r(this,q).defaultValue&&this.setSelectedOption(r(this,q).defaultValue),r(this,q).defaultValue||l(this,fd,qE).call(this),r(this,q).selectedOptImage&&(r(this,ge).src=r(this,Ys)),r(this,q).searchClearable&&(l(this,Zt,he).call(this,r(this,Ei),"display","none"),l(this,Se,qe).call(this,r(this,Ei),"click",()=>{this.searchOptions("")})),r(this,fe).placeholder=r(this,q).searchPlaceholder,r(this,fe).value="",l(this,Se,qe).call(this,r(this,fe),"keyup",e=>{l(this,Td,eb).call(this,e)}),T(this,Ls,r(this,q).allowCustomOption),r(this,Ba).observeElm(r(this,Xt),"value",(e,s)=>{l(this,gd,YE).call(this,e,s,r(this,yn))})}setSelectedOption(e){let s=null,i=e.split(r(this,q).separator);i=i.filter(n=>l(this,Mn,ea).call(this,n)),r(this,q).multipleSelect?(i.length===1?s=l(this,Mn,ea).call(this,i[0]):i.length>1&&(s={lbl:`${i.length} options selected`}),r(this,q).disableOnMax&&r(this,q).mx&&i.length>=r(this,q).mx?l(this,Wa,dh).call(this,!0):l(this,Wa,dh).call(this,!1)):s=l(this,Mn,ea).call(this,e),T(this,ne,e),r(this,ne)||l(this,za,hh).call(this),s&&(this.value=e,r(this,q).selectedOptImage&&(r(this,q).multipleSelect?i.length>1?(r(this,ge).src=r(this,Ys),l(this,_i,gn).call(this,r(this,ge))):i.length===1?(r(this,ge).src=s.icn||r(this,Ys),l(this,_i,gn).call(this,r(this,ge),s.icn)):(r(this,ge).src=r(this,Ys),l(this,_i,gn).call(this,r(this,ge))):(r(this,ge).src=s.icn||r(this,Ys),l(this,_i,gn).call(this,r(this,ge),s.icn))),r(this,q).multipleSelect&&r(this,q).showChip&&l(this,Bl,Np).call(this,i),r(this,q).showChip||l(this,Xs,Ni).call(this,r(this,zi),s.lbl),r(this,q).closeOnSelect&&this.setMenu({open:!1}),r(this,q).selectedOptClearable&&(l(this,Zt,he).call(this,r(this,Os),"display","grid"),l(this,Se,qe).call(this,r(this,Os),"click",n=>{l(this,za,hh).call(this,n)})),r(this,q).onChange&&r(this,q).onChange(e),r(this,yn)||l(this,Gl,Mp).call(this,r(this,Xt),"blur"))}searchOptions(e){l(this,xd,sb).call(this,e);let s=[],i=!1;if(e){const n=r(this,q).options.length,o=[],a=e.toLowerCase();for(let c=0;c<n;c+=1){const d=r(this,q).options[c];if("type"in d)continue;const p=d.lbl.toLowerCase();if(p.includes(a)){if("groupIndex"in d&&!o.includes(d.groupIndex)){const m=d.groupIndex;o.push(m),s.push(r(this,q).options[m])}s.push(d),p===a&&(i=!0)}}const h=r(this,Ii).length;for(let c=0;c<h;c+=1){const d=r(this,Ii)[c],p=d.lbl.toLowerCase();p.includes(a)&&(s.push(d),p===a&&(i=!0))}s.length||(s=[{i:"not-found",lbl:"No Option Found"}]),T(this,Rt,r(this,Ls)?[r(this,q).options[0]]:[]),r(this,Rt).push(...s),r(this,q).searchClearable&&l(this,Zt,he).call(this,r(this,Ei),"display","grid")}else T(this,Rt,r(this,q).options),r(this,q).searchClearable&&l(this,Zt,he).call(this,r(this,Ei),"display","none"),r(this,Ls)&&(T(this,hs,l(this,Mt,Wt).call(this,`${l(this,qi,nr).call(this)} .create-opt`)),l(this,Zt,he).call(this,r(this,hs),"display","none"),T(this,Rt,r(this,Rt).concat(r(this,Ii))));if(l(this,Xi,ar).call(this),T(this,hs,l(this,Mt,Wt).call(this,`${l(this,qi,nr).call(this)} .create-opt`)),i&&r(this,Ls))l(this,Zt,he).call(this,r(this,hs),"display","none");else if(r(this,Ls)&&e.trim()){l(this,Zt,he).call(this,r(this,hs),"display","block");const n=r(this,hs).querySelector(".opt-lbl");n.innerText=`Create: ${e}`,l(this,Ot,jt).call(this,r(this,hs),"data-value",e)}}setMenu({open:e}){l(this,Zt,he).call(this,r(this,Ga),"max-height",`${e?r(this,q).maxHeight:0}px`),e?(l(this,Sd,ib).call(this),l(this,wt,Ct).call(this,r(this,St),"menu-open"),l(this,Se,qe).call(this,r(this,Wi),"click",s=>l(this,ql,Gp).call(this,s)),l(this,re,_e).call(this,r(this,fe),0),l(this,re,_e).call(this,r(this,Ei),0),r(this,xe).setAttribute("aria-expanded","true"),l(this,Ot,jt).call(this,r(this,bi),"aria-hidden",!1),l(this,Ot,jt).call(this,r(this,fe),"aria-hidden",!1),l(this,Xi,ar).call(this)):(l(this,Yi,rr).call(this,r(this,St),"menu-open"),r(this,Wi).removeEventListener("click",l(this,ql,Gp)),setTimeout(()=>{this.searchOptions("")},100),l(this,re,_e).call(this,r(this,fe),-1),l(this,re,_e).call(this,r(this,Ei),-1),r(this,xe).setAttribute("aria-expanded","false"),l(this,Ot,jt).call(this,r(this,bi),"aria-hidden",!0),l(this,Ot,jt).call(this,r(this,fe),"aria-hidden",!0)),l(this,vd,KE).call(this)}set activelist(e){const s=l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-list[data-list="${e}"]`);if(s){const i=s.getAttribute("data-list-index");r(this,q).activeList=i,this.setSelectedOption(""),l(this,jl,$p).call(this)}}set disabled(e){String(e).toLowerCase()==="true"?(r(this,St).classList.add("disabled"),r(this,Xt).disabled=!0,l(this,re,_e).call(this,r(this,xe),-1),l(this,re,_e).call(this,r(this,Os),-1),l(this,Ot,jt).call(this,r(this,xe),"aria-label","Dropdown disabled"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,Yi,rr).call(this,r(this,St),"disabled"),r(this,Xt).removeAttribute("disabled"),l(this,re,_e).call(this,r(this,xe),0),l(this,re,_e).call(this,r(this,Os),0),l(this,Ot,jt).call(this,r(this,xe),"aria-label",r(this,q).placeholder))}get disabled(){return r(this,Xt).disabled}set readonly(e){String(e).toLowerCase()==="true"?(l(this,wt,Ct).call(this,r(this,St),"disabled"),r(this,Xt).readOnly=!0,l(this,re,_e).call(this,r(this,xe),-1),l(this,re,_e).call(this,r(this,Os),-1),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,Yi,rr).call(this,r(this,St),"disabled"),r(this,Xt).removeAttribute("readonly"),l(this,re,_e).call(this,r(this,xe),0),l(this,re,_e).call(this,r(this,Os),0))}get readonly(){return r(this,Xt).readOnly}set value(e){r(this,Xt).value=e,l(this,Ot,jt).call(this,r(this,Xt),"value",e)}get value(){return r(this,Xt).value}destroy(){this.value="",l(this,Rd,nb).call(this)}reset(){T(this,yn,!0),l(this,za,hh).call(this),this.destroy(),this.init(),setTimeout(()=>{T(this,yn,!1)},1)}}St=new WeakMap,Sr=new WeakMap,Xt=new WeakMap,fe=new WeakMap,Ga=new WeakMap,xe=new WeakMap,md=new WeakMap,ge=new WeakMap,zi=new WeakMap,Os=new WeakMap,Ei=new WeakMap,Ls=new WeakMap,hs=new WeakMap,bi=new WeakMap,Ys=new WeakMap,ne=new WeakMap,Ii=new WeakMap,Rt=new WeakMap,Wi=new WeakMap,Ba=new WeakMap,yn=new WeakMap,q=new WeakMap,Dl=new WeakMap,Ua=new WeakMap,Fl=new WeakMap,jl=new WeakSet,$p=function(){const e=l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-list[data-list-index="${r(this,q).activeList}"]`);T(this,bi,l(this,Mt,Wt).call(this,`.${this.fieldKey}-option-list.active-list`)),r(this,bi).innerHTML=e.innerHTML,l(this,_d,JE).call(this),r(this,q).options=l(this,bd,ZE).call(this),T(this,Rt,[...r(this,q).options])},Mt=new WeakSet,Wt=function(e,s){return s?s.querySelector(e):r(this,St).querySelector(e)},kl=new WeakSet,yp=function(e){return r(this,St).querySelectorAll(e)},Se=new WeakSet,qe=function(e,s,i){e==null||e.addEventListener(s,i),r(this,Fl).push({selector:e,eventType:s,cb:i})},Hi=new WeakSet,ir=function(e,s){e.appendChild(s)},fd=new WeakSet,qE=function(){r(this,Xt).value&&(this.setSelectedOption(r(this,Xt).value),l(this,Xi,ar).call(this))},Gl=new WeakSet,Mp=function(e,s){const i=new Event(s);e.dispatchEvent(i)},gd=new WeakSet,YE=function(e,s){e!==s&&this.setSelectedOption(s),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Xt)})},Rr=new WeakSet,Fo=function(e=-1,s){if(s==="next"){const i=r(this,Rt).length;for(let n=e+1;n<i;n+=1){const o=r(this,Rt)[n];if(o.type!=="group"&&!o.disabled&&!o.disableOnMax)return n}}else if(s==="previous")for(let i=e-1;i>=0;i-=1){const n=r(this,Rt)[i];if(n.type!=="group"&&!n.disabled&&!n.disableOnMax)return i}},Va=new WeakSet,ch=function(e){return l(this,Mt,Wt).call(this,`${l(this,qi,nr).call(this)} .option[data-index="${e}"]`)},Ed=new WeakSet,XE=function(e){const s=r(this,Wi).activeElement;let i=null;if(l(this,Nn,sa).call(this)){const o=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){e.preventDefault();let a=0,h=null;s===r(this,fe)?(a=l(this,Rr,Fo).call(this,-1,"next"),r(this,Ls)&&a===0&&l(this,Ha,uh).call(this,r(this,hs))!=="block"&&(a=1),h=l(this,Va,ch).call(this,a)):s.classList.contains("option")&&(a=l(this,Rr,Fo).call(this,o,"next"),h=l(this,Va,ch).call(this,a)),h&&(i=h)}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,fe))i=r(this,xe),l(this,Nn,sa).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){let a=l(this,Rr,Fo).call(this,o,"previous");l(this,qa,ph)&&a===0&&l(this,Ha,uh).call(this,r(this,hs))!=="block"&&(a=-1);const h=l(this,Va,ch).call(this,a);h?i=h:h||(i=r(this,fe))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,Dl)),T(this,Ua,r(this,Ua)+e.key),T(this,Dl,setTimeout(()=>{T(this,Ua,"")},300));const o=r(this,q).options.find(a=>a.type!=="group"&&!a.disabled&&a.lbl.toLowerCase().startsWith(r(this,Ua)));o&&this.setSelectedOption(o.val)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){if(r(this,q).multipleSelect)return;e.preventDefault();const o=l(this,Id,QE).call(this),a=e.key==="ArrowDown"?"next":"previous";let h=l(this,Rr,Fo).call(this,o,a);r(this,Ls)&&h===0&&(h=1),h>-1&&h<r(this,q).options.length&&(this.value=r(this,q).options[h].val)}else if((e.key==="ArrowRight"||e.key==="ArrowLeft")&&s.classList.contains("chip-clear-btn")){let a=null;e.key==="ArrowRight"?a=s.parentElement.nextElementSibling:e.key==="ArrowLeft"&&(a=s.parentElement.previousElementSibling),a&&(i=l(this,Mt,Wt).call(this,".chip-clear-btn",a))}i&&i.focus()},qi=new WeakSet,nr=function(){return`.${this.fieldKey}-option-list.active-list`},bd=new WeakSet,ZE=function(){const e=Array.from(l(this,kl,yp).call(this,`${l(this,qi,nr).call(this)} .option`)),s=o=>{const a={},h=o.querySelector(".opt-lbl"),{value:c}=o.dataset;a.lbl=h.textContent,c?a.val=c:a.val=a.lbl,l(this,Vl,Dp).call(this,o,"disabled-opt")&&(a.disabled=!0);const d=o.querySelector(".opt-icn");r(this,q).optionIcon&&(d!=null&&d.src)&&(a.icn=d.src);const{attributes:p}=o,m=p.length;a.attributes={};for(let E=0;E<m;E+=1){const f=p[E].nodeName;a.attributes[f]=o.getAttribute(f)}return a},i=[],{length:n}=e;for(let o=0;o<n;o+=1){const a=e[o];let h={},c=null;if(a.classList.contains("opt-group-title")){h=s(a),h.type="group",i.push(h),c=o;for(let d=o+1;d<n;d+=1){const p=e[d];if(p.classList.contains("opt-group-child")){const m=s(p);m.groupIndex=c,o=d,i.push(m)}else{o=d-1;break}}}else h=s(a),i.push(h)}return i},za=new WeakSet,hh=function(e){e==null||e.stopPropagation(),T(this,ne,""),r(this,q).selectedOptImage&&(r(this,ge).src=r(this,Ys),l(this,_i,gn).call(this,r(this,ge))),this.value="",r(this,q).multipleSelect&&r(this,q).showChip&&l(this,Bl,Np).call(this,[]),r(this,q).showChip||l(this,Xs,Ni).call(this,r(this,zi),r(this,q).placeholder),r(this,q).selectedOptClearable&&l(this,Zt,he).call(this,r(this,Os),"display","none"),l(this,Wa,dh).call(this),r(this,yn)||l(this,Gl,Mp).call(this,r(this,Xt),"blur")},Mn=new WeakSet,ea=function(e){return[...r(this,q).options,...r(this,Ii)].find(s=>s.val===e)},Bl=new WeakSet,Np=function(e){if(l(this,Xs,Ni).call(this,r(this,zi),""),T(this,Sr,r(this,St).parentElement),!e.length){r(this,Sr).style.removeProperty("min-height"),r(this,q).selectedOptImage&&l(this,Zt,he).call(this,r(this,ge),"display","block"),l(this,Xs,Ni).call(this,r(this,zi),r(this,q).placeholder);return}r(this,q).selectedOptImage&&l(this,Zt,he).call(this,r(this,ge),"display","none"),e.forEach((s,i)=>{var g,_,v,R,w,x,C,O;const n=l(this,As,oi).call(this,"div");l(this,wt,Ct).call(this,n,"chip-wrp");const o=(g=r(this,q).customClasses)==null?void 0:g["chip-wrp"];o&&l(this,Zs,Pi).call(this,n,o);const a=(_=r(this,q).customAttributes)==null?void 0:_["chip-wrp"];if(a&&l(this,Fe,rs).call(this,n,a),"chip-wrp"in r(this,q).attributes){const y=r(this,q).attributes["chip-wrp"];l(this,Fe,rs).call(this,n,y)}if(r(this,q).selectedOptImage&&r(this,q).optionIcon){const y=l(this,As,oi).call(this,"img");if(l(this,wt,Ct).call(this,y,"chip-icn"),"chip-icn"in r(this,q).attributes){const V=r(this,q).attributes["chip-icn"];l(this,Fe,rs).call(this,y,V)}const P=l(this,Mn,ea).call(this,s);l(this,Ot,jt).call(this,y,"src",P.icn||r(this,Ys)),l(this,_i,gn).call(this,y,P.icn),l(this,Ot,jt).call(this,y,"alt",P.lbl);const $=(v=r(this,q).customClasses)==null?void 0:v["chip-icn"];$&&l(this,Zs,Pi).call(this,y,$);const D=(R=r(this,q).customAttributes)==null?void 0:R["chip-icn"];D&&l(this,Fe,rs).call(this,y,D),l(this,Hi,ir).call(this,n,y)}const h=l(this,As,oi).call(this,"span");if(l(this,wt,Ct).call(this,h,"chip-lbl"),"chip-lbl"in r(this,q).attributes){const y=r(this,q).attributes["chip-lbl"];l(this,Fe,rs).call(this,h,y)}const c=(w=r(this,q).customClasses)==null?void 0:w["chip-lbl"];c&&l(this,Zs,Pi).call(this,h,c);const d=(x=r(this,q).customAttributes)==null?void 0:x["chip-lbl"];d&&l(this,Fe,rs).call(this,h,d);const p=l(this,Mn,ea).call(this,s);l(this,Xs,Ni).call(this,h,p?p.lbl:s),l(this,Hi,ir).call(this,n,h);const m=l(this,As,oi).call(this,"button");if(l(this,wt,Ct).call(this,m,"chip-clear-btn"),"chip-clear-btn"in r(this,q).attributes){const y=r(this,q).attributes["chip-clear-btn"];l(this,Fe,rs).call(this,m,y)}const E=(C=r(this,q).customClasses)==null?void 0:C["chip-clear-btn"];E&&l(this,Zs,Pi).call(this,m,E);const f=(O=r(this,q).customAttributes)==null?void 0:O["chip-clear-btn"];f&&l(this,Fe,rs).call(this,m,f),m.innerHTML=r(this,Os).innerHTML,l(this,Se,qe).call(this,m,"click",y=>{l(this,Ul,Pp).call(this,y,i)}),l(this,Se,qe).call(this,m,"keyup",y=>{y.key==="Backspace"&&l(this,Ul,Pp).call(this,y,i)}),l(this,Hi,ir).call(this,n,m),l(this,Hi,ir).call(this,r(this,zi),n)}),T(this,Sr,r(this,St).parentElement),l(this,Zt,he).call(this,r(this,Sr),"min-height",`${r(this,St).offsetHeight-r(this,Ga).offsetHeight}px`)},Ul=new WeakSet,Pp=function(e,s){e.stopPropagation();const i=r(this,ne).split(r(this,q).separator);i.splice(s,1),this.setSelectedOption(i.join(r(this,q).separator)),l(this,Xi,ar).call(this)},_i=new WeakSet,gn=function(e=null,s=0){s?l(this,Yi,rr).call(this,e,"placeholder-img"):l(this,wt,Ct).call(this,e,"placeholder-img")},Wa=new WeakSet,dh=function(e=!1){if(e){const s=r(this,ne).split(r(this,q).separator);T(this,Rt,r(this,Rt).map(i=>{const n=i;return!i.disabled&&!s.includes(i.val)?n.disableOnMax=!0:n.disableOnMax=!1,n}))}else T(this,Rt,r(this,Rt).map(s=>{const i=s;return delete i.disableOnMax,i}));l(this,Xi,ar).call(this)},Id=new WeakSet,QE=function(){return r(this,Rt).findIndex(e=>e.val===r(this,ne))},As=new WeakSet,oi=function(e){return r(this,Wi).createElement(e)},re=new WeakSet,_e=function(e,s){e.tabIndex=s},wt=new WeakSet,Ct=function(e,s){e.classList.add(s)},Yi=new WeakSet,rr=function(e,s){e.classList.remove(s)},Ha=new WeakSet,uh=function(e){return(e==null?void 0:e.style.display)||""},Vl=new WeakSet,Dp=function(e,s){return e.classList.contains(s)},Xs=new WeakSet,Ni=function(e,s){e.textContent=s},Zt=new WeakSet,he=function(e,s,i){e.style.setProperty(s,i,"important")},zl=new WeakSet,Fp=function(e){return e&&e.split(r(this,q).separator)||[]},Wl=new WeakSet,jp=function(e){return e.join(r(this,q).separator)},Cr=new WeakSet,jo=function(e){e.stopPropagation();const s=e.currentTarget,i=s.dataset.value;if(r(this,Ls)&&s.classList.contains("create-opt")&&l(this,qa,ph).call(this,i),r(this,q).multipleSelect){const n=l(this,zl,Fp).call(this,r(this,ne));if(n.includes(i)){const a=n.indexOf(i);n.splice(a,1),l(this,Yi,rr).call(this,s,"selected-opt")}else n.push(i),l(this,wt,Ct).call(this,s,"selected-opt");T(this,ne,l(this,Wl,jp).call(this,n))}else{const n=l(this,Mt,Wt).call(this,".selected-opt");n&&l(this,Yi,rr).call(this,n,"selected-opt"),l(this,wt,Ct).call(this,s,"selected-opt"),T(this,ne,i)}this.setSelectedOption(r(this,ne)),setTimeout(()=>{l(this,Mt,Wt).call(this,`${l(this,qi,nr).call(this)} .option[data-value="${i}"]`).focus()},0)},Xi=new WeakSet,ar=function(){l(this,wd,tb).call(this)},Hl=new WeakSet,kp=function(){return l(this,kl,yp).call(this,`${l(this,qi,nr).call(this)} .option:not(.opt-group-title):not(.create-opt)`)},_d=new WeakSet,JE=function(){const e=l(this,Hl,kp).call(this),s=e.length;for(let i=0;i<s;i+=1){const n=e[i];l(this,Se,qe).call(this,n,"click",o=>{l(this,Cr,jo).call(this,o)}),l(this,Se,qe).call(this,n,"keyup",o=>{o.key==="Enter"&&l(this,Cr,jo).call(this,o)})}},vd=new WeakSet,KE=function(){const e=l(this,Hl,kp).call(this),s=l(this,Nn,sa).call(this),i=e.length;for(let n=0;n<i;n+=1){const o=e[n];s?l(this,re,_e).call(this,o,0):l(this,re,_e).call(this,o,-1)}},Ot=new WeakSet,jt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Zs=new WeakSet,Pi=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,wt,Ct).call(this,e,i))},Fe=new WeakSet,rs=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Ot,jt).call(this,e,s[n].key,s[n].value)},wd=new WeakSet,tb=function(){r(this,bi).innerHTML="";const e=r(this,ne).split(r(this,q).separator),s=r(this,Rt).length;for(let i=0;i<s;i+=1){const n=r(this,Rt)[i],o=l(this,As,oi).call(this,"li");if(n.i==="not-found"){l(this,Xs,Ni).call(this,o,n.lbl),l(this,wt,Ct).call(this,o,"opt-not-found"),l(this,Hi,ir).call(this,r(this,bi),o);return}l(this,wt,Ct).call(this,o,"option");const a=l(this,As,oi).call(this,"span");if(l(this,wt,Ct).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,q).classNames){const d=r(this,q).classNames["opt-lbl-wrp"];d&&l(this,Zs,Pi).call(this,a,d)}if("opt-lbl-wrp"in r(this,q).attributes){const d=r(this,q).attributes["opt-lbl-wrp"];l(this,Fe,rs).call(this,a,d)}if(r(this,q).optionIcon){const d=l(this,As,oi).call(this,"img");if(l(this,wt,Ct).call(this,d,"opt-icn"),"opt-icn"in r(this,q).classNames){const p=r(this,q).classNames["opt-icn"];p&&l(this,Zs,Pi).call(this,d,p)}if("opt-icn"in r(this,q).attributes){const p=r(this,q).attributes["opt-icn"];l(this,Fe,rs).call(this,d,p)}d.src=n.icn||r(this,Ys),l(this,_i,gn).call(this,d,n.icn),d.alt=n.lbl,d.loading="lazy",a.append(d)}const h=l(this,As,oi).call(this,"span");if(l(this,wt,Ct).call(this,h,"opt-lbl"),"opt-lbl"in r(this,q).classNames){const d=r(this,q).classNames["opt-lbl"];d&&l(this,Zs,Pi).call(this,h,d)}if("opt-lbl"in r(this,q).attributes){const d=r(this,q).attributes["opt-lbl"];l(this,Fe,rs).call(this,h,d)}l(this,Xs,Ni).call(this,h,n.lbl),a.append(h);const c=l(this,As,oi).call(this,"span");if(l(this,wt,Ct).call(this,c,"opt-prefix"),"opt-prefix"in r(this,q).classNames){const d=r(this,q).classNames["opt-prefix"];d&&l(this,Zs,Pi).call(this,c,d)}if("opt-prefix"in r(this,q).attributes){const d=r(this,q).attributes["opt-prefix"];l(this,Fe,rs).call(this,h,d)}l(this,Xs,Ni).call(this,c,n.code),o.append(a,c),Object.keys(n.attributes).map(d=>{l(this,Ot,jt).call(this,o,d,n.attributes[d])}),e.includes(n.val)?(l(this,wt,Ct).call(this,o,"selected-opt"),l(this,Ot,jt).call(this,o,"aria-selected",!0)):l(this,Ot,jt).call(this,o,"aria-selected",!1),n.type==="group"?l(this,wt,Ct).call(this,o,"opt-group-title"):("groupIndex"in n&&l(this,wt,Ct).call(this,o,"opt-group-child"),l(this,Ot,jt).call(this,o,"data-index",i),l(this,Ot,jt).call(this,o,"data-value",n.val),l(this,Ot,jt).call(this,o,"role","option"),l(this,Ot,jt).call(this,o,"aria-posinset",i+1),l(this,Ot,jt).call(this,o,"aria-setsize",r(this,Rt).length),l(this,re,_e).call(this,o,l(this,Nn,sa).call(this)?"0":"-1"),n.disabled?l(this,wt,Ct).call(this,o,"disabled-opt"):n.disableOnMax?l(this,wt,Ct).call(this,o,"disable-on-max"):(l(this,Se,qe).call(this,o,"click",d=>{l(this,Cr,jo).call(this,d)}),l(this,Se,qe).call(this,o,"keyup",d=>{d.key==="Enter"&&l(this,Cr,jo).call(this,d)}))),l(this,Hi,ir).call(this,r(this,bi),o)}},Td=new WeakSet,eb=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,Rt).length){const i=(s=r(this,Rt))==null?void 0:s[0].i;if(i&&(this.setSelectedOption(i),this.searchOptions("")),r(this,Ls)&&l(this,Ha,uh).call(this,r(this,hs))!=="none"){const{value:n}=e.target;if(l(this,qa,ph).call(this,n),r(this,q).multipleSelect){const o=l(this,zl,Fp).call(this,r(this,ne));o.push(n),T(this,ne,l(this,Wl,jp).call(this,o))}else T(this,ne,n);l(this,Xi,ar).call(this),this.setSelectedOption(r(this,ne))}}else this.searchOptions(e.target.value)},qa=new WeakSet,ph=function(e){let s=e.trim();if(s.includes&&s){const i=r(this,Ii).length;for(let n=0;n<i;n+=1)if(r(this,Ii)[n].lbl.toLowerCase()===s){s="";break}if(s){const n={lbl:s,val:s};n.attributes={},r(this,Ii).push(n),r(this,Rt).push(n),this.searchOptions("")}}},xd=new WeakSet,sb=function(e){r(this,fe).value=e},ql=new WeakSet,Gp=function(e){r(this,St).contains(e.target)||this.setMenu({open:!1})},Nn=new WeakSet,sa=function(){return l(this,Vl,Dp).call(this,r(this,St),"menu-open")},Sd=new WeakSet,ib=function(){const e=r(this,xe).getBoundingClientRect(),s=e.top,i=r(this,Ba).innerHeight-e.bottom;i<s&&i<r(this,q).maxHeight?(l(this,Zt,he).call(this,r(this,St),"flex-direction","column-reverse"),l(this,Zt,he).call(this,r(this,St),"bottom","0%")):(l(this,Zt,he).call(this,r(this,St),"flex-direction","column"),l(this,Zt,he).call(this,r(this,St),"bottom","auto"))},Yl=new WeakSet,Bp=function(e){e.code==="Space"&&(r(this,fe).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,Nn,sa).call(this)?this.setMenu({open:!1}):(r(this,fe).focus(),this.setMenu({open:!0})))},Rd=new WeakSet,nb=function(){r(this,Fl).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function hS({fieldKey:t,formID:e,styleClasses:s,attr:i,onBlurHandler:n,resetFieldValue:o,isBuilder:a}){const[h,c]=F.useState(null),d=F.useRef(null),m=K(Bt)[t],{optionsList:E,ph:f}=m,{activeList:g,optionIcon:_,allowCustomOption:v}=m.config;F.useEffect(()=>{if(!h)return;const w=d.current;w&&h&&"destroy"in w&&w.destroy();const{selectedOptImage:x,selectedOptClearable:C,searchClearable:O,searchPlaceholder:y,maxHeight:P,multipleSelect:$,showChip:D,selectedOptImgSrc:V,closeOnSelect:B}=m.config,G=document.getElementById("bit-grid-layout").contentWindow,X={fieldKey:t,selectedOptImage:x,selectedOptClearable:C,searchClearable:O,allowCustomOption:v,optionIcon:_,maxHeight:P,multipleSelect:$,showChip:D,placeholder:f,searchPlaceholder:y,selectedOptImgSrc:V,closeOnSelect:B,activeList:g,document:document.getElementById("bit-grid-layout").contentDocument,window:G,attributes:{"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl"),"opt-prefix":bt(t,"opt-prefix"),"chip-wrp":bt(t,"chip-wrp"),"chip-lbl":bt(t,"chip-lbl"),"chip-icn":bt(t,"chip-icn"),"chip-clear-btn":bt(t,"chip-clear-btn")},classNames:{"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl"),"opt-prefix":S(t,"opt-prefix")}};G.observeElm||(G.observeElm=Fu),d.current=new cS(h,X)},[m,h]);const R=E.reduce((w,x)=>{const[C,O]=Object.entries(x)[0];return L(I({},w),{[C]:O})},{});return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsx(xt,{formID:e,fieldKey:t,fieldData:i,children:u.jsx("div",{className:`${t}-dpd-fld-container ${S(t,"dpd-fld-container")}`,children:u.jsxs("div",L(I({"data-dev-dpd-fld-wrp":t,className:`${t}-dpd-fld-wrp ${S(t,"dpd-fld-wrp")} ${m.valid.disabled?"disabled":""} ${m.valid.readonly?"readonly":""}`,ref:c},A(t,"dpd-fld-wrp")),{children:[u.jsx("input",I(I({"data-testid":`${t}-dpd-hdn-inp`,name:t,type:"hidden",className:`${t}-dpd-hidden-input ${S(t,"dpd-hidden-input")}`},"disabled"in m.valid&&{disabled:m.valid.disabled}),"readonly"in m.valid&&{readOnly:m.valid.readonly})),u.jsxs("div",L(I({"data-testid":`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,className:`${t}-dpd-wrp ${S(t,"dpd-wrp")}`,role:"combobox","aria-controls":"","aria-live":"assertive","aria-expanded":"false",tabIndex:"0","aria-label":"Dropdown"},A(t,"dpd-wrp")),{children:[u.jsxs("div",{"data-testid":`${t}-slctd-opt-wrp`,className:`${t}-selected-opt-wrp ${S(t,"selected-opt-wrp")}`,children:[m.config.selectedOptImage&&u.jsx("img",I({"data-testid":`${t}-slctd-opt-img`,"data-dev-selected-opt-img":t,className:`${t}-selected-opt-img placeholder-img ${S(t,"selected-opt-img")}`,"aria-hidden":"true",alt:"selected option icon",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},A(t,"selected-opt-img"))),u.jsx("span",L(I({"data-testid":`${t}-slctd-opt-lbl`,"aria-label":"Selected Option Label","data-dev-selected-opt-lbl":t,className:`${t}-selected-opt-lbl ${m.config.multipleSelect&&m.config.showChip?"multi-chip":""} ${S(t,"selected-opt-lbl")}`},A(t,"selected-opt-lbl")),{children:f}))]}),u.jsxs("div",{"data-testid":`${t}-dpd-btn-wrp`,className:`${t}-dpd-btn-wrp ${S(t,"dpd-btn-wrp")}`,children:[u.jsx("button",L(I({"data-testid":`${t}-slctd-opt-clr-btn`,type:"button","aria-label":"Clear selected option value","data-dev-selected-opt-clear-btn":t,className:`${t}-selected-opt-clear-btn ${S(t,"selected-opt-clear-btn")}`},A(t,"selected-opt-clear-btn")),{children:u.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),u.jsx("div",{className:`${t}-dpd-down-btn ${S(t,"dpd-down-btn")}`,children:u.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Down icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]})),u.jsx("div",L(I({className:`${t}-option-wrp ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},A(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp ${S(t,"option-inner-wrp")}`,children:[u.jsxs("div",{"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${S(t,"option-search-wrp")}`,children:[u.jsx("input",I({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${S(t,"opt-search-input")}`,placeholder:"Search Country","aria-label":"Search Options","aria-hidden":"true",tabIndex:"-1"},A(t,"opt-search-input"))),u.jsxs("svg",L(I({"data-dev-opt-search-icn":t,className:`${t}-icn ${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"aria-hidden":"true",width:"18",height:"18",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},A(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),u.jsx("button",L(I({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search","data-dev-search-clear-btn":t,className:`${t}-icn ${t}-search-clear-btn ${S(t,"search-clear-btn")}`,tabIndex:"-1"},A(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"13",height:"13",role:"img",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),Object.entries(R).map(([w,x],C)=>u.jsxs("ul",L(I({className:`${t}-option-list ${S(t,"option-list")}`,"aria-hidden":"true","aria-label":"Option List","data-list":w,"data-list-index":C,"data-dev-option-list":t,tabIndex:"-1",role:"listbox"},A(t,"option-list")),{children:[v&&u.jsxs("li",L(I({"data-testid":`${t}-opt-${C}`,"data-dev-option":t,"data-index":C,"data-value":"create-opt",className:"option create-opt",role:"option","aria-selected":"false",tabIndex:"-1"},A(t,"option")),{style:{display:"none"},children:[u.jsx("span",L(I({"data-dev-opt-lbl-wrp":t,className:`opt-lbl-wrp ${S(t,"opt-lbl-wrp")}`},A(t,"opt-lbl-wrp")),{children:u.jsx("span",{"data-dev-opt-lbl":t,className:"opt-lbl",children:"Create: "})})),u.jsx("span",{className:"opt-prefix"})]}),`option-${w}`),u.jsx(rb,{opts:x,fieldKey:t,optionIcon:_})]}),w)),u.jsx("ul",I({className:`${t}-option-list ${S(t,"option-list")} active-list`,"aria-hidden":"true","aria-label":"Option List","data-dev-option-list":t,tabIndex:"-1",role:"listbox"},A(t,"option-list")))]})}))]}))})})]})}var dS=F.memo(hS);const rb=({opts:t,fieldKey:e,optionIcon:s,isGroupChild:i})=>u.jsx(u.Fragment,{children:t.map((n,o)=>n.type==="group"?u.jsxs(F.Fragment,{children:[u.jsx("li",L(I({"data-testid":`${e}-opt-${o}`,"data-index":o,className:`option opt-group-title ${S(e,"opt-group-title")}`},A(e,"opt-group-title")),{children:u.jsx("span",{className:"opt-lbl",children:n.title})}),`option-grp-ttl-${n.title}`),u.jsx(rb,{opts:n.childs,fieldKey:e,optionIcon:s,isGroupChild:!0})]},n.title):u.jsxs("li",L(I({"data-testid":`${e}-opt-${o}`,"data-dev-option":e,"data-index":o,"data-value":n.val||n.lbl,className:`option ${i?`opt-group-child ${S(e,"option-group-child")}`:""}`,role:"option","aria-selected":"false",tabIndex:"-1"},A(e,"option")),{children:[u.jsxs("span",L(I({"data-dev-opt-lbl-wrp":e,className:`opt-lbl-wrp ${S(e,"opt-lbl-wrp")}`},A(e,"opt-lbl-wrp")),{children:[s&&u.jsx("img",{className:`opt-icn ${S(e,"opt-icn")}`,src:(n==null?void 0:n.img)||"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"BD",loading:"lazy"}),u.jsx("span",{"data-dev-opt-lbl":e,className:"opt-lbl",children:n.lbl})]})),u.jsx("span",{className:"opt-prefix"})]}),`option-${n.val||n.lbl}}`))});var Or,Cd,Xl,Qs,Ya,Od,vi,kt,wi,Ke,Zl,Xa,Ld,$s,Lt,je,Js,Pn,Qt,Ad,ab,$d,ob,yd,lb,Za,mh,Qa,fh,Ql,Up,Md,cb,Nd,ds,Gs,Pd,hb,Jl,Vp,ke,as,Dd,db,Lr,ko,ae,ve,Ja,gh,Zi,or,Ti,En,ys,li,Ms,ci,Fd,ub,jd,pb,kd,mb;class uS{constructor(e,s){b(this,Ad);b(this,$d);b(this,yd);b(this,Za);b(this,Qa);b(this,Ql);b(this,Md);b(this,ds);b(this,Pd);b(this,Jl);b(this,ke);b(this,Dd);b(this,Lr);b(this,ae);b(this,Ja);b(this,Zi);b(this,Ti);b(this,ys);b(this,Ms);b(this,Fd);b(this,jd);b(this,kd);b(this,Or,null);b(this,Cd,null);b(this,Xl,null);b(this,Qs,null);b(this,Ya,null);b(this,Od,null);b(this,vi,null);b(this,kt,null);b(this,wi,null);b(this,Ke,{});b(this,Zl,[]);b(this,Xa,null);b(this,Ld,{});b(this,$s,{});b(this,Lt,{});b(this,je,"");b(this,Js,"");b(this,Pn,[]);b(this,Qt,{id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{console.log("Hellow World")},oninput:()=>{}});b(this,Nd,e=>{const s=e.target.getAttribute("data-file-id");l(this,Jl,Vp).call(this,`#file-wrp-${s}`),delete r(this,Ke)[s];const i=Object.keys(r(this,Ke)).length;i?r(this,Qs).innerText=`${i} file${i>1?"s":""} selected`:(r(this,Qs).innerHTML=r(this,Qt).fileSelectStatus,l(this,Qa,fh).call(this)),l(this,Ql,Up).call(this)});Object.assign(r(this,Qt),s),T(this,Xa,s.document?s.document:document),T(this,Ld,s.window?s.window:window),T(this,$s,s.attributes||{}),T(this,Lt,s.classNames||{}),typeof e=="string"?T(this,Or,r(this,Xa).querySelector(e)):T(this,Or,e),T(this,je,r(this,Qt).fieldKey),this.fieldKey=r(this,je),T(this,Js,s.assetsURL||""),this.init()}init(){var h;T(this,Cd,l(this,ds,Gs).call(this,`.${r(this,je)}-label`)),T(this,Xl,l(this,ds,Gs).call(this,`.${r(this,je)}-inp-btn`)),T(this,Qs,l(this,ds,Gs).call(this,`.${r(this,je)}-file-select-status`)),T(this,Ya,l(this,ds,Gs).call(this,`.${r(this,je)}-file-input-wrpr`)),T(this,Od,l(this,ds,Gs).call(this,`.${r(this,je)}-max-size-lbl`)),T(this,vi,l(this,ds,Gs).call(this,`.${r(this,je)}-file-upload-input`)),T(this,wi,l(this,ds,Gs).call(this,`.${r(this,je)}-file-input-wrpr .err-wrp`));const{multiple:e,allowedFileType:s,accept:i,showSelectStatus:n,fileSelectStatus:o,oldFiles:a}=r(this,Qt);r(this,vi).multiple=e,r(this,vi).accept=s?`${s}, ${i}`:i,n&&r(this,Qs)?r(this,Qs).innerHTML=o:(h=r(this,Qs))==null||h.remove(),T(this,Ke,{}),l(this,Qa,fh).call(this),a&&l(this,Ad,ab).call(this,a),l(this,Lr,ko).call(this,r(this,vi),"change",c=>l(this,yd,lb).call(this,c)),l(this,Lr,ko).call(this,r(this,Xl),"click",()=>r(this,vi).click())}destroy(){r(this,kt)&&(r(this,kt).innerHTML=""),l(this,kd,mb).call(this)}reset(){this.destroy(),this.init()}}Or=new WeakMap,Cd=new WeakMap,Xl=new WeakMap,Qs=new WeakMap,Ya=new WeakMap,Od=new WeakMap,vi=new WeakMap,kt=new WeakMap,wi=new WeakMap,Ke=new WeakMap,Zl=new WeakMap,Xa=new WeakMap,Ld=new WeakMap,$s=new WeakMap,Lt=new WeakMap,je=new WeakMap,Js=new WeakMap,Pn=new WeakMap,Qt=new WeakMap,Ad=new WeakSet,ab=function(e){const s=JSON.parse(e);T(this,Pn,JSON.parse(e)),r(this,kt)||l(this,Za,mh).call(this),s.forEach(n=>{l(this,$d,ob).call(this,n)});const i=l(this,ke,as).call(this,"input");i.type="hidden",i.name=`${r(this,je)}_old`,i.value=r(this,Pn).toString(),r(this,Ya).appendChild(i)},$d=new WeakSet,ob=function(e){const s=l(this,ke,as).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");if(s.id=`file-wrp-${i}`,l(this,ae,ve).call(this,s,"file-wrpr"),"file-wrpr"in r(this,Lt)){const h=r(this,Lt)["file-wrpr"];h&&l(this,ys,li).call(this,s,h)}if("file-wrpr"in r(this,$s)){const h=r(this,$s)["file-wrpr"];l(this,Ms,ci).call(this,s,h)}const n=l(this,ke,as).call(this,"div");l(this,ae,ve).call(this,n,"file-details");const o=l(this,ke,as).call(this,"a");if(l(this,ae,ve).call(this,o,"file-title"),"file-title"in r(this,Lt)){const h=r(this,Lt)["file-title"];h&&l(this,ys,li).call(this,o,h)}if("file-title"in r(this,Qt).attributes){const h=r(this,Qt).attributes["file-title"];l(this,Ms,ci).call(this,o,h)}l(this,Ti,En).call(this,o,"target","_blank"),l(this,Ti,En).call(this,o,"href",`${r(this,Qt).baseDLURL}&fileID=${e}`),l(this,Zi,or).call(this,o,e),n.append(o),s.append(n);const a=l(this,ke,as).call(this,"button");if(l(this,ae,ve).call(this,a,"cross-btn"),"cross-btn"in r(this,Lt)){const h=r(this,Lt)["cross-btn"];h&&l(this,ys,li).call(this,a,h)}if(l(this,Ti,En).call(this,a,"data-file-id",i),l(this,Ti,En).call(this,a,"data-file-name",e),l(this,Ti,En).call(this,a,"type","button"),"cross-btn"in r(this,Qt).attributes){const h=r(this,Qt).attributes["cross-btn"];l(this,Ms,ci).call(this,a,h)}l(this,Zi,or).call(this,a,"Ã—"),l(this,Lr,ko).call(this,a,"click",h=>l(this,Md,cb).call(this,h)),s.append(a),r(this,kt).appendChild(s)},yd=new WeakSet,lb=function(e){const{files:s}=r(this,vi),{sizeUnit:i,allowMaxSize:n,maxSize:o,maxSizeErrMsg:a,isItTotalMax:h,multiple:c,showFileList:d,fileExistMsg:p,showFilePreview:m,showFileSize:E,showSelectStatus:f,fileSelectStatus:g,minFile:_,minFileErrMsg:v,maxFile:R,maxFileErrMsg:w}=r(this,Qt),x=l(this,jd,pb).call(this,i,o);let C=0;const O=[];l(this,Ja,gh).call(this,r(this,wi),"active"),h&&Object.values(r(this,Ke)).forEach(P=>{C+=P.size}),!c&&s.length>0&&(T(this,Ke,{}),r(this,kt)&&l(this,Zi,or).call(this,r(this,kt),""));for(let P=0;P<s.length;P+=1){const $=s[P],D=$.name.replace(/( |\.|\(|\))/g,"");if(r(this,Ke)[D])O.push(p);else if(!n||!o||$.size+C<=x)if(!(R>0)||Object.keys(r(this,Ke)).length<R){if(r(this,Ke)[D]=$,d){r(this,kt)||l(this,Za,mh).call(this);const V=l(this,ke,as).call(this,"div");if(V.id=`file-wrp-${D}`,l(this,ae,ve).call(this,V,"file-wrpr"),"file-wrpr"in r(this,Lt)){const N=r(this,Lt)["file-wrpr"];N&&l(this,ys,li).call(this,V,N)}if("file-wrpr"in r(this,$s)){const N=r(this,$s)["file-wrpr"];l(this,Ms,ci).call(this,V,N)}if(m){const N=l(this,ke,as).call(this,"img");if(N.src=l(this,Dd,db).call(this,$),N.alt="Image Uploaded",l(this,ae,ve).call(this,N,"file-preview"),"file-preview"in r(this,Lt)){const W=r(this,Lt)["file-preview"];W&&l(this,ys,li).call(this,N,W)}if("file-preview"in r(this,$s)){const W=r(this,$s)["file-preview"];l(this,Ms,ci).call(this,N,W)}V.append(N)}const B=l(this,ke,as).call(this,"div");l(this,ae,ve).call(this,B,"file-details");const G=l(this,ke,as).call(this,"span");if(l(this,ae,ve).call(this,G,"file-title"),"file-title"in r(this,Lt)){const N=r(this,Lt)["file-title"];N&&l(this,ys,li).call(this,G,N)}if("file-title"in r(this,Qt).attributes){const N=r(this,Qt).attributes["file-title"];l(this,Ms,ci).call(this,G,N)}if(l(this,Zi,or).call(this,G,$.name),B.append(G),E){const N=l(this,ke,as).call(this,"span");if(l(this,ae,ve).call(this,N,"file-size"),"file-size"in r(this,Lt)){const W=r(this,Lt)["file-size"];W&&l(this,ys,li).call(this,N,W)}if("file-size"in r(this,Qt).attributes){const W=r(this,Qt).attributes["file-size"];l(this,Ms,ci).call(this,N,W)}l(this,Zi,or).call(this,N,l(this,Fd,ub).call(this,$.size)),B.append(N)}V.append(B);const X=l(this,ke,as).call(this,"button");if(l(this,ae,ve).call(this,X,"cross-btn"),"cross-btn"in r(this,Lt)){const N=r(this,Lt)["cross-btn"];N&&l(this,ys,li).call(this,X,N)}if(l(this,Ti,En).call(this,X,"data-file-id",D),"cross-btn"in r(this,Qt).attributes){const N=r(this,Qt).attributes["cross-btn"];l(this,Ms,ci).call(this,X,N)}l(this,Zi,or).call(this,X,"Ã—"),V.append(X),r(this,kt).append(V)}h&&(C+=$.size)}else r(this,wi).innerHTML=w,l(this,ae,ve).call(this,r(this,wi),"active"),setTimeout(()=>{l(this,Ja,gh).call(this,r(this,wi),"active")},3e3);else O.push(a)}l(this,Pd,hb).call(this,`.${r(this,je)}-file-input-wrpr .cross-btn`).forEach(P=>{l(this,Lr,ko).call(this,P,"click",$=>r(this,Nd).call(this,$))});const y=Object.keys(r(this,Ke)).length;l(this,Ql,Up).call(this),y&&f?r(this,Qs).innerText=`${y} file${y>1?"s":""} selected`:f&&(r(this,Qs).innerHTML=g),_>0&&y<_&&(r(this,wi).innerHTML=v,l(this,ae,ve).call(this,r(this,wi),"active")),!r(this,kt)&&O.length>0&&l(this,Za,mh).call(this),O.map((P,$)=>{r(this,kt).insertAdjacentHTML("afterbegin",`
      <div id='err-${$}' class="err-wrp">
          ${P}
      </div>`);const D=l(this,ds,Gs).call(this,`#err-${$}`);l(this,ae,ve).call(this,D,"active"),setTimeout(()=>{l(this,Ja,gh).call(this,D,"active")},3e3),setTimeout(()=>{D==null||D.remove(),Object.keys(r(this,Ke)).length||l(this,Qa,fh).call(this)},5e3)})},Za=new WeakSet,mh=function(){if(T(this,kt,l(this,ke,as).call(this,"div")),l(this,ae,ve).call(this,r(this,kt),"files-list"),"files-list"in r(this,Lt)){const e=r(this,Lt)["files-list"];e&&l(this,ys,li).call(this,r(this,kt),e)}if("files-list"in r(this,$s)){const e=r(this,$s)["files-list"];l(this,Ms,ci).call(this,r(this,kt),e)}r(this,Ya).append(r(this,kt))},Qa=new WeakSet,fh=function(){var e;(e=r(this,kt))==null||e.remove(),T(this,kt,null)},Ql=new WeakSet,Up=function(){var s;const e=new DataTransfer;(s=Object.values(r(this,Ke)))==null||s.forEach(i=>{e.items.add(i)}),r(this,vi).files=e.files},Md=new WeakSet,cb=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,Jl,Vp).call(this,`#file-wrp-${s}`),T(this,Pn,r(this,Pn).filter(n=>n!==i)),l(this,ds,Gs).call(this,`input[name="${r(this,je)}_old"]`).value=r(this,Pn).toString()},Nd=new WeakMap,ds=new WeakSet,Gs=function(e){return r(this,Or).querySelector(e)},Pd=new WeakSet,hb=function(e){return r(this,Or).querySelectorAll(e)},Jl=new WeakSet,Vp=function(e){var s;(s=l(this,ds,Gs).call(this,e))==null||s.remove()},ke=new WeakSet,as=function(e){return r(this,Xa).createElement(e)},Dd=new WeakSet,db=function(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${r(this,Js)}/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${r(this,Js)}/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${r(this,Js)}/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${r(this,Js)}/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":return`${r(this,Js)}/file-audio.svg`;case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${r(this,Js)}/file-audio.svg`;default:return`${r(this,Js)}/paperclip.svg`}},Lr=new WeakSet,ko=function(e,s,i){e.addEventListener(s,i),r(this,Zl).push({element:e,eventType:s,eventAction:i})},ae=new WeakSet,ve=function(e,s){e.classList.add(s)},Ja=new WeakSet,gh=function(e,s){e.classList.remove(s)},Zi=new WeakSet,or=function(e,s){e.textContent=s},Ti=new WeakSet,En=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},ys=new WeakSet,li=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ae,ve).call(this,e,i))},Ms=new WeakSet,ci=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Ti,En).call(this,e,s[n].key,s[n].value)},Fd=new WeakSet,ub=function(e){if(e<1024)return`${e}Bytes`;if(e>=1024&&e<1048576)return`${(e/1024).toFixed(1)}KB`;if(e>=1048576&&e<1073741824)return`${(e/1048576).toFixed(1)}MB`;if(e>=1073741824)return`${(e/1073741824).toFixed(1)}GB`},jd=new WeakSet,pb=function(e,s){switch(e){case"Bytes":return s;case"KB":return s*1024;case"MB":return s*1048576;case"GB":return s*1073741824;default:return 0}},kd=new WeakSet,mb=function(){r(this,Zl).forEach(({element:e,eventType:s,eventAction:i})=>{e.removeEventListener(s,i)})};function pS({fieldKey:t,formID:e,styleClasses:s}){const i=F.useRef(null),n=F.useRef(null),a=K(Bt)[t],h=K(Mc),c=K(Es),{styleMode:d}=c;return F.useEffect(()=>{var W,j,M,k,U,H,Y,lt,nt,ct,Et,Q,tt,at;i!=null&&i.current||(i.current=At(`.${t}-file-up-wrpr`));const p=n.current,m=i.current;p&&m&&"destroy"in p&&p.destroy();const{multiple:E,allowMaxSize:f,showMaxSize:g,maxSizeLabel:_,maxSize:v,sizeUnit:R,isItTotalMax:w,showSelectStatus:x,fileSelectStatus:C,allowedFileType:O,showFileList:y,fileExistMsg:P,showFilePreview:$,showFileSize:D,duplicateAllow:V,accept:B,minFile:G,maxFile:X}=a.config,N={fieldKey:t,multiple:E,allowMaxSize:f,maxSizeErrMsg:((j=(W=a==null?void 0:a.err)==null?void 0:W.maxSize)==null?void 0:j.msg)||((k=(M=a==null?void 0:a.err)==null?void 0:M.maxSize)==null?void 0:k.dflt),showMaxSize:g,maxSizeLabel:_,maxSize:v,sizeUnit:R,isItTotalMax:w,showSelectStatus:x,fileSelectStatus:C,allowedFileType:O,showFileList:y,fileExistMsg:P,showFilePreview:$,showFileSize:D,duplicateAllow:V,accept:B,minFile:G,minFileErrMsg:((H=(U=a==null?void 0:a.err)==null?void 0:U.minFile)==null?void 0:H.msg)||((lt=(Y=a==null?void 0:a.err)==null?void 0:Y.minFile)==null?void 0:lt.dflt),maxFile:X,maxFileErrMsg:((ct=(nt=a==null?void 0:a.err)==null?void 0:nt.maxFile)==null?void 0:ct.msg)||((Q=(Et=a==null?void 0:a.err)==null?void 0:Et.maxFile)==null?void 0:Q.dflt),assetsURL:`${h.assetsURL}/../static/file-upload/`,document:(tt=document.getElementById("bit-grid-layout"))==null?void 0:tt.contentDocument,window:(at=document.getElementById("bit-grid-layout"))==null?void 0:at.contentWindow,attributes:{"files-list":bt(t,"files-list"),"file-wrpr":bt(t,"file-wrpr"),"file-preview":bt(t,"file-preview"),"file-title":bt(t,"file-title"),"file-size":bt(t,"file-size"),"cross-btn":bt(t,"cross-btn")},classNames:{"files-list":S(t,"files-list"),"file-wrpr":S(t,"file-wrpr"),"file-preview":S(t,"file-preview"),"file-title":S(t,"file-title"),"file-size":S(t,"file-size"),"cross-btn":S(t,"cross-btn")}};n.current=new uS(m,N)},[a]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsx(xt,{formID:e,fieldKey:t,fieldData:a,children:u.jsx("div",{className:`${t}-file-up-container ${S(t,"file-up-container")}`,children:u.jsx("div",L(I({"data-dev-file-up-wrpr":t,className:`${t}-file-up-wrpr ${a.valid.disabled?"disabled":""} ${a.valid.readonly?"readonly":""} ${S(t,"file-up-wrpr")}`,ref:i},A(t,"file-up-wrpr")),{children:u.jsxs("div",L(I({"data-dev-file-input-wrpr":t,"data-inp-wrp":!0,className:`${t}-file-input-wrpr ${S(t,"file-input-wrpr")}`},A(t,"file-input-wrpr")),{children:[u.jsxs("div",L(I({"data-dev-btn-wrpr":t,className:`${t}-btn-wrpr ${S(t,"btn-wrpr")}`},A(t,"btn-wrpr")),{children:[u.jsxs("button",L(I({"data-testid":`${t}-inp-btn`,"data-dev-inp-btn":t,type:"button",className:`${t}-inp-btn ${S(t,"inp-btn")}`},A(t,"inp-btn")),{children:[a.prefixIcn&&u.jsx("img",I({"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,src:`${a.prefixIcn}`,alt:"Upload icon",srcSet:""},A(t,"pre-i"))),u.jsx("span",L(I({"data-dev-btn-txt":t,className:`${t}-btn-txt ${S(t,"btn-txt")}`},A(t,"btn-txt")),{children:a.btnTxt})),a.suffixIcn&&u.jsx("img",I({"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,src:`${a.suffixIcn}`,alt:"Upload icon",srcSet:""},A(t,"suf-i")))]})),a.config.showSelectStatus&&u.jsx("div",L(I({"data-dev-file-select-status":t,className:`${t}-file-select-status ${S(t,"file-select-status")}`},A(t,"file-select-status")),{children:"No Choosen File"})),a.config.allowMaxSize&&a.config.showMaxSize&&a.config.maxSize!==0&&u.jsx("small",L(I({"data-dev-max-size-lbl":t,className:`${t}-max-size-lbl ${S(t,"max-size-lbl")}`},A(t,"max-size-lbl")),{children:a.config.maxSizeLabel||`(Max ${a.config.maxSize}${a.config.sizeUnit})`})),u.jsx("input",L(I(I(I(I(L(I({"data-testid":`${t}-fil-upld-inp`,type:"file",className:`${t}-file-upload-input ${S(t,"file-upload-input")}`},d&&{id:t}),{name:"file-upload"}),"req"in a.valid&&{required:a.valid.req}),"disabled"in a.valid&&{disabled:a.valid.disabled}),"readonly"in a.valid&&{readOnly:a.valid.readonly}),A(t,"file-upload-input")),{"aria-disabled":!0,tabIndex:-1}))]})),u.jsx("div",I({className:`err-wrp ${S(t,"err-wrp")}`},A(t,"err-wrp")))]}))}))})})]})}function mS({attr:t}){return u.jsxs("div",{className:"fld-wrp drag","btcd-fld":"text-fld",children:["lbl"in t&&u.jsx("label",{className:"fld-lbl",children:t.lbl}),u.jsx("input",I(I(I(I(I(I(I(I({className:"fld no-drg",type:t.typ},"req"in t.valid&&{required:t.valid.req}),"ph"in t&&{placeholder:t.ph}),"mn"in t&&{min:t.mn}),"mx"in t&&{max:t.mx}),"val"in t&&{defaultValue:t.val}),"val"in t&&"userinput"in t&&t.userinput&&{value:t.val}),"ac"in t&&{autoComplete:t.ac}),"name"in t&&{name:t.name}))]})}function fS({fieldKey:t,attr:e,styleClasses:s}){var o,a;const{styleMode:i}=K(Es),n=((o=e.valid)==null?void 0:o.hide)||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsx("div",L(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp ${i?"":"drag"} ${S(t,"fld-wrp")} ${n?"fld-hide":""}`},A(t,"fld-wrp")),{children:u.jsx(Oe,{html:e.content||((a=e==null?void 0:e.info)==null?void 0:a.content)})}))]})}function gS({fieldKey:t,formID:e,styleClasses:s}){const n=K(Bt)[t];return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsx(xt,{formID:e,fieldKey:t,fieldData:n,children:u.jsxs("select",L(I(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${S(t,"fld")} no-drg ${n.readonly?"readonly":""}`},"disabled"in n.valid&&{disabled:n.valid.disabled}),"readonly"in n.valid&&{readOnly:n.valid.readonly}),A(t,"fld")),"req"in n.valid&&{required:n.valid.req}),{children:[n.phHide&&u.jsx("option",L(I({"data-dev-slct-optn":t,className:`${t}-slct-optn ${S(t,"slct-optn")}`,value:""},A(t,"slct-optn")),{children:n.ph})),n.opt.map(o=>o.type?u.jsx("optgroup",L(I(I({"data-dev-slct-opt-grp":t,className:`${t}-slct-opt-grp ${S(t,"slct-opt-grp")}`,label:o.title},o.disabled&&{disabled:o.disabled}),I({},A(t,"slct-opt-grp"))),{children:o.childs.map(a=>u.jsx("option",L(I(I({"data-dev-slct-optn":t,className:`${t}-slct-optn ${S(t,"slct-optn")}`,value:a.val,selected:a.check},a.disabled&&{disabled:a.disabled}),I({},A(t,"slct-optn"))),{children:a.lbl}),a.val||a.lbl))}),o.title):u.jsx("option",L(I(I({"data-dev-slct-optn":t,className:`${t}-slct-optn ${S(t,"slct-optn")}`,value:o.val,selected:o.check},o.disabled&&{disabled:o.disabled}),I({},A(t,"slct-optn"))),{children:o.lbl}),o.val||o.lbl))]}))})]})}const Yc=(t,e)=>`https://fakeimg.pl/${t}x${e}/?text=${t} x ${e}`;function ES({fieldKey:t,attr:e,styleClasses:s}){var _,v,R,w;const i=F.useRef(),n=F.useRef({extarnalSource:Yc(100,40)}),o=K(Io),a=K(zr),{styleMode:h}=K(Es),c=hn(Ru),d=((_=e.valid.hidden)==null?void 0:_.includes(a))||!1,p=Vr(s),m=hn(Bt),{width:E,height:f}=e,g=x=>`fields->${t}->classes->.${t}-fld-wrp->${x}`;return o.fieldKey===t&&(n.current.resize=!0,c(x=>Ce(x,C=>{ha(C,g("max-height"),"")}))),n.current.resize&&!o.fieldKey&&(n.current.resize=!1,c(x=>Ce(x,C=>{var O,y,P;ha(C,g("height"),`${(O=i==null?void 0:i.current)==null?void 0:O.parentElement.clientHeight}px`),ha(C,g("width"),`${(y=i==null?void 0:i.current)==null?void 0:y.parentElement.clientWidth}px`),ha(C,g("max-height"),`${(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight}px`)})),m(x=>Ce(x,C=>{var O,y;C[t].height=(O=i==null?void 0:i.current)==null?void 0:O.parentElement.clientHeight,C[t].width=(y=i==null?void 0:i.current)==null?void 0:y.parentElement.clientWidth})),n.current.extarnalSource=Yc((v=i==null?void 0:i.current)==null?void 0:v.parentElement.clientWidth,(R=i==null?void 0:i.current)==null?void 0:R.parentElement.clientHeight)),F.useEffect(()=>{var x,C;n.current.extarnalSource=Yc((x=i==null?void 0:i.current)==null?void 0:x.parentElement.clientWidth,(C=i==null?void 0:i.current)==null?void 0:C.parentElement.clientHeight),m(O=>Ce(O,y=>{var P,$;y[t].height=(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight,y[t].width=($=i==null?void 0:i.current)==null?void 0:$.parentElement.clientWidth}))},[]),F.useEffect(()=>{n.current.extarnalSource=Yc(E,f)},[E,f]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:p}),u.jsx("div",L(I({"data-dev-fld-wrp":t,ref:i,className:`${t}-fld-wrp ${h?"":"drag"} ${d?"fld-hide":""} ${S(t,"fld-wrp")}`},A(t,"fld-wrp")),{children:u.jsx("img",L(I({"data-dev-img":t,className:`${t}-img ${S(t,"img")}`,src:(e==null?void 0:e.bg_img)||((w=n.current)==null?void 0:w.extarnalSource),alt:e==null?void 0:e.alt},A(t,"img")),{width:e==null?void 0:e.width,height:e==null?void 0:e.height,draggable:!1}))}))]})}function bS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:o}){const[a,h]=F.useState(t.val||""),c=F.useRef([]),[d,p]=F.useState({checked:[]});c.current=t.opt.map((E,f)=>{var g;return(g=c.current[f])!=null?g:F.createRef()});const m=(E,f)=>{const{checked:g}=E.target;if(g&&t.inpType==="checkbox")d.checked.push(f),h(null);else{const _=d.checked.indexOf(f);d.checked.splice(_,1),p({checked:d.checked})}g&&t.inpType==="radio"?(d.checked=[],h(E.target.value)):h(""),Tt(n)};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:n,fieldData:t,children:u.jsx("div",L(I({"data-testid":`${n}-inp-fld-wrp`,"data-dev-inp-fld-wrp":n,className:`${n}-inp-fld-wrp ${S(n,"inp-fld-wrp")}`},A(n,"inp-fld-wrp")),{children:u.jsx("div",L(I({"data-testid":`${n}-ic`,"data-dev-ic":n,className:`${n}-ic ${S(n,"ic")}`},A(n,"ic")),{children:t.opt.map((E,f)=>u.jsxs("div",L(I({"data-testid":`${n}-inp-opt`,"data-dev-inp-opt":n,className:`${n}-inp-opt ${S(n,"inp-opt")}`},A(n,"inp-opt")),{children:[u.jsx("input",L(I({className:`${n}-img-inp ${S(n,"img-inp")}`,type:t.inpType,"aria-label":E.lbl,id:`${n}-img-wrp-${f}`,name:n,value:E.val||E.lbl,checked:a===E.val||d.checked.includes(f)||(E==null?void 0:E.check),onChange:g=>m(g,f)},A(n,"img-inp")),{"data-dev-img-inp":n})),u.jsxs("label",L(I({"data-testid":`${n}-img-wrp`,"data-dev-img-wrp":n,htmlFor:`${n}-img-wrp-${f}`,className:`${n}-img-wrp ${S(n,"img-wrp")}`},A(n,"img-wrp")),{children:[u.jsx("span",L(I({"data-testid":`${n}-check-box`,"data-dev-check-box":n,className:`${n}-check-box ${S(n,"check-box")}`},A(n,"check-box")),{children:u.jsx("img",I({src:t.tickImgSrc,alt:"","data-testid":`${n}-check-img`,"data-dev-check-img":n,className:`${n}-check-img ${S(n,"check-img")}`},A(n,"check-img")))})),u.jsxs("span",L(I({"data-testid":`${n}-img-card-wrp`,"data-dev-img-card-wrp":n,className:`${n}-img-card-wrp ${S(n,"img-card-wrp")}`},A(n,"img-card-wrp")),{children:[u.jsx("img",I({src:E.img,alt:E.lbl,"aria-label":E.lbl,"data-testid":`${n}-select-img`,"data-dev-select-img":n,className:`${n}-select-img ${S(n,"select-img")}`},A(n,"select-img"))),!t.optLblHide&&u.jsx("div",L(I({"data-testid":`${n}-tc`,"data-dev-tc":n,className:`${n}-tc ${S(n,"tc")}`},A(n,"tc")),{children:u.jsx("span",L(I({"data-testid":`${n}-img-title`,"data-dev-img-title":n,className:`${n}-img-title ${S(n,"img-title")}`},A(n,"img-title")),{children:u.jsx(Oe,{html:E.lbl})}))}))]}))]}))]}),`opr-${f+22}`))}))}))})]})}function IS({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const o=K(Cu),[a,h]=F.useState(""),d=K(Bt)[t],[p,m]=F.useState(!1),E=um(),{currency:f,redirect_url:g}=d.config||{};return F.useEffect(()=>{if(!s.payIntegID){h(""),E(`field-settings/${t}`);return}const _=o==null?void 0:o.find(v=>v.id&&s.payIntegID&&Number(v.id)===Number(s.payIntegID));if(_){const v=_.apiKey;h(v)}},[s.payIntegID]),F.useEffect(()=>{if(!a){Zo({fieldKey:t,errorKey:"mollieApiKeyMissing",errorMsg:Li("Mollie API key is missing"),errorUrl:`field-settings/${t}`});return}g||Zo({fieldKey:t,errorKey:"mollieRedirectUrlMissing",errorMsg:Li("Mollie Redirect Url is not Selected"),errorUrl:`field-settings/${t}`}),m(!1),Ou(t,"mollieApiKeyMissing"),Tt(t)},[a,f,g]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:n}),u.jsxs(xt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,isBuilder:i,children:[a&&!p&&u.jsx("div",{className:`${t}-mollie-wrp`,children:u.jsxs("button",{"data-dev-mollie-btn":t,type:"button",className:`${t}-mollie-btn`,children:[u.jsx("svg",{"data-dev-mollie-icn":t,version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 80 80",xmlSpace:"preserve",className:`${t}-mollie-icn`,children:u.jsx("path",{strokeWidth:"6",fill:"currentColor",d:"M74.79,39.15v21.4c0,0.36-0.07,0.46-0.44,0.46c-3.59-0.02-7.21-0.02-10.8,0c-0.41,0-0.51-0.1-0.51-0.51  c0.02-6.94,0-13.86,0.02-20.79c0-2.89-0.97-5.31-3.25-7.09c-2.62-2.06-5.56-2.5-8.64-1.21c-3.03,1.26-4.76,3.62-5.24,6.89  c-0.05,0.49-0.07,0.99-0.07,1.48c0,6.89,0,13.78,0.02,20.7c0,0.41-0.1,0.53-0.53,0.53c-3.57-0.02-7.16-0.02-10.75,0  c-0.36,0-0.46-0.1-0.46-0.49V39.73c0.02-2.89-0.97-5.34-3.28-7.13c-2.62-2.04-5.56-2.48-8.61-1.19c-3.03,1.26-4.76,3.62-5.22,6.87  c-0.07,0.51-0.07,1.02-0.07,1.53c0,6.89-0.02,13.81,0,20.7c0,0.41-0.1,0.51-0.51,0.51c-3.59-0.02-7.18-0.02-10.77,0  c-0.36,0-0.46-0.1-0.46-0.46c0.02-7.3-0.05-14.61,0.05-21.94c0.05-4.97,1.89-9.37,5.29-13.01c4.54-4.9,10.19-7.09,16.86-6.53  c4.76,0.39,8.83,2.35,12.28,5.63c0.24,0.24,0.36,0.24,0.61,0c4.78-4.46,10.41-6.38,16.91-5.53c8.83,1.14,15.8,7.93,17.28,16.72  C74.69,36.99,74.79,38.06,74.79,39.15z"})})," ",d.txt]})}),!p&&!a&&u.jsxs("p",{children:["Please select a Mollie account from",u.jsx("strong",{children:" Field Settings "}),"to load Mollie field."]}),p&&u.jsx("p",{children:"Loading mollie..."})]})]})}var Ar,Ka,Nt,Qi,$r,Go,Kl,zp,Ns,hi,Gd,fb,Bd,gb,Ud,Eb,tc,Wp,to,Eh,Vd,bb,zd,Ib;class _S{constructor(e,s){b(this,$r);b(this,Kl);b(this,Ns);b(this,Gd);b(this,Bd);b(this,Ud);b(this,tc);b(this,to);b(this,Vd);b(this,zd);b(this,Ar,"");b(this,Ka,"");b(this,Nt,{namespace:"paypal",payType:"payment",currency:"USD",amount:1,shipping:0,tax:0,style:{label:"paypal",color:"gold",shape:"rect",layout:"vertical"}});b(this,Qi,null);Object.assign(r(this,Nt),s),typeof e=="string"?T(this,Ar,document.querySelector(e)):T(this,Ar,e),T(this,Ka,`#form-${l(this,Ns,hi).call(this)}`),this.init()}init(){const{namespace:e}=r(this,Nt),s=window[e],i={style:l(this,zd,Ib).call(this)};l(this,Kl,zp).call(this)&&(i.fundingSource=s.FUNDING[r(this,Nt).style.payBtn]),l(this,$r,Go).call(this)?i.createSubscription=(n,o)=>l(this,Gd,fb).call(this,n,o):i.createOrder=(n,o)=>l(this,Vd,bb).call(this,n,o),i.onClick=(n,o)=>l(this,Bd,gb).call(this,o),i.onApprove=(n,o)=>l(this,Ud,Eb).call(this,n,o),r(this,Nt).onInit&&(i.onInit=r(this,Nt).onInit),s&&s.Buttons(i).render(r(this,Ar))}destroy(){r(this,Ar).innerHTML=""}reset(){this.destroy(),this.init()}}Ar=new WeakMap,Ka=new WeakMap,Nt=new WeakMap,Qi=new WeakMap,$r=new WeakSet,Go=function(){return r(this,Nt).payType==="subscription"},Kl=new WeakSet,zp=function(){return r(this,Nt).style.layout==="standalone"},Ns=new WeakSet,hi=function(){return r(this,Nt).contentId},Gd=new WeakSet,fb=function(e,s){if(typeof validateForm!="undefined"&&!validateForm({form:l(this,Ns,hi).call(this)}))throw new Error("form validation is failed!");return s.subscription.create({plan_id:r(this,Nt).planId})},Bd=new WeakSet,gb=function(e){return Ro(this,null,function*(){const s=l(this,Ns,hi).call(this);try{yield isFormValidatedWithoutError(s)}catch(o){return e.reject()}const i=yield saveFormProgress(s),n=i==null?void 0:i[s];return n!=null&&n.success?(n.entry_id&&T(this,Qi,n.entry_id),e.resolve()):e.reject()})},Ud=new WeakSet,Eb=function(e,s){const i=document.getElementById(`${l(this,Ns,hi).call(this)}`);i.classList.add("pos-rel","form-loading"),(l(this,$r,Go).call(this)?s.subscription.get():s.order.capture()).then(o=>{var d;const a=bf_globals[l(this,Ns,hi).call(this)],h=document.getElementById(`form-${l(this,Ns,hi).call(this)}`),c=(d=l(this,Ns,hi).call(this))==null?void 0:d.split("_")[1];if(typeof h!="undefined"&&h!==null){r(this,Qi)&&(a.entryId=r(this,Qi));const p=bfSelect(`input[name="${r(this,Nt).fieldKey}"]`,h);p?p.value=o.id:setHiddenFld({name:r(this,Nt).fieldKey,value:o.id,type:"text"},h);let m=bfSelect('button[type="submit"]',h);m||(m=document.createElement("button"),m.setAttribute("type","submit"),m.style.display="none",h.append(m)),m.click();const E={formID:c,transactionID:o.id,payment_name:"paypal",payment_type:l(this,$r,Go).call(this)?"subscription":"order",payment_response:o,entry_id:r(this,Qi),fieldKey:r(this,Nt).fieldKey},f=new URL(a==null?void 0:a.ajaxURL);f.searchParams.append("_ajax_nonce",a==null?void 0:a.nonce),f.searchParams.append("action","bitforms_payment_insert"),fetch(f,{method:"POST",body:JSON.stringify(E)}).then(()=>{i.classList.remove("pos-rel","form-loading"),T(this,Qi,null)})}})},tc=new WeakSet,Wp=function(e,s){var i;return(i=document.querySelector(s))==null?void 0:i.querySelector(e)},to=new WeakSet,Eh=function(e){if(e){const s=window.bf_globals[l(this,Ns,hi).call(this)].fields[e].fieldName;let i=l(this,tc,Wp).call(this,`[name="${s}"]`,r(this,Ka));if(i&&i.type==="radio"&&(i=l(this,tc,Wp).call(this,`[name="${s}"]:checked`,r(this,Ka))),i&&i.value)return i.value}return""},Vd=new WeakSet,bb=function(e,s){var _;const{currency:i,amount:n,shipping:o,tax:a}=r(this,Nt),h=l(this,to,Eh).call(this,r(this,Nt).amountFld)||n,c=l(this,to,Eh).call(this,r(this,Nt).shippingVal)||o,d=l(this,to,Eh).call(this,r(this,Nt).taxVal)||a,p=Number(h).toFixed(2)*1,m=Number(c).toFixed(2)*1,E=(Number(d)*p/100).toFixed(2)*1,f=(p+m+E).toFixed(2)*1,g=(_=l(this,Ns,hi).call(this))==null?void 0:_.split("_")[1];return s.order.create({purchase_units:[{description:`form-id:${g};entry-id:${r(this,Qi)};field-key:${r(this,Nt).fieldKey}`,amount:{currency_code:i,value:f,breakdown:{item_total:{currency_code:i,value:p},shipping:{currency_code:i,value:m},tax_total:{currency_code:i,value:E}}}}]})},zd=new WeakSet,Ib=function(){const{label:e,color:s,shape:i,layout:n,height:o}=r(this,Nt).style,a={label:l(this,$r,Go).call(this)?"subscribe":e,color:s,shape:i};return l(this,Kl,zp).call(this)||(a.layout=n),o!==void 0&&(a.height=Number(o)),a};function vS({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const o=K(Cu),[a,h]=F.useState(""),d=K(Bt)[t],p=F.useRef(null),m=F.useRef(null),[E,f]=F.useState(!1),[g,_]=F.useState(!1),v=(d==null?void 0:d.payType)==="subscription",{locale:R,currency:w,disableFunding:x}=d||{};return F.useEffect(()=>{if(!s.payIntegID){h("");return}const C=o==null?void 0:o.find(O=>O.id&&s.payIntegID&&Number(O.id)===Number(s.payIntegID));if(C){const O=C.clientID;h(O)}},[s.payIntegID]),F.useEffect(()=>{if(!a){Zo({fieldKey:t,errorKey:"paypalClientIdMissing",errorMsg:Li("PayPal Client ID is missing"),errorUrl:`field-settings/${t}`});return}_(!0),Ou(t,"paypalClientIdMissing");const C={"client-id":a};d!=null&&d.locale&&(C.locale=d.locale),d!=null&&d.disableFunding&&(C["disable-funding"]=d.disableFunding),v&&(C.intent="subscription",C.vault="true"),!v&&(d!=null&&d.currency)&&(C.currency=d.currency);const y={src:`https://www.paypal.com/sdk/js?${new URLSearchParams(C).toString()}`,integrity:"",id:`bf-paypal-script-${t}`,scriptInGrid:!1,attr:{"data-namespace":t},callback:()=>{Tt(t),f(!0),_(!1)}};return Lu(y),()=>{pm("bf-paypal-script")}},[a,R,w,x]),F.useEffect(()=>{if(!E||g)return;p!=null&&p.current||(p.current=At(`#${t}-paypal-wrp`));const C=m.current,O=p.current;if((!a||C&&O&&"destroy"in C)&&(C.destroy(),Tt(t)),!a)return f(!1);const{style:y,currency:P}=d,$={namespace:t,style:y,currency:P,payType:"payment",shipping:0,tax:0,onInit:()=>{Tt(t)}};m.current=new _S(O,$)},[E,g]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:n}),u.jsxs(xt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[E&&a&&!g&&u.jsx("div",{className:`${t}-paypal-wrp`,children:u.jsx("div",{ref:p,id:`${t}-paypal-wrp`})}),!g&&(!E||!a)&&u.jsxs("p",{children:["Please select a PayPal account from",u.jsx("strong",{children:" Field Settings "}),"to load PayPal field."]}),g&&u.jsx("p",{children:"Loading PayPal..."})]})]})}var eo,Wd,hm,Ge,us,Ji,Dn,ec,so,Ki,Hd,Be,sc,Gt,xi,Fn,ic,Ks,io,tn,nc,J,no,rc,ro,en,Si,qd,_b,Jt,de,Ue,os,Yd,vb,Xd,wb,Zd,Tb,Qd,xb,ao,bh,Jd,Sb,yr,Bo,oo,Ih,ac,Hp,Kd,Rb,tu,Cb,oc,qp,sn,lr,lc,Yp,eu,Ob,su,Lb,cc,Xp,iu,Mr,Uo,hc,Zp,dc,Qp,jn,ia,kn,na,ps,Bs,lo,_h,Pt,Ht,Gn,ra,Bn,aa,Re,Ye,dm,TS,uc,Jp,nu,Ab,pc,Kp,mc,tm,ru,$b,au,yb,Un,oa,ou,Mb,fc,em,lu,Nb;class wS{constructor(e,s){b(this,qd);b(this,Jt);b(this,Ue);b(this,Yd);b(this,Xd);b(this,Zd);b(this,Qd);b(this,ao);b(this,Jd);b(this,yr);b(this,oo);b(this,ac);b(this,Kd);b(this,tu);b(this,oc);b(this,sn);b(this,lc);b(this,eu);b(this,su);b(this,cc);b(this,Mr);b(this,hc);b(this,dc);b(this,jn);b(this,kn);b(this,ps);b(this,lo);b(this,Pt);b(this,Gn);b(this,Bn);b(this,Re);b(this,dm);b(this,uc);b(this,nu);b(this,pc);b(this,mc);b(this,ru);b(this,au);b(this,Un);b(this,ou);b(this,fc);b(this,lu);b(this,eo,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");b(this,Wd,"www.cloudflare.com/cdn-cgi/trace");b(this,hm,"api.geonames.org/countryCodeJSON?username=bitcodezoho1");b(this,Ge,null);b(this,us,null);b(this,Ji,null);b(this,Dn,null);b(this,ec,null);b(this,so,null);b(this,Ki,null);b(this,Hd,null);b(this,Be,null);b(this,sc,null);b(this,Gt,null);b(this,xi,null);b(this,Fn,null);b(this,ic,30);b(this,Ks,[]);b(this,io,{});b(this,tn,!1);b(this,nc,[]);b(this,J,{maxHeight:370,detectCountryByIp:!1,detectCountryByGeo:!1,optionFlagImage:!0,searchCountryPlaceholder:"Search Country",noCountryFoundText:"No Country Found",searchClearable:!0,defaultCountryKey:"",attributes:{},classNames:{}});b(this,no,"");b(this,rc,null);b(this,ro,"");b(this,en,null);b(this,Si,null);b(this,iu,e=>/[0-9]/.test(e));Object.assign(r(this,J),s),T(this,en,s.document||document),T(this,Si,s.window||window),T(this,no,s.assetsURL||""),typeof e=="string"?T(this,Ge,r(this,en).querySelector(e)):T(this,Ge,e),typeof r(this,J).options=="string"&&(r(this,J).options=l(this,qd,_b).call(this,r(this,J).options)),r(this,J).options=r(this,J).options.filter(i=>!i.hide),T(this,Ks,[...r(this,J).options]),T(this,io,l(this,Kd,Rb).call(this)),this.fieldKey=r(this,J).fieldKey,this.init()}init(){T(this,sc,l(this,Jt,de).call(this,`.${this.fieldKey}-phone-inner-wrp`)),T(this,Gt,l(this,Jt,de).call(this,`.${this.fieldKey}-phone-number-input`)),T(this,us,l(this,Jt,de).call(this,`.${this.fieldKey}-phone-hidden-input`)),T(this,Ji,l(this,Jt,de).call(this,`.${this.fieldKey}-input-clear-btn`)),T(this,so,l(this,Jt,de).call(this,`.${this.fieldKey}-selected-country-img`)),T(this,Hd,l(this,Jt,de).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Be,l(this,Jt,de).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Dn,l(this,Jt,de).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,ec,l(this,Jt,de).call(this,`.${this.fieldKey}-option-wrp`)),T(this,xi,l(this,Jt,de).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,Fn,l(this,Jt,de).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,Ue,os).call(this,r(this,Ge),"keydown",e=>{l(this,Qd,xb).call(this,e)}),l(this,Ue,os).call(this,r(this,Dn),"click",e=>{l(this,fc,em).call(this,e)}),l(this,Ue,os).call(this,r(this,Dn),"keyup",e=>{l(this,fc,em).call(this,e)}),l(this,Yd,vb).call(this),r(this,J).defaultCountryKey&&this.setSelectedCountryItem(r(this,J).defaultCountryKey),l(this,Ue,os).call(this,r(this,Gt),"blur",e=>{l(this,eu,Ob).call(this)}),l(this,Ue,os).call(this,r(this,Gt),"input",e=>{l(this,su,Lb).call(this,e)}),l(this,Ue,os).call(this,r(this,Gt),"focusout",e=>{l(this,hc,Zp).call(this,e)}),r(this,J).selectedCountryClearable&&l(this,Ue,os).call(this,r(this,Ji),"click",e=>{l(this,Jd,Sb).call(this,e)}),r(this,J).detectCountryByIp&&l(this,Xd,wb).call(this),r(this,J).detectCountryByGeo&&l(this,Zd,Tb).call(this),r(this,J).searchClearable&&(l(this,Re,Ye).call(this,r(this,Be),"padding-right","35px"),l(this,Re,Ye).call(this,r(this,xi),"display","none"),l(this,Ue,os).call(this,r(this,xi),"click",()=>{this.searchOptions("")})),r(this,Be).value="",l(this,Ue,os).call(this,r(this,Be),"keyup",e=>{l(this,au,yb).call(this,e)}),T(this,eo,r(this,J).placeholderImage?r(this,J).placeholderImage:r(this,eo)),r(this,Si).observeElm(r(this,us),"value",(e,s)=>{l(this,lc,Yp).call(this,e,s)})}isValidated(){return l(this,hc,Zp).call(this,{target:r(this,Gt)})}setSelectedCountryItem(e){if(this.value="",T(this,Ki,e),!r(this,Ki)){l(this,pc,Kp).call(this);return}const s=l(this,jn,ia).call(this);s&&(r(this,J).selectedFlagImage&&(r(this,so).src=`${r(this,no)}/${s.img}`),l(this,nu,Ab).call(this,s.code),this.setMenu({open:!1}),r(this,tn)&&r(this,Gt).focus())}searchOptions(e){l(this,ru,$b).call(this,e);let s=[];e?(s=r(this,J).options.filter(i=>{const n=e.toLowerCase(),o=(i.lbl||"").toLowerCase(),a=(i.val||"").toLowerCase(),h=i.code||"";if(o.includes(n)||a.includes(n)||h.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,J).noCountryFoundText}]),T(this,Ks,s),r(this,J).searchClearable&&l(this,Re,Ye).call(this,r(this,xi),"display","grid")):(T(this,Ks,r(this,J).options),r(this,J).searchClearable&&l(this,Re,Ye).call(this,r(this,xi),"display","none")),l(this,mc,tm).call(this)}setMenu({open:e}){l(this,Re,Ye).call(this,r(this,ec),"max-height",`${e?r(this,J).maxHeight:0}px`),e?(l(this,ou,Mb).call(this),l(this,ps,Bs).call(this,r(this,Ge),"menu-open"),l(this,Ue,os).call(this,r(this,en),"click",s=>l(this,ac,Hp).call(this,s)),l(this,Pt,Ht).call(this,r(this,Be),"tabindex",0),l(this,Pt,Ht).call(this,r(this,xi),"tabindex",0),l(this,Pt,Ht).call(this,r(this,Dn),"aria-expanded",!0),l(this,mc,tm).call(this)):(r(this,Ge).classList.remove("menu-open"),r(this,en).removeEventListener("click",l(this,ac,Hp)),setTimeout(()=>{this.searchOptions("")},100),l(this,Pt,Ht).call(this,r(this,Be),"tabindex",-1),l(this,Pt,Ht).call(this,r(this,xi),"tabindex",-1),l(this,Pt,Ht).call(this,r(this,Dn),"aria-expanded",!1))}set value(e){r(this,us).value=e||"",l(this,Pt,Ht).call(this,r(this,us),"value",e||"")}get value(){return r(this,us).value}destroy(){r(this,Fn).innerHTML="",this.value="",T(this,tn,!1),l(this,lu,Nb).call(this)}reset(e){l(this,pc,Kp).call(this),this.destroy(),this.value=e,this.init()}}eo=new WeakMap,Wd=new WeakMap,hm=new WeakMap,Ge=new WeakMap,us=new WeakMap,Ji=new WeakMap,Dn=new WeakMap,ec=new WeakMap,so=new WeakMap,Ki=new WeakMap,Hd=new WeakMap,Be=new WeakMap,sc=new WeakMap,Gt=new WeakMap,xi=new WeakMap,Fn=new WeakMap,ic=new WeakMap,Ks=new WeakMap,io=new WeakMap,tn=new WeakMap,nc=new WeakMap,J=new WeakMap,no=new WeakMap,rc=new WeakMap,ro=new WeakMap,en=new WeakMap,Si=new WeakMap,qd=new WeakSet,_b=function(e){const s=e.split("->");let i=r(this,Si);return s.forEach(n=>{i=i[n]}),i},Jt=new WeakSet,de=function(e){return r(this,Ge).querySelector(e)},Ue=new WeakSet,os=function(e,s,i){e.addEventListener(s,i),r(this,nc).push({selector:e,eventType:s,cb:i})},Yd=new WeakSet,vb=function(){r(this,us).value&&(l(this,lc,Yp).call(this,"",r(this,us).value),r(this,J).selectedCountryClearable&&l(this,Re,Ye).call(this,r(this,Ji),"display","grid"))},Xd=new WeakSet,wb=function(){const{protocol:e}=r(this,Si).location;fetch(`${e}//${r(this,Wd)}`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,o)=>(o=o.split("="),n[o[0]]=o[1],n),{});this.setSelectedCountryItem(i.loc)})},Zd=new WeakSet,Tb=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,Si).location,o=n==="https:"?`${n}//secure`:`${n}//api`;fetch(`${o}.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${s}&lng=${i}`).then(a=>a.json()).then(a=>{this.setSelectedCountryItem(a.countryCode)})})},Qd=new WeakSet,xb=function(e){var o,a;const s=r(this,en).activeElement;let i=null;const n=l(this,Un,oa).call(this);if(e.target!==r(this,Gt)){if(n){const h=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Be))i=l(this,Jt,de).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const c=l(this,oo,Ih).call(this,h,"next"),d=l(this,yr,Bo).call(this,c);d?i=d:c+1<r(this,Ks).length&&((o=this.virtualOptionList)==null||o.scrollToIndex(c),setTimeout(()=>{const p=l(this,yr,Bo).call(this,c);p&&p.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Be))i=r(this,Gt),l(this,Un,oa).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const c=l(this,oo,Ih).call(this,h,"previous"),d=l(this,yr,Bo).call(this,c);d?i=d:c>0?((a=this.virtualOptionList)==null||a.scrollToIndex(c),setTimeout(()=>{const p=l(this,yr,Bo).call(this,c);p&&p.focus()},50)):d||(i=r(this,Be))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,rc)),T(this,ro,r(this,ro)+e.key),T(this,rc,setTimeout(()=>{T(this,ro,"")},300));const h=r(this,J).options.find(c=>!c.disabled&&c.lbl.toLowerCase().startsWith(r(this,ro)));h&&this.setSelectedCountryItem(h.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const h=l(this,dc,Qp).call(this),c=e.key==="ArrowDown"?"next":"previous",d=l(this,oo,Ih).call(this,h,c);d>-1&&d<r(this,J).options.length&&(this.value=r(this,J).options[d].val)}i&&i.focus()}},ao=new WeakSet,bh=function(e,s){const i=new Event(s);e.dispatchEvent(i)},Jd=new WeakSet,Sb=function(){r(this,Gt).value="",this.setSelectedCountryItem(""),l(this,ao,bh).call(this,r(this,Gt),"input"),l(this,ao,bh).call(this,r(this,us),"blur")},yr=new WeakSet,Bo=function(e){return l(this,Jt,de).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},oo=new WeakSet,Ih=function(e=-1,s){if(s==="next"){const i=r(this,J).options.length;for(let n=e+1;n<i;n+=1)if(!r(this,J).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,J).options[i].disabled)return i}},ac=new WeakSet,Hp=function(e){r(this,Ge).contains(e.target)||this.setMenu({open:!1})},Kd=new WeakSet,Rb=function(){return r(this,J).options.reduce((e,s)=>{if(!e[s.code]){let{code:i}=s;i[0]==="+"&&(i=i.substring(1)),!(i in e)&&s.ptrn&&(e[i]=s.i)}return e},{})},tu=new WeakSet,Cb=function(e){let s=e;s[0]==="+"&&(s=s.substring(1,4));let i="";for(let n=3;n>0;n-=1)if(i=s.substring(0,n),i in r(this,io))return i;return""},oc=new WeakSet,qp=function(e){var n;let s=l(this,tu,Cb).call(this,e);s&&s[0]!=="+"&&(s=`+${s}`);let i=((n=l(this,jn,ia).call(this))==null?void 0:n.code)||"";return i&&i[0]!=="+"&&(i=`+${i}`),s!==i?(this.setSelectedCountryItem(r(this,io)[s.substring(1)]),s):i},sn=new WeakSet,lr=function(e){return e.replace(/[^+0-9]/g,"")},lc=new WeakSet,Yp=function(e,s){l(this,oc,qp).call(this,s)&&e!==s&&l(this,cc,Xp).call(this,l(this,sn,lr).call(this,s)),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,us)})},eu=new WeakSet,Ob=function(){this.value.length>3&&(r(this,Gt).value=this.value),l(this,ao,bh).call(this,r(this,us),"blur")},su=new WeakSet,Lb=function(e){const{value:s}=e.target;s&&r(this,J).selectedCountryClearable?l(this,Re,Ye).call(this,r(this,Ji),"display","grid"):r(this,J).selectedCountryClearable&&l(this,Re,Ye).call(this,r(this,Ji),"display","none"),l(this,cc,Xp).call(this,s)},cc=new WeakSet,Xp=function(e){const s=l(this,jn,ia).call(this);let i="";if(r(this,tn)?i=s.code:i=l(this,oc,qp).call(this,e),i&&s){let n=s.frmt;const o=r(this,J).valueFormat||"";n||(n=r(this,J).inputFormat||"");const a=l(this,Mr,Uo).call(this,i,e,n);if(o){const h=l(this,sn,lr).call(this,e),c=l(this,Mr,Uo).call(this,i,h,o);this.value=c}else this.value=e;r(this,Gt).value=a}},iu=new WeakMap,Mr=new WeakSet,Uo=function(e,s,i=""){let n="",o=0;const a=s[0]==="+"?s.substring(1):s;for(let h=0;h<i.length&&!(o>=a.length);h+=1){const c=i[h];if(c==="c"){const d=e[0]==="+"?e.substring(1):e;n+=d,o+=d.length}else if(c==="#"){if(!r(this,iu).call(this,a[o]))break;n+=a[o],o+=1}else a[o]===c?(n+=c,o+=1):n+=c}return o<a.length&&(n+=a.substring(o)),n},hc=new WeakSet,Zp=function(e){const s=l(this,sn,lr).call(this,e.target.value),i=l(this,jn,ia).call(this);if(i){const n=s.substring(i.code.length);if(i.ptrn&&n){const o=i.ptrn.replace(/\$_bf_\$/g,"\\");return new RegExp(`^(${o})$`).test(n)?"":"invalid"}return n?"":"required"}return"required"},dc=new WeakSet,Qp=function(){const e=r(this,Ks).findIndex(s=>s.i===r(this,Ki));return e===-1?0:e},jn=new WeakSet,ia=function(){return r(this,J).options.find(e=>e.i===r(this,Ki))},kn=new WeakSet,na=function(e){return r(this,en).createElement(e)},ps=new WeakSet,Bs=function(e,s){e.classList.add(s)},lo=new WeakSet,_h=function(e,s){e.textContent=s},Pt=new WeakSet,Ht=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Gn=new WeakSet,ra=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ps,Bs).call(this,e,i))},Bn=new WeakSet,aa=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Pt,Ht).call(this,e,s[n].key,s[n].value)},Re=new WeakSet,Ye=function(e,s,i){e.style.setProperty(s,i,"important")},dm=new WeakSet,TS=function(){const e=l(this,Jt,de).call(this,".option");if(!e)return;const s=r(this,Si).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,ic)&&(T(this,ic,n),r(this,Fn).innerHTML="",l(this,uc,Jp).call(this))},uc=new WeakSet,Jp=function(){r(this,Fn).innerHTML="";const e=r(this,Ks).map((s,i)=>{const n=l(this,kn,na).call(this,"li");if(l(this,Pt,Ht).call(this,n,"data-key",s.i),l(this,Pt,Ht).call(this,n,"data-index",i),"option"in r(this,J).attributes){const c=r(this,J).attributes.option;l(this,Bn,aa).call(this,n,c)}if(!s.i)return l(this,lo,_h).call(this,n,s.lbl),l(this,ps,Bs).call(this,n,"opt-not-found"),n;if(l(this,ps,Bs).call(this,n,"option"),"option"in r(this,J).classNames){const c=r(this,J).classNames.option;c&&l(this,Gn,ra).call(this,n,c)}const o=l(this,kn,na).call(this,"span");if(l(this,ps,Bs).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,J).classNames){const c=r(this,J).classNames["opt-lbl-wrp"];c&&l(this,Gn,ra).call(this,o,c)}if("opt-lbl-wrp"in r(this,J).attributes){const c=r(this,J).attributes["opt-lbl-wrp"];l(this,Bn,aa).call(this,o,c)}if(r(this,J).optionFlagImage){const c=l(this,kn,na).call(this,"img");if(l(this,ps,Bs).call(this,c,"opt-icn"),"opt-icn"in r(this,J).classNames){const d=r(this,J).classNames["opt-icn"];d&&l(this,Gn,ra).call(this,c,d)}if("opt-icn"in r(this,J).attributes){const d=r(this,J).attributes["opt-icn"];l(this,Bn,aa).call(this,c,d)}c.src=`${r(this,no)}/${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,Pt,Ht).call(this,c,"aria-hidden",!0),o.append(c)}const a=l(this,kn,na).call(this,"span");if(l(this,ps,Bs).call(this,a,"opt-lbl"),"opt-lbl"in r(this,J).classNames){const c=r(this,J).classNames["opt-lbl"];c&&l(this,Gn,ra).call(this,a,c)}if("opt-lbl"in r(this,J).attributes){const c=r(this,J).attributes["opt-lbl"];l(this,Bn,aa).call(this,a,c)}l(this,lo,_h).call(this,a,s.lbl),o.append(a);const h=l(this,kn,na).call(this,"span");if(l(this,ps,Bs).call(this,h,"opt-suffix"),"opt-suffix"in r(this,J).classNames){const c=r(this,J).classNames["opt-suffix"];c&&l(this,Gn,ra).call(this,h,c)}if(l(this,lo,_h).call(this,h,s.code),l(this,Pt,Ht).call(this,h,"data-dev-opt-suffix",this.fieldKey),"opt-suffix"in r(this,J).attributes){const c=r(this,J).attributes["opt-suffix"];l(this,Bn,aa).call(this,h,c)}return l(this,Pt,Ht).call(this,n,"tabindex",l(this,Un,oa).call(this)?"0":"-1"),l(this,Pt,Ht).call(this,n,"role","option"),l(this,Pt,Ht).call(this,n,"aria-posinset",i+1),l(this,Pt,Ht).call(this,n,"aria-setsize",r(this,Ks).length),l(this,Ue,os).call(this,n,"click",c=>{T(this,tn,!0),this.setSelectedCountryItem(c.currentTarget.dataset.key)}),l(this,Ue,os).call(this,n,"keyup",c=>{c.key==="Enter"&&(T(this,tn,!0),this.setSelectedCountryItem(c.currentTarget.dataset.key))}),s.disabled&&l(this,ps,Bs).call(this,n,"disabled-opt"),n.append(o,h),r(this,Ki)===s.i?(l(this,ps,Bs).call(this,n,"selected-opt"),l(this,Pt,Ht).call(this,n,"aria-selected",!0)):l(this,Pt,Ht).call(this,n,"aria-selected",!1),n});r(this,Fn).append(...e)},nu=new WeakSet,Ab=function(e){const s=l(this,sn,lr).call(this,r(this,Gt).value);if(s){let i=l(this,jn,ia).call(this).frmt;i||(i=r(this,J).inputFormat||"");const n=l(this,sn,lr).call(this,s);r(this,Gt).value=l(this,Mr,Uo).call(this,e,n,i)}else r(this,Gt).value=e;if(!s)this.value=e;else{const i=r(this,J).valueFormat||"",n=l(this,sn,lr).call(this,r(this,Gt).value);this.value=i?l(this,Mr,Uo).call(this,e,n,i):r(this,Gt).value}},pc=new WeakSet,Kp=function(){T(this,Ki,""),r(this,J).selectedFlagImage&&(r(this,so).src=r(this,eo)),T(this,tn,!1),this.setMenu({open:!1}),this.value="",r(this,J).selectedCountryClearable&&l(this,Re,Ye).call(this,r(this,Ji),"display","none")},mc=new WeakSet,tm=function(){if(!l(this,Un,oa).call(this))return;l(this,uc,Jp).call(this);const e=l(this,dc,Qp).call(this),s=l(this,Jt,de).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},ru=new WeakSet,$b=function(e){r(this,Be).value=e},au=new WeakSet,yb=function(e){var s;if(e.key==="Enter"&&r(this,Ks).length){const i=(s=l(this,Jt,de).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCountryItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},Un=new WeakSet,oa=function(){return r(this,Ge).classList.contains("menu-open")},ou=new WeakSet,Mb=function(){const e=r(this,sc).getBoundingClientRect(),s=e.top,i=r(this,Si).innerHeight-e.bottom;i<s&&i<r(this,J).maxHeight?(l(this,Re,Ye).call(this,r(this,Ge),"flex-direction","column-reverse"),l(this,Re,Ye).call(this,r(this,Ge),"bottom","0%")):(l(this,Re,Ye).call(this,r(this,Ge),"flex-direction","column"),l(this,Re,Ye).call(this,r(this,Ge),"bottom","auto"))},fc=new WeakSet,em=function(e){e.code==="Space"&&(r(this,Be).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,Un,oa).call(this)?this.setMenu({open:!1}):(r(this,Be).focus(),this.setMenu({open:!0})))},lu=new WeakSet,Nb=function(){r(this,nc).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function xS({fieldKey:t,formID:e,attr:s,styleClasses:i}){const n=F.useRef(null),o=F.useRef(null),h=K(Bt)[t],c=K(Mc),{selectedFlagImage:d,selectedCountryClearable:p,searchClearable:m,optionFlagImage:E,detectCountryByIp:f,detectCountryByGeo:g,defaultCountryKey:_,searchPlaceholder:v,noCountryFoundText:R,inputFormat:w,valueFormat:x}=h.config;return F.useEffect(()=>{n!=null&&n.current||(n.current=At(`.${t}-phone-fld-wrp`));const C=o.current,O=n.current;C&&O&&"destroy"in C&&C.destroy();const y=document.getElementById("bit-grid-layout").contentWindow;y.bit_virtualized_list||(y.bit_virtualized_list=$m),y.observeElm||(y.observeElm=Fu);const{placeholderImage:P,options:$}=h,D={fieldKey:t,selectedFlagImage:d,selectedCountryClearable:p,searchClearable:m,optionFlagImage:E,detectCountryByIp:f,detectCountryByGeo:g,defaultCountryKey:_,searchPlaceholder:v,noCountryFoundText:R,placeholderImage:P,options:$,inputFormat:w,valueFormat:x,assetsURL:`${c.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:y,attributes:{option:bt(t,"option"),"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl"),"opt-a":bt(t,"opt-prefix")},classNames:{option:S(t,"option"),"opt-lbl-wrp":S(t,"opt-lbl-wrp"),"opt-icn":S(t,"opt-icn"),"opt-lbl":S(t,"opt-lbl"),"opt-prefix":S(t,"opt-prefix")}};o.current=new wS(O,D)},[h]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:i}),u.jsx(xt,{formID:e,fieldKey:t,fieldData:s,children:u.jsx("div",{className:`${t}-phone-fld-container`,children:u.jsxs("div",L(I({"data-dev-phone-fld-wrp":t,className:`${t}-phone-fld-wrp ${S(t,"phone-fld-wrp")} ${h.valid.disabled?"disabled":""} ${h.valid.readonly?"readonly":""}`,ref:n},A(t,"phone-fld-wrp")),{children:[u.jsx("input",I(I({name:t,type:"hidden",className:`${t}-phone-hidden-input`},"disabled"in h.valid&&{disabled:h.valid.disabled}),"readonly"in h.valid&&{readOnly:h.valid.readonly})),u.jsxs("div",{className:`${t}-phone-inner-wrp`,children:[u.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-live":"assertive","aria-labelledby":"country-label-2","aria-expanded":"false",tabIndex:h.valid.disabled?"-1":"0",children:[d&&u.jsx("div",{className:`${t}-selected-country-wrp`,children:u.jsx("img",I({"data-dev-selected-phone-img":t,alt:"Selected Country image","aria-hidden":"true",className:`${t}-selected-country-img ${S(t,"selected-phone-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},A(t,"selected-phone-img")))}),u.jsx("div",{className:`${t}-dpd-down-btn`,children:u.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),u.jsx("input",L(I({"data-testid":`${t}-phone-nmbr-inp`,"data-dev-phone-number-input":t,"aria-label":"Phone Number"},"ph"in s&&{placeholder:s.ph}),{type:"tel",className:`${t}-phone-number-input`,autoComplete:"tel",tabIndex:h.valid.disabled?"-1":"0"})),p&&u.jsx("button",L(I({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${S(t,"input-clear-btn")}`},A(t,"input-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),u.jsx("div",L(I({className:`${t}-option-wrp ${S(t,"option-wrp")}`,"data-dev-option-wrp":t},A(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp`,children:[u.jsxs("div",L(I({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${S(t,"option-search-wrp")}`},A(t,"option-search-wrp")),{children:[u.jsx("input",{"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,"aria-label":"Search for countries",type:"search",className:`${t}-opt-search-input`,placeholder:v,autoComplete:"off",tabIndex:"-1"}),u.jsxs("svg",L(I({className:`${t}-icn ${t}-opt-search-icn ${S(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},A(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),m&&u.jsx("button",L(I({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search",className:`${t}-icn ${t}-search-clear-btn ${S(t,"search-clear-btn")}`,"data-dev-search-clear-btn":t,tabIndex:"-1"},A(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),u.jsx("ul",L(I({className:`${t}-option-list ${S(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},A(t,"option-list")),{children:u.jsxs("li",{className:"option",children:[u.jsx("span",{className:"opt-prefix",children:"Prefix"}),u.jsxs("span",{className:"opt-lbl-wrp",children:[u.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),u.jsx("span",{className:"opt-lbl",children:"Option"})]}),u.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})}let Fi,Vo;function ju({form:t,input:e}){var a,h;if(t?Fi=t:(a=e==null?void 0:e.form)!=null&&a.id&&([,Fi]=e.form.id.split("form-")),typeof window[Fi]=="undefined")return!1;let s={};if(Vo=window[Fi].fields,t)s=SS();else if(e){if(!window[Fi].validateFocusLost)return!0;const c=Pb(e.name);s={[c]:e.value},Vo={[c]:Vo[c]}}let i=!0;const n=Object.entries(Vo);let{length:o}=n;for(;o--;){const[c,d]=n[o],p=d.typ,m=typeof s[c]=="string"?s[c].trim():s[c],E=document.querySelector(`#form-${Fi} .${c}`);if(window.getComputedStyle(E).display==="none"){Xc("",c);continue}let f="";if(!m){p==="check"&&(f=Db(m,d)),f=OS(d),Xc(f,c,d),f&&(i=!1);continue}if(p==="number"?f=LS(m,d):p==="email"?f=AS(m,d):p==="url"?f=$S(m,d):p==="decision-box"?f=yS(m,d):p==="check"||p==="select"?f=PS(m,d):p==="file-up"&&(f=MS(m,d)),(h=d==null?void 0:d.valid)!=null&&h.regexr&&(f=NS(m,d),f)){Xc(f,c,d),i=!1;continue}Xc(f,c,d),f&&(i=!1)}return i}const Pb=t=>t.slice(-2)==="[]"?t.slice(0,t.length-2):t,SS=()=>{const t=new FormData(document.getElementById(`form-${Fi}`)),e={};return Array.from(t.entries()).forEach(([i,n])=>{const o=Pb(i);o in Vo&&(e[o]?(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(n)):e[o]=n)}),e},Xc=(t,e,s)=>{var n,o;const i=document.querySelector(`#form-${Fi} #${e}-error`);i&&"err"in(s||{})&&(t&&((o=(n=s==null?void 0:s.err)==null?void 0:n[t])!=null&&o.show)?(i.innerHTML=s.err[t].custom?s.err[t].msg:s.err[t].dflt,i.parentElement.style.marginTop="5px",i.parentElement.style.height=`${i.offsetHeight}px`,RS(e)):(i.parentElement.style.marginTop=0,i.parentElement.style.height=0))},RS=t=>{const e=document.querySelector(`#form-${Fi} .btcd-fld-itm.${t}`),s=document.body.getBoundingClientRect(),n=e.getBoundingClientRect().top-s.top;CS(e)||window.scroll({top:n,behavior:"smooth"})},CS=t=>{const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},OS=t=>{var e;return(e=t==null?void 0:t.valid)!=null&&e.req?"required":""},ym=t=>(t||"").split("$_bf_$").join("\\"),LS=(t,e)=>e.mn&&Number(t)<Number(e.mn)?"mn":e.mx&&Number(t)>Number(e.mx)?"mx":"",AS=(t,e)=>e.err.invalid.show?new RegExp(ym(e.pattern)).test(t)?"":"invalid":"",$S=(t,e)=>e.err.invalid.show?new RegExp(ym(e.attr.pattern)).test(t)?"":"invalid":"",yS=(t,e)=>e.valid.req&&t!==e.msg.checked?"req":"",Db=(t,e)=>{var s;return(s=e==null?void 0:e.opt)!=null&&s.find(i=>i.req&&!(t||[]).includes(i.lbl))?"req":""},MS=(t,e)=>e.valid.req&&!Array.isArray(t)&&!t.name?"req":"",NS=(t,e)=>new RegExp(ym(e.valid.regexr),e.valid.flags||"").test(t)?"":"regexr",PS=(t,e)=>{const s=Array.isArray(t)?t:(t||"").split(","),i=Number(e.mn)||0,n=Number(e.mx)||e.opt.length;return s.length<i?"mn":s.length>n?"mx":e.typ==="check"?Db(t,e):""};function DS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:o}){const[a,h]=F.useState(t.val||""),c=F.useRef([]),[d,p]=F.useState("");c.current=t.opt.map((g,_)=>{var v;return(v=c.current[_])!=null?v:F.createRef()});const m=g=>{t.valid.disabled||(h(g.target.value),e&&e(g),Tt(n))},E=g=>{const{name:_,form:v}=g.target;ju({input:{name:_,form:v,value:a}})},f=g=>{h(g.target.value),p(g.target.value)};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:n,fieldData:t,children:u.jsxs("div",L(I({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},A(n,"cc")),{children:[t.opt.map((g,_)=>u.jsxs("div",L(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},A(n,"cw")),{children:[u.jsx("input",I(L(I(I(I(I({"data-testid":`${n}-ci`,id:`${n}-chk-${_}`,type:"radio",className:`${n}-ci ${S(n,"ci")}`,ref:c.current[_],name:n,value:g.val||g.lbl},g.check&&{checked:!0}),(t.valid.disabled||g.disabled)&&{disabled:!0}),t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{checked:a===(g.val||g.lbl)||!a&&g.check,onChange:m,onBlur:E}),A(n,"ci"))),u.jsxs("label",L(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${_}`,className:`${n}-cl ${S(n,"cl")}`},A(n,"cl")),{children:[u.jsx("span",L(I({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},A(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),u.jsx("span",L(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},A(n,"ct")),{children:u.jsx(Oe,{html:g.lbl})}))]}))]}),`opr-${_+22}`)),t.addOtherOpt&&u.jsxs("div",L(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},A(n,"cw")),{children:[u.jsx("input",I(L(I(I({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"radio",className:`${n}-ci ${S(n,"ci")}`,ref:c.current[t.opt.length],name:n,value:d},t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{disabled:t.valid.disabled,onChange:m,onBlur:E}),A(n,"ci"))),u.jsxs("label",L(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${S(n,"cl")}`},A(n,"cl")),{children:[u.jsx("span",L(I({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx  ${S(n,"bx")}`},A(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${S(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${S(n,"ck-icn")}`})})})),u.jsx("span",L(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},A(n,"ct")),{children:"Other.."}))]})),u.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:u.jsx("input",L(I(I(I({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${S(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:d,onChange:f}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var _t,Ri,ms,gc,ti,cu,co,Nr,hu,nn,ft,Ee,Ec,ho,bc,Pr,Vn,fs,uo,Ic,_c,Dr,du,Fb,uu,jb,Ci,bn,pu,kb,vc,sm,wc,im,mu,Gb,fu,Bb,Tc,nm,zn,la,gu,Ub,rn,cr,Fr,zo,an,hr,gs,Us,xc,rm,Sc,am;class FS{constructor(e,s){b(this,du);b(this,uu);b(this,Ci);b(this,pu);b(this,vc);b(this,wc);b(this,mu);b(this,fu);b(this,Tc);b(this,zn);b(this,gu);b(this,rn);b(this,Fr);b(this,an);b(this,gs);b(this,xc);b(this,Sc);b(this,_t,null);b(this,Ri,null);b(this,ms,[]);b(this,gc,null);b(this,ti,null);b(this,cu,null);b(this,co,!1);b(this,Nr,!1);b(this,hu,!1);b(this,nn,null);b(this,ft,{});b(this,Ee,null);b(this,Ec,null);b(this,ho,null);b(this,bc,null);b(this,Pr,null);b(this,Vn,null);b(this,fs,null);b(this,uo,null);b(this,Ic,[]);b(this,_c,null);b(this,Dr,!1);T(this,gc,(s==null?void 0:s.document)||document),T(this,ti,s==null?void 0:s.fieldKey),T(this,ft,{status:!1,indx:null}),typeof e=="string"?T(this,nn,r(this,gc).querySelector(e)):T(this,nn,e),T(this,cu,s==null?void 0:s.contentId),T(this,ms,(s==null?void 0:s.options)||[]),T(this,co,(s==null?void 0:s.showReviewLblOnHover)||!1),T(this,Nr,(s==null?void 0:s.showReviewLblOnSelect)||!1),T(this,hu,(s==null?void 0:s.selectedRating)||!1),T(this,_c,(s==null?void 0:s.defaultValue)||null),this.init()}init(){l(this,du,Fb).call(this),T(this,_t,r(this,nn).querySelectorAll(r(this,Ec))),T(this,Ri,l(this,mu,Gb).call(this,r(this,bc))),l(this,uu,jb).call(this),l(this,pu,kb).call(this),r(this,_t).forEach((e,s)=>{if(r(this,ft).status&&s<=r(this,ft).indx){const i=e.querySelector(r(this,Ee));if(l(this,an,hr).call(this,i,r(this,fs)),r(this,ms)[s].check){const n=e.querySelector(r(this,ho));n.checked=!0}}l(this,Ci,bn).call(this,e,"mouseover",()=>{const i=parseInt(e.dataset.indx);l(this,fu,Bb).call(this,i)}),l(this,Ci,bn).call(this,e,"mouseout",()=>{const{indx:i}=e.dataset;l(this,Tc,nm).call(this,i)}),l(this,Ci,bn).call(this,e,"click",i=>{const{indx:n}=e.dataset;i.preventDefault(),T(this,Dr,!0),l(this,zn,la).call(this,n)}),l(this,Ci,bn).call(this,e,"touchstart",i=>{i.preventDefault();const{indx:n}=e.dataset;T(this,Dr,!0),l(this,zn,la).call(this,n)}),l(this,Ci,bn).call(this,e,"touchend",()=>{const{indx:i}=e.dataset;l(this,Tc,nm).call(this,i)})})}set value(e){const s=r(this,ms).findIndex(i=>i.val===e);s!==-1&&l(this,zn,la).call(this,s)}get value(){const e=r(this,ms)[r(this,ft).indx];return e.val||e.lbl}destroy(){l(this,xc,rm).call(this),l(this,Sc,am).call(this),T(this,_t,null),T(this,Ri,null)}reset(){l(this,xc,rm).call(this),l(this,Sc,am).call(this),T(this,ft,{status:!1,indx:null}),T(this,uo,null),this.init()}}_t=new WeakMap,Ri=new WeakMap,ms=new WeakMap,gc=new WeakMap,ti=new WeakMap,cu=new WeakMap,co=new WeakMap,Nr=new WeakMap,hu=new WeakMap,nn=new WeakMap,ft=new WeakMap,Ee=new WeakMap,Ec=new WeakMap,ho=new WeakMap,bc=new WeakMap,Pr=new WeakMap,Vn=new WeakMap,fs=new WeakMap,uo=new WeakMap,Ic=new WeakMap,_c=new WeakMap,Dr=new WeakMap,du=new WeakSet,Fb=function(){T(this,Ee,`.${r(this,ti)}-rating-img`),T(this,Ec,`.${r(this,ti)}-rating-lbl`),T(this,ho,`.${r(this,ti)}-rating-input`),T(this,bc,`.${r(this,ti)}-rating-msg`),T(this,Pr,`${r(this,ti)}-rating-hover`),T(this,Vn,`${r(this,ti)}-rating-scale`),T(this,fs,`${r(this,ti)}-rating-selected`)},uu=new WeakSet,jb=function(){r(this,ms).forEach((e,s)=>{(r(this,_c)===e.val||e!=null&&e.check)&&(T(this,ft,{status:!0,indx:s}),r(this,Nr)?l(this,rn,cr).call(this,s):l(this,Fr,zo).call(this))})},Ci=new WeakSet,bn=function(e,s,i){e.addEventListener(s,i),r(this,Ic).push({selector:e,eventType:s,cb:i})},pu=new WeakSet,kb=function(){let e=-1;const s=r(this,ms).findIndex(i=>i.check);s!==-1&&(e=s),l(this,Ci,bn).call(this,r(this,nn),"keydown",i=>{if(i.key==="ArrowRight"){if(r(this,ms).length===e)return;e+=1;const n=i.target.children[e],o=parseInt(n.dataset.indx);if(r(this,ft).indx!==o&&l(this,zn,la).call(this,o),l(this,vc,sm).call(this,o),r(this,ms).length===e+1)return!1}else if(i.key==="ArrowLeft"){if(e===0||e-1<0)return;e-=1,l(this,zn,la).call(this,e),l(this,vc,sm).call(this,e)}}),l(this,Ci,bn).call(this,r(this,nn),"focusout",()=>{l(this,wc,im).call(this)})},vc=new WeakSet,sm=function(e){l(this,wc,im).call(this);const s=r(this,_t)[e].querySelector(r(this,Ee));l(this,an,hr).call(this,s,r(this,Vn))},wc=new WeakSet,im=function(){for(let e=0;e<r(this,ms).length;e+=1){const s=r(this,_t)[e].querySelector(r(this,Ee));l(this,gs,Us).call(this,s,r(this,Vn))}},mu=new WeakSet,Gb=function(e){return r(this,nn).querySelector(e)},fu=new WeakSet,Bb=function(e){var s,i;if(r(this,co)&&l(this,rn,cr).call(this,e),r(this,ft).indx&&(s=r(this,_t))!=null&&s[r(this,ft).indx]){const n=r(this,_t).length-1;r(this,_t).forEach(o=>{const a=o.querySelector(r(this,Ee));l(this,gs,Us).call(this,a,r(this,fs))});for(let o=0;o<=r(this,ft).indx;o+=1){const a=r(this,_t)[o].querySelector(r(this,Ee));l(this,gs,Us).call(this,a,r(this,fs))}if(r(this,ft).indx===n)for(let o=0;o<=r(this,ft).indx;o+=1){const a=r(this,_t)[o].querySelector(r(this,Ee));l(this,gs,Us).call(this,a,r(this,fs))}}for(let n=0;n<=e;n+=1)if(n<=e&&((i=r(this,_t))!=null&&i[n])){const o=r(this,_t)[n].querySelector(r(this,Ee));l(this,an,hr).call(this,o,r(this,Pr)),n===e&&l(this,an,hr).call(this,o,r(this,Vn))}},Tc=new WeakSet,nm=function(e){var s,i;r(this,co)&&(r(this,ft).status&&r(this,ft).indx===e?l(this,rn,cr).call(this,e):r(this,ft).status?l(this,rn,cr).call(this,r(this,ft).indx):r(this,Ri)&&l(this,Fr,zo).call(this));for(let n=0;n<=e;n+=1)if((s=r(this,_t))!=null&&s[n]){const o=r(this,_t)[n].querySelector(r(this,Ee));l(this,gs,Us).call(this,o,r(this,Pr)),l(this,gs,Us).call(this,o,r(this,Vn))}if(r(this,ft).status&&(i=r(this,_t))!=null&&i[r(this,ft).indx])for(let n=0;n<=r(this,ft).indx;n+=1){const o=r(this,_t)[n].querySelector(r(this,Ee));l(this,an,hr).call(this,o,r(this,fs))}r(this,Nr)?l(this,rn,cr).call(this,r(this,ft).indx):l(this,Fr,zo).call(this)},zn=new WeakSet,la=function(e){var i,n,o,a;if((i=r(this,_t))!=null&&i[r(this,ft).indx]){const h=r(this,_t)[r(this,ft).indx].querySelector(r(this,Ee));l(this,gs,Us).call(this,h,r(this,fs))}const s=(n=r(this,_t))==null?void 0:n[e].querySelector(r(this,ho));r(this,uo)&&r(this,Dr)?s!=null&&s.checked?(s.checked=!1,T(this,ft,{status:!1,indx:null})):(s.checked=!0,T(this,ft,{status:!0,indx:e})):(s.checked=!0,T(this,ft,{status:!0,indx:e}),T(this,uo,s)),s.dispatchEvent(new Event("input")),(o=r(this,_t))==null||o.forEach(h=>{const c=h.querySelector(r(this,Ee));l(this,gs,Us).call(this,c,r(this,Pr))}),(a=r(this,_t))==null||a.forEach((h,c)=>{const d=h.querySelector(r(this,Ee));c<=e&&r(this,ft).status?l(this,an,hr).call(this,d,r(this,fs)):l(this,gs,Us).call(this,d,r(this,fs))}),r(this,Nr)&&r(this,ft).status?l(this,rn,cr).call(this,e):l(this,Fr,zo).call(this),T(this,Dr,!1)},gu=new WeakSet,Ub=function(e){return r(this,ms)[e]},rn=new WeakSet,cr=function(e){const s=l(this,gu,Ub).call(this,e);r(this,Ri)&&s&&(r(this,Ri).innerText=s.lbl)},Fr=new WeakSet,zo=function(){r(this,Ri)&&(r(this,Ri).innerHTML="")},an=new WeakSet,hr=function(e,s){e.classList.add(s)},gs=new WeakSet,Us=function(e,s){e.classList.remove(s)},xc=new WeakSet,rm=function(){r(this,_t).forEach(e=>{const s=e.querySelector(r(this,Ee));l(this,gs,Us).call(this,s,r(this,fs))})},Sc=new WeakSet,am=function(){r(this,Ic).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function jS({attr:t,formID:e,fieldKey:s,styleClasses:i}){const{"*":n}=Su(),o=K(Es),{styleMode:a}=o,[h,c]=n.split("/"),d=a&&h==="field-theme-customize"&&c==="rating-msg",m=K(Bt)[s],E=F.useRef(null),f=F.useRef(null);return F.useEffect(()=>{var R;E!=null&&E.current||(E.current=At(`.${s}-inp-fld-wrp`));const g=f.current,_=E.current;g&&_&&"destroy"in g&&g.destroy();const v={options:t.opt,showReviewLblOnHover:t.showReviewLblOnHover,showReviewLblOnSelect:t.showReviewLblOnSelect,selectedRating:t.selectedRating,fieldKey:s,document:(R=document.getElementById("bit-grid-layout"))==null?void 0:R.contentDocument};f.current=new FS(_,v)},[m]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:i}),u.jsx(xt,{formID:e,fieldKey:s,fieldData:t,children:u.jsxs("div",L(I({"data-testid":`${s}-inp-fld-wrp`,"data-dev-inp-fld-wrp":s,className:`${s}-inp-fld-wrp ${S(s,"inp-fld-wrp")}`},A(s,"inp-fld-wrp")),{ref:E,children:[u.jsx("div",L(I({"data-testid":`${s}-rating-wrp`,"data-dev-rating-wrp":s,className:`${s}-rating-wrp ${S(s,"rating-wrp")}`},A(s,"rating-wrp")),{children:t.opt.map((g,_)=>u.jsxs("label",L(I({className:`${s}-rating-lbl ${S(s,"rating-lbl")}`,"data-testid":`${s}-rating-lbl`,"data-dev-rating-lbl":s,htmlFor:`${s}-rating-${_}`},A(s,"rating-lbl")),{"data-indx":_,children:[u.jsx("input",L(I({type:"radio",className:`${s}-rating-input`,name:"rating",value:g.val,"aria-label":`rating-input-${_}`,id:`${s}-rating-${_}`},g.check&&{checked:!0}),{defaultChecked:g==null?void 0:g.check})),u.jsx("img",L(I({className:`${s}-rating-img  ${S(s,"rating-img")}`,src:g.img,alt:g==null?void 0:g.lbl,"aria-label":g==null?void 0:g.lbl},A(s,"rating-img")),{"data-testid":`${s}-rating-input`,"data-dev-rating-img":s}))]}),g.val))})),u.jsx("span",L(I({className:`${s}-rating-msg ${S(s,"rating-msg")}`,"data-testid":`${s}-rating-msg`,"data-dev-rating-msg":s},A(s,"rating-msg")),{children:d&&(m.showReviewLblOnSelect||m.showReviewLblOnHover)&&"Rating Message"}))]}))})]})}var po,mo,Kt,Wn,fo,Rc,jr,Wo,Eu,Vb,bu,zb,Hn,ca,Iu,_u,Wb,Cc,om,ei,Di;class kS{constructor(e,s){b(this,jr);b(this,Eu);b(this,bu);b(this,Hn);b(this,_u);b(this,Cc);b(this,ei);b(this,po,null);b(this,mo,"");b(this,Kt,{clientId:"",options:{currency:"INR",amount:1,amountType:"fixed",theme:{},modal:{},prefill:{},notes:{}}});b(this,Wn,null);b(this,fo,null);b(this,Rc,null);b(this,Iu,e=>{var o;const s=document.getElementById(`${l(this,ei,Di).call(this)}`);s.classList.add("pos-rel","form-loading");const i=document.getElementById(`form-${l(this,ei,Di).call(this)}`),n=(o=l(this,ei,Di).call(this))==null?void 0:o.split("_")[1];if(typeof i!="undefined"&&i!==null){const a=bf_globals[l(this,ei,Di).call(this)];r(this,Wn)&&(a.entryId=r(this,Wn));const h=bfSelect(`input[name="${r(this,Kt).fieldKey}"]`,i);h?h.value=e.razorpay_payment_id:setHiddenFld({name:r(this,Kt).fieldKey,value:e.razorpay_payment_id,type:"text"},i);let c=bfSelect('button[type="submit"]',i);c||(c=document.createElement("button"),c.setAttribute("type","submit"),c.style.display="none",i.append(c)),c.click();const d={formID:n,fieldKey:r(this,Kt).fieldKey,transactionID:e.razorpay_payment_id,payment_type:r(this,Kt).payType==="subscription"?"subscription":"order",entry_id:r(this,Wn)},p=new URL(a==null?void 0:a.ajaxURL);p.searchParams.append("_ajax_nonce",a==null?void 0:a.nonce),p.searchParams.append("action","bitforms_save_razorpay_details"),fetch(p,{method:"POST",body:JSON.stringify(d)}).then(()=>{s.classList.remove("pos-rel","form-loading"),T(this,Wn,null)})}});Object.assign(r(this,Kt),s),T(this,fo,s.document||document),T(this,Rc,s.window||window),T(this,mo,`#form-${l(this,ei,Di).call(this)}`),typeof e=="string"?T(this,po,r(this,fo).querySelector(e)):T(this,po,e),this.init()}init(){l(this,Eu,Vb).call(this,l(this,jr,Wo).call(this,`.${r(this,Kt).fieldKey}-razorpay-btn`),"click",()=>{l(this,Cc,om).call(this)})}destroy(){l(this,bu,zb).call(this,l(this,jr,Wo).call(this,`.${r(this,Kt).fieldKey}-razorpay-btn`),"click",()=>{l(this,Cc,om).call(this)})}reset(){this.destroy(),this.init()}}po=new WeakMap,mo=new WeakMap,Kt=new WeakMap,Wn=new WeakMap,fo=new WeakMap,Rc=new WeakMap,jr=new WeakSet,Wo=function(e,s){return s?r(this,fo).querySelector(s).querySelector(e):r(this,po).querySelector(e)},Eu=new WeakSet,Vb=function(e,s,i){e.addEventListener(s,i)},bu=new WeakSet,zb=function(e,s,i){e.removeEventListener(s,i)},Hn=new WeakSet,ca=function(e){if(e){const s=window.bf_globals[l(this,ei,Di).call(this)].fields[e].fieldName;let i=l(this,jr,Wo).call(this,`[name="${s}"]`,r(this,mo));if(i&&i.type==="radio"&&(i=l(this,jr,Wo).call(this,`[name="${s}"]:checked`,r(this,mo))),i&&i.value)return i.value}return""},Iu=new WeakMap,_u=new WeakSet,Wb=function(e){return Ro(this,null,function*(){var h;const s=bf_globals[l(this,ei,Di).call(this)],i=document.getElementById(`${l(this,ei,Di).call(this)}`);i.classList.add("pos-rel","form-loading");const n=new URL(s==null?void 0:s.ajaxURL);n.searchParams.append("_ajax_nonce",s==null?void 0:s.nonce),n.searchParams.append("action","bitforms_create_razorpay_order");const a=yield(yield fetch(n,{method:"POST",body:JSON.stringify(e)})).json();return i.classList.remove("pos-rel","form-loading"),(h=a.data)!=null&&h.error||!a.success?"":a.data.id})},Cc=new WeakSet,om=function(){return Ro(this,null,function*(){const{currency:e,amount:s,amountType:i,amountFld:n,name:o,description:a,theme:h,prefill:c,modal:d,notes:p}=r(this,Kt).options,{confirm_close:m}=d,{contentId:E}=r(this,Kt);let f=p;typeof replaceFieldAndSmartValues!="undefined"&&f&&(f=JSON.parse(replaceFieldAndSmartValues(JSON.stringify(f),E))),typeof bf_modify_razorpay_notes!="undefined"&&(f=bf_modify_razorpay_notes(f));const g=Number(i==="dynamic"?l(this,Hn,ca).call(this,n):s)*100;try{yield isFormValidatedWithoutError(E)}catch(C){return!1}const _=yield saveFormProgress(E),v=_==null?void 0:_[E];if(!(v!=null&&v.success))return;v.entry_id&&T(this,Wn,v.entry_id);let R="";if(r(this,Kt).includeOrderId)if(!r(this,Kt).newOrderId&&r(this,Kt).orderIdFld!=="")R=l(this,Hn,ca).call(this,r(this,Kt).orderIdFld);else{const C={payIntegID:r(this,Kt).payIntegID,currency:e,amount:g,notes:f};R=yield l(this,_u,Wb).call(this,C)}const w={key:r(this,Kt).clientId,currency:e,amount:g,name:o,description:a,theme:h,order_id:R,prefill:{name:l(this,Hn,ca).call(this,c.prefillNameFld),email:l(this,Hn,ca).call(this,c.prefillEmailFld),contact:l(this,Hn,ca).call(this,c.prefillContactFld)},notes:f,modal:{backdropclose:!1,escape:!1,confirm_close:m},handler:C=>Ro(this,null,function*(){return r(this,Iu).call(this,C)})};new(r(this,Rc)).Razorpay(w).open()})},ei=new WeakSet,Di=function(){return r(this,Kt).contentId};function GS({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const o=K(Cu),h=K(Bt)[t],[c,d]=F.useState(""),p=F.useRef(null),m=F.useRef(null),[E,f]=F.useState(!1);return F.useEffect(()=>{if(!c){Zo({fieldKey:t,errorKey:"razorpayClientIdMissing",errorMsg:Li("Razorpay Client ID is missing"),errorUrl:`field-settings/${t}`});return}if(Ou(t,"razorpayClientIdMissing"),E)return;const _={src:"https://checkout.razorpay.com/v1/checkout.js",integrity:"",id:`bf-razorpay-script-${t}`,scriptInGrid:!1,callback:()=>{f(!0)}};Lu(_)},[c]),F.useEffect(()=>{if(!s.payIntegID){d("");return}const g=o==null?void 0:o.find(v=>v.id&&s.payIntegID&&Number(v.id)===Number(s.payIntegID));if(!g)return;const _=g.apiKey;d(_)},[s.payIntegID]),F.useEffect(()=>{if(!E)return;p!=null&&p.current||(p.current=At(`${t}-razorpay-wrp`));const g=p.current,_=m.current;if((!c||_&&g&&"destroy"in _)&&(_.destroy(),Tt(t)),!c)return;const v={clientId:c,fieldKey:t,options:h.options,onPaymentSuccess:R=>{console.log("success")},onPaymentFailed:()=>{console.log("failed")}};m.current=new kS(g,v)},[E,h]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:n}),u.jsxs(xt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[E&&c&&u.jsx("div",{className:"bf-form",children:u.jsx("div",{ref:p,className:`${t}-razorpay-wrp`,children:u.jsxs("button",L(I({type:"button","data-dev-razorpay-btn":t,className:`${t}-razorpay-btn ${S(t,"razorpay-btn")}`},A(t,"razorpay-btn")),{children:[u.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M7.077 6.476l-.988 3.569 5.65-3.589-3.695 13.54 3.752.004 5.457-20L7.077 6.476z",fill:"#fff"}),u.jsx("path",{d:"M1.455 14.308L0 20h7.202L10.149 8.42l-8.694 5.887z",fill:"#fff"})]}),u.jsxs("div",L(I({"data-dev-razorpay-btn-text":t,className:`${t}-razorpay-btn-text ${S(t,"razorpay-btn-text")}`},A(t,"razorpay-btn-text")),{children:[u.jsx("span",L(I({"data-dev-razorpay-btn-title":t,className:`${t}-razorpay-btn-title ${S(t,"razorpay-btn-title")}`},A(t,"razorpay-btn-title")),{children:h.btnTxt})),h.subTitl&&u.jsx("span",L(I({"data-dev-razorpay-btn-sub-title":t,className:`${t}-razorpay-btn-sub-title ${S(t,"razorpay-btn-sub-title")}`},A(t,"razorpay-btn-sub-title")),{children:"Secured by Razorpay"}))]}))]}))})}),(!E||!c)&&u.jsxs("p",{children:["Please select a Razorpay account from",u.jsx("strong",{children:" Field Settings "}),"to load Razorpay field."]})]})]})}function BS({fieldKey:t,formId:e,styleClasses:s}){var g;const i=F.useRef(null),n=F.useRef(null),a=K(Bt)[t],h=K(zr),{styleMode:c}=K(Es),d=((g=a.hidden)==null?void 0:g.includes(h))||!1,p=F.useRef(null),m=K(tI),{siteKey:E=""}=m||{};F.useEffect(()=>{window.renderGrecaptcha=f;const v={src:"https://www.google.com/recaptcha/api.js?onload=renderGrecaptcha&render=explicit",integrity:"",id:"bf-recaptcha-script",async:!0,defer:!0};return Lu(v),()=>{clearInterval(n.current),pm(v.id)}},[]);function f(){let _=At(`.${t}-recaptcha`);p.current!==null&&(_==null||_.remove(),window.grecaptcha.reset(p.current),_=document.createElement("div"),_.classList.add(`${t}-recaptcha`),i.current.appendChild(_)),p.current=window.grecaptcha.render(_,{sitekey:E,theme:a.config.theme,size:a.config.size}),Tt(t),n.current&&clearInterval(n.current),n.current=setInterval(()=>{window.grecaptcha.reset(p.current)},3e4)}return F.useEffect(()=>{window.grecaptcha&&f()},[a]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-recaptcha-container ${t}-fld-wrp ${c?"":"drag"} ${d?"fld-hide":""}`,children:u.jsx("div",{className:`${t}-recaptcha-wrp`,ref:i,children:u.jsx("div",{className:`${t}-recaptcha`})})})]})}function US({fieldKey:t,attr:e,styleClasses:s,formID:i}){var yi,Jn,Kn;const{formType:n}=Su(),o=Vr(s),[a,h]=cn(Xf),[c,d]=F.useState(Vr(a[t])),[p,m]=cn(Zf),[E,f]=cn(Qf),g=hn(Jf),_=K(Bt),{styleMode:v}=K(Es),[R,w]=cn(Io),x=F.useRef(null),{ref:C,isComponentVisible:O,setIsComponentVisible:y}=K(Kf),P=K(zr),$=K(mm),D=hn(tg),V=K(eg),{recalculateNestedField:B}=$,{fieldKey:G,parentFieldKey:X,counter:N}=B,W=um(),j=sg(),{btnPosition:M}=e;F.useEffect(()=>{if(N>0&&t===X){const st=ig(c,G);d(st),F.startTransition(()=>{h(ot=>Ce(ot,se=>{se[t]=st})),Tt(t)})}},[N,X,G]);const k=st=>{st.findIndex(ot=>ot.i==="shadow_block")<0&&(d(ot=>L(I({},ot),{[P]:st})),F.startTransition(()=>{h(ot=>Ce(ot,se=>{se[t]&&(se[t][P]=st)}))}))},U=(st,ot)=>{const se=vh(V.fieldData,"repeater");if(!se)return;const{newLayouts:zt}=lg(c,se,V.fieldSize,ot);d(zt),F.startTransition(()=>{h(Ae=>Ce(Ae,js=>{js[t]=zt})),D(!0),Tt(t)})},H=At(`.${t}-rpt-wrp`),Y=H&&Zc(H),lt=Y?Y.width-(Y.paddingLeft+Y.paddingRight+Y.borderLeft+Y.borderRight):0,nt=At(`.${t}-pair-btn-wrp`),ct=nt&&Zc(nt),Et=ct&&["row","row-reverse"].includes(M)?ct.width:0,Q=At(`.${t}-rpt-grid-wrp`),tt=Q&&Zc(Q),at=lt-Et-(tt?tt.paddingLeft+tt.paddingRight+tt.borderLeft+tt.borderRight:0),dt=()=>{m({}),y(!1)},pt=()=>{W(j.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),dt()},ri=st=>{W(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${st}`,{replace:!0}),dt()},Qn=(st,ot)=>{st.preventDefault(),st.stopPropagation(),Ie(st,ot)},et=(st,ot)=>{st.stopPropagation(),f(ot),Qo(p)||m({}),rt(),!v&&W(`/form/builder/${n}/${i}/field-settings/${ot}`)},rt=()=>{Qo(R)||(x.current!==null&&clearTimeout(x.current),x.current=setTimeout(()=>{w({}),x.current=null},700))},Ie=(st,ot)=>{var Dm;const{button:se}=st;let zt,Ae,js,tr;const er=C.current.getBoundingClientRect().top+window.scrollY,pn=C.current.getBoundingClientRect().left+window.scrollX,xo=At("#layout-wrapper"),So=Number(xo.style.width.match(/\d+/gi)),Nm=Number(xo.style.height.match(/\d+/gi)),Pm=170,Pc=200;if(se===0){const Fm=(Dm=At(`[data-key="${ot}"]`))==null?void 0:Dm.querySelector(".blk-wrp-down-btn"),ku=30,jm=Fm.getBoundingClientRect().top+ku,km=Fm.getBoundingClientRect().left;if(zt=km-pn+5,Ae=jm-er+2,js=zt+Pm>So,tr=Ae+Pc>Nm,js&&(zt=km+ku-pn-148),tr&&(Ae=jm-er-(Pc+ku+7)),E!==ot&&(zt+=3),O&&p.fldKey===ot&&p.x===zt&&p.y===Ae){dt();return}}else se===2&&(zt=st.clientX-pn+5,Ae=st.clientY-er,js=zt+Pm>So,tr=Ae+Pc>Nm,js&&(zt=st.clientX-pn-150),tr&&(Ae=st.clientY-er-Pc));f(ot),m({fldKey:ot,x:zt,y:Ae}),y(!0)},Vt=st=>{if(!rg){g(I({show:!0},ag.fieldClone));return}const ot=_[st];if(!vh(ot))return;const{newLayouts:se}=cg(st,c);d(se),F.startTransition(()=>{h(zt=>Ce(zt,Ae=>{Ae[t]=se})),Tt(t)})},Le=st=>{const ot=hg(st,c);d(ot),F.startTransition(()=>{h(se=>Ce(se,zt=>{zt[t]=ot})),Tt(t)}),W(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:u.jsx("div",L(I({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{children:u.jsxs("div",L(I({"data-testid":`${t}-rpt-fld-wrp`,"data-dev-rpt-fld-wrp":t,className:`${t}-rpt-fld-wrp ${S(t,"rpt-fld-wrp")}`},A(t,"rpt-fld-wrp")),{children:[u.jsxs("div",L(I({"data-testid":`${t}-rpt-wrp`,"data-dev-rpt-wrp":t,className:`${t}-rpt-wrp ${S(t,"rpt-wrp")}`},A(t,"rpt-wrp")),{children:[u.jsx("div",L(I({"data-testid":`${t}-rpt-grid-wrp`,"data-dev-rpt-grid-wrp":t,className:`${t}-rpt-grid-wrp ${S(t,"rpt-grid-wrp")}`},A(t,"rpt-grid-wrp")),{children:u.jsxs("div",{style:{width:at,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:st=>st.preventDefault(),onDragEnter:st=>st.preventDefault(),onMouseMove:()=>F.startTransition(()=>{D(!1)}),onMouseLeave:()=>F.startTransition(()=>{D(!0)}),children:[v?u.jsx("div",{className:"_frm-g",children:(Jn=c[P])==null?void 0:Jn.map(st=>u.jsx("div",{"data-key":st.i,className:st.i,onClick:ot=>et(ot,st.i),onKeyDown:ot=>et(ot,st.i),role:"button",tabIndex:0,onContextMenu:ot=>Qn(ot,st.i),children:u.jsx(F.Suspense,{fallback:u.jsx(Th,{layout:st}),children:u.jsx(Mh,{layoutItem:st,removeLayoutItem:Le,cloneLayoutItem:Vt,fields:_,formID:i,navigateToFieldSettings:pt,navigateToStyle:ri,handleContextMenu:Qn,resizingFld:R})})},st.i))}):u.jsx(dg,{width:at,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:V!==null&&P==="lg",className:"layout",style:{minHeight:V?ng()+40:null},onDrop:U,resizeHandles:["e"],droppingItem:V==null?void 0:V.fieldSize,onLayoutChange:k,cols:60,rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:c[P]||[],onDragStart:wh,onDragStop:()=>{F.startTransition(()=>{D(!0),Tt(t),rt()})},onResizeStart:wh,onResize:Xu,onResizeStop:()=>{rt(),Tt(t)},children:(yi=c[P])==null?void 0:yi.map(st=>u.jsx("div",{"data-key":st.i,className:`blk ${st.i===E&&"itm-focus"}`,onClick:ot=>et(ot,st.i),onKeyDown:ot=>et(ot,st.i),role:"button",tabIndex:0,onContextMenu:ot=>Qn(ot,st.i),children:u.jsx(F.Suspense,{fallback:u.jsx(Th,{layout:st}),children:u.jsx(Mh,{layoutItem:st,removeLayoutItem:Le,cloneLayoutItem:Vt,fields:_,formID:i,navigateToFieldSettings:pt,navigateToStyle:ri,handleContextMenu:Qn,resizingFld:R})})},st.i))}),!((Kn=c[P])!=null&&Kn.length)&&!V&&u.jsx("div",{className:"empty-layout",children:u.jsx("div",{className:"empty-layout-msg",children:u.jsx("div",{className:"empty-layout-msg-txt",children:u.jsx("span",{children:"Drag and drop fields here"})})})})]})})),u.jsxs("div",L(I({"data-testid":`${t}-pair-btn-wrp`,"data-dev-pair-btn-wrp":t,className:`${t}-pair-btn-wrp ${S(t,"pair-btn-wrp")}`},A(t,"pair-btn-wrp")),{children:[e.addBtn.show&&u.jsxs("button",L(I({"data-testid":t,"data-dev-rpt-add-btn":t,className:`${t}-rpt-add-btn ${S(t,"rpt-add-btn")}`},A(t,"rpt-add-btn")),{type:"button",children:[e.addBtnPreIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-add-btn-pre-i`,"data-dev-rpt-add-btn-pre-i":t,className:`${t}-rpt-add-btn-pre-i ${S(t,"rpt-add-btn-pre-i")}`,src:`${e.addBtnPreIcn}`,alt:""},A(t,"rpt-add-btn-pre-i"))),u.jsx(Oe,{html:e.addBtn.txt||""}),e.addBtnSufIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-add-btn-suf-i`,"data-dev-rpt-add-btn-suf-i":t,className:`${t}-rpt-add-btn-suf-i ${S(t,"rpt-add-btn-suf-i")}`,src:e.addBtnSufIcn,alt:""},A(t,"rpt-add-btn-suf-i")))]})),u.jsxs("button",L(I({"data-testid":t,"data-dev-rpt-rmv-btn":t,className:`${t}-rpt-rmv-btn ${S(t,"rpt-rmv-btn")}`},A(t,"rpt-rmv-btn")),{type:"button",children:[e.removeBtnPreIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-rmv-btn-pre-i`,"data-dev-rpt-rmv-btn-pre-i":t,className:`${t}-rpt-rmv-btn-pre-i ${S(t,"rpt-rmv-btn-pre-i")}`,src:`${e.removeBtnPreIcn}`,alt:""},A(t,"rpt-rmv-btn-pre-i"))),u.jsx(Oe,{html:e.removeBtn.txt||""}),e.removeBtnSufIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-rmv-btn-suf-i`,"data-dev-rpt-rmv-btn-suf-i":t,className:`${t}-rpt-rmv-btn-suf-i ${S(t,"rpt-rmv-btn-suf-i")}`,src:e.removeBtnSufIcn,alt:""},A(t,"rpt-btn-btn-suf-i")))]}))]}))]})),e.addToEndBtn.show&&u.jsx("div",L(I({"data-testid":`${t}-add-to-end-btn-wrp`,"data-dev-add-to-end-btn-wrp":t,className:`${t}-add-to-end-btn-wrp ${S(t,"add-to-end-btn-wrp")}`},A(t,"add-to-end-btn-wrp")),{children:u.jsxs("button",L(I({"data-testid":t,"data-dev-add-to-end-btn":t,className:`${t}-add-to-end-btn ${S(t,"add-to-end-btn")}`},A(t,"add-to-end-btn")),{type:"button",children:[e.addToEndBtnPreIcn&&u.jsx("img",I({"data-testid":`${t}-add-to-end-btn-pre-i`,"data-dev-add-to-end-btn-pre-i":t,className:`${t}-add-to-end-btn-pre-i ${S(t,"add-to-end-btn-pre-i")}`,src:e.addToEndBtnPreIcn,alt:""},A(t,"add-to-end-btn-pre-i"))),u.jsx(Oe,{html:e.addToEndBtn.txt||""}),e.addToEndBtnSufIcn&&u.jsx("img",I({"data-testid":`${t}-add-to-end-btn-suf-i`,"data-dev-add-to-end-btn-suf-i":t,className:`${t}-add-to-end-btn-suf-i ${S(t,"add-to-end-btn-suf-i")}`,src:e.addToEndBtnSufIcn,alt:""},A(t,"add-to-end-btn-suf-i")))]}))}))]}))}))})]})}var VS=F.memo(US);function zS({fieldKey:t,attr:e,styleClasses:s,formID:i}){var ri,Qn;const{formType:n}=Su(),o=Vr(s),[a,h]=cn(Xf),[c,d]=F.useState(Vr(a[t])),[p,m]=cn(Zf),[E,f]=cn(Qf),g=hn(Jf),_=K(Bt),{styleMode:v}=K(Es),[R,w]=cn(Io),x=F.useRef(null),{ref:C,isComponentVisible:O,setIsComponentVisible:y}=K(Kf),P=K(zr),$=K(mm),D=hn(tg),V=K(eg),{recalculateNestedField:B}=$,{fieldKey:G,parentFieldKey:X,counter:N}=B,W=um(),j=sg();F.useEffect(()=>{if(N>0&&t===X){const et=ig(c,G);d(et),F.startTransition(()=>{h(rt=>Ce(rt,Ie=>{Ie[t]=et})),Tt(t)})}},[N,X,G]);const M=et=>{et.findIndex(rt=>rt.i==="shadow_block")<0&&(d(rt=>L(I({},rt),{[P]:et})),F.startTransition(()=>{h(rt=>Ce(rt,Ie=>{Ie[t][P]=et}))}))},k=(et,rt)=>{const Ie=vh(V.fieldData,"section");if(!Ie)return;const{newLayouts:Vt}=lg(c,Ie,V.fieldSize,rt);d(Vt),F.startTransition(()=>{D(!0),h(Le=>Ce(Le,yi=>{yi[t]=Vt})),Tt(t)})},U=At(`.${t}-inp-fld-wrp`),H=U&&Zc(U),Y=H?H.width-(H.paddingLeft+H.paddingRight+H.borderLeft+H.borderRight):0,lt=()=>{m({}),y(!1)},nt=()=>{W(j.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),lt()},ct=et=>{W(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${et}`,{replace:!0}),lt()},Et=(et,rt)=>{et.preventDefault(),et.stopPropagation(),at(et,rt)},Q=(et,rt)=>{et.stopPropagation(),f(rt),Qo(p)||m({}),tt(),!v&&W(`/form/builder/${n}/${i}/field-settings/${rt}`)},tt=()=>{Qo(R)||(x.current!==null&&clearTimeout(x.current),x.current=setTimeout(()=>{w({}),x.current=null},700))},at=(et,rt)=>{var tr;const{button:Ie}=et;let Vt,Le,yi,Jn;const Kn=C.current.getBoundingClientRect().top+window.scrollY,st=C.current.getBoundingClientRect().left+window.scrollX,ot=At("#layout-wrapper"),se=Number(ot.style.width.match(/\d+/gi)),zt=Number(ot.style.height.match(/\d+/gi)),Ae=170,js=200;if(Ie===0){const er=(tr=At(`[data-key="${rt}"]`))==null?void 0:tr.querySelector(".blk-wrp-down-btn"),pn=30,xo=er.getBoundingClientRect().top+pn,So=er.getBoundingClientRect().left;if(Vt=So-st+5,Le=xo-Kn+2,yi=Vt+Ae>se,Jn=Le+js>zt,yi&&(Vt=So+pn-st-148),Jn&&(Le=xo-Kn-(js+pn+7)),E!==rt&&(Vt+=3),O&&p.fldKey===rt&&p.x===Vt&&p.y===Le){lt();return}}else Ie===2&&(Vt=et.clientX-st+5,Le=et.clientY-Kn,yi=Vt+Ae>se,Jn=Le+js>zt,yi&&(Vt=et.clientX-st-150),Jn&&(Le=et.clientY-Kn-js));f(rt),m({fldKey:rt,x:Vt,y:Le}),y(!0)},dt=et=>{if(!rg){g(I({show:!0},ag.fieldClone));return}const rt=_[et];if(!vh(rt))return;const{newLayouts:Ie}=cg(et,c);d(Ie),F.startTransition(()=>{h(Vt=>Ce(Vt,Le=>{Le[t]=Ie})),Tt(t)})},pt=et=>{const rt=hg(et,c);d(rt),F.startTransition(()=>{h(Ie=>Ce(Ie,Vt=>{Vt[t]=rt})),Tt()}),W(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:u.jsx("div",L(I({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{children:u.jsxs("div",{style:{width:Y,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:et=>et.preventDefault(),onDragEnter:et=>et.preventDefault(),onMouseMove:()=>F.startTransition(()=>{D(!1)}),onMouseLeave:()=>F.startTransition(()=>{D(!0)}),children:[v?u.jsx("div",{className:"_frm-g",children:c[P].map(et=>u.jsx("div",{"data-key":et.i,className:et.i,onClick:rt=>Q(rt,et.i),onKeyDown:rt=>Q(rt,et.i),role:"button",tabIndex:0,onContextMenu:rt=>Et(rt,et.i),children:u.jsx(F.Suspense,{fallback:u.jsx(Th,{layout:et}),children:u.jsx(Mh,{layoutItem:et,removeLayoutItem:pt,cloneLayoutItem:dt,navigateToFieldSettings:nt,navigateToStyle:ct,handleContextMenu:Et})})},et.i))}):u.jsx(dg,{width:Y,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:V!==null&&P==="lg",className:"layout",style:{minHeight:V?ng()+40:null},onDrop:k,resizeHandles:["e"],droppingItem:V==null?void 0:V.fieldSize,onLayoutChange:M,cols:eI[P],rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:c[P],onDragStart:wh,onDrag:Xu,onDragStop:()=>{F.startTransition(()=>{D(!0),Tt(t),tt()})},onResizeStart:wh,onResize:Xu,onResizeStop:()=>{tt(),Tt(t)},children:(ri=c[P])==null?void 0:ri.map(et=>u.jsx("div",{"data-key":et.i,className:`blk ${et.i===E&&"itm-focus"}`,onClick:rt=>Q(rt,et.i),onKeyDown:rt=>Q(rt,et.i),role:"button",tabIndex:0,onContextMenu:rt=>Et(rt,et.i),children:u.jsx(F.Suspense,{fallback:u.jsx(Th,{layout:et}),children:u.jsx(Mh,{layoutItem:et,removeLayoutItem:pt,cloneLayoutItem:dt,navigateToFieldSettings:nt,navigateToStyle:ct,handleContextMenu:Et})})},et.i))}),!((Qn=c[P])!=null&&Qn.length)&&!V&&u.jsx("div",{className:"empty-layout",children:u.jsx("div",{className:"empty-layout-msg",children:u.jsx("div",{className:"empty-layout-msg-txt",children:u.jsx("span",{children:"Drag and drop fields here"})})})})]})}))})]})}var WS=F.memo(zS);function HS({fieldKey:t,attr:e,styleClasses:s}){var o,a;const{styleMode:i}=K(Es),n=((o=e.valid)==null?void 0:o.hide)||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsx("div",L(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp ${i?"":"drag"} ${S(t,"fld-wrp")} ${n?"fld-hide":""}`},A(t,"fld-wrp")),{children:u.jsx(Oe,{html:e.content||((a=e==null?void 0:e.info)==null?void 0:a.content)})}))]})}/*!
* Signature Pad v4.2.0 | https://github.com/szimek/signature_pad
* (c) 2024 Szymon Nowak | Released under the MIT license
*/class $h{constructor(e,s,i,n){if(isNaN(e)||isNaN(s))throw new Error(`Point is invalid: (${e}, ${s})`);this.x=+e,this.y=+s,this.pressure=i||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class Mm{static fromPoints(e,s){const i=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Mm(e[1],i,n,e[2],s.start,s.end)}static calculateControlPoints(e,s,i){const n=e.x-s.x,o=e.y-s.y,a=s.x-i.x,h=s.y-i.y,c={x:(e.x+s.x)/2,y:(e.y+s.y)/2},d={x:(s.x+i.x)/2,y:(s.y+i.y)/2},p=Math.sqrt(n*n+o*o),m=Math.sqrt(a*a+h*h),E=c.x-d.x,f=c.y-d.y,g=m/(p+m),_={x:d.x+E*g,y:d.y+f*g},v=s.x-_.x,R=s.y-_.y;return{c1:new $h(c.x+v,c.y+R),c2:new $h(d.x+v,d.y+R)}}constructor(e,s,i,n,o,a){this.startPoint=e,this.control2=s,this.control1=i,this.endPoint=n,this.startWidth=o,this.endWidth=a}length(){let s=0,i,n;for(let o=0;o<=10;o+=1){const a=o/10,h=this.point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this.point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const d=h-i,p=c-n;s+=Math.sqrt(d*d+p*p)}i=h,n=c}return s}point(e,s,i,n,o){return s*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+o*e*e*e}}class qS{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,s,i){this._et.addEventListener(e,s,i)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,s,i){this._et.removeEventListener(e,s,i)}}function YS(t,e=250){let s=0,i=null,n,o,a;const h=()=>{s=Date.now(),i=null,n=t.apply(o,a),i||(o=null,a=[])};return function(...d){const p=Date.now(),m=e-(p-s);return o=this,a=d,m<=0||m>e?(i&&(clearTimeout(i),i=null),s=p,n=t.apply(o,a),i||(o=null,a=[])):i||(i=window.setTimeout(h,m)),n}}class yh extends qS{constructor(e,s={}){super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=i=>{i.buttons===1&&this._strokeBegin(i)},this._handleMouseMove=i=>{this._strokeMoveUpdate(i)},this._handleMouseUp=i=>{i.buttons===1&&this._strokeEnd(i)},this._handleTouchStart=i=>{if(i.cancelable&&i.preventDefault(),i.targetTouches.length===1){const n=i.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=i=>{i.cancelable&&i.preventDefault();const n=i.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=i=>{if(i.target===this.canvas){i.cancelable&&i.preventDefault();const o=i.changedTouches[0];this._strokeEnd(o)}},this._handlePointerStart=i=>{i.preventDefault(),this._strokeBegin(i)},this._handlePointerMove=i=>{this._strokeMoveUpdate(i)},this._handlePointerEnd=i=>{this._drawingStroke&&(i.preventDefault(),this._strokeEnd(i))},this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.dotSize=s.dotSize||0,this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=s.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in s?s.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?YS(yh.prototype._strokeUpdate,this.throttle):yh.prototype._strokeUpdate,this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:s}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,s.width,s.height),e.fillRect(0,0,s.width,s.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,s={}){return new Promise((i,n)=>{const o=new Image,a=s.ratio||window.devicePixelRatio||1,h=s.width||this.canvas.width/a,c=s.height||this.canvas.height/a,d=s.xOffset||0,p=s.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,d,p,h,c),i()},o.onerror=m=>{n(m)},o.crossOrigin="anonymous",o.src=e,this._isEmpty=!1})}toDataURL(e="image/png",s){switch(e){case"image/svg+xml":return typeof s!="object"&&(s=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(s))}`;default:return typeof s!="number"&&(s=void 0),this.canvas.toDataURL(e,s)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:s=!0}={}){s&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;this._drawingStroke=!0;const i=this._getPointGroupOptions(),n=Object.assign(Object.assign({},i),{points:[]});this._data.push(n),this._reset(i),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const s=e.clientX,i=e.clientY,n=e.pressure!==void 0?e.pressure:e.force!==void 0?e.force:0,o=this._createPoint(s,i,n),a=this._data[this._data.length-1],h=a.points,c=h.length>0&&h[h.length-1],d=c?o.distanceTo(c)<=this.minDistance:!1,p=this._getPointGroupOptions(a);if(!c||!(c&&d)){const m=this._addPoint(o,p);c?m&&this._drawCurve(m,p):this._drawDot(o,p),h.push({time:o.time,x:o.x,y:o.y,pressure:o.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._drawingStroke&&(this._strokeUpdate(e),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,s,i){const n=this.canvas.getBoundingClientRect();return new $h(e-n.left,s-n.top,i,new Date().getTime())}_addPoint(e,s){const{_lastPoints:i}=this;if(i.push(e),i.length>2){i.length===3&&i.unshift(i[0]);const n=this._calculateCurveWidths(i[1],i[2],s),o=Mm.fromPoints(i,n);return i.shift(),o}return null}_calculateCurveWidths(e,s,i){const n=i.velocityFilterWeight*s.velocityFrom(e)+(1-i.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n,i),a={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,a}_strokeWidth(e,s){return Math.max(s.maxWidth/(e+1),s.minWidth)}_drawCurveSegment(e,s,i){const n=this._ctx;n.moveTo(e,s),n.arc(e,s,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,s){const i=this._ctx,n=e.endWidth-e.startWidth,o=Math.ceil(e.length())*2;i.beginPath(),i.fillStyle=s.penColor;for(let a=0;a<o;a+=1){const h=a/o,c=h*h,d=c*h,p=1-h,m=p*p,E=m*p;let f=E*e.startPoint.x;f+=3*m*h*e.control1.x,f+=3*p*c*e.control2.x,f+=d*e.endPoint.x;let g=E*e.startPoint.y;g+=3*m*h*e.control1.y,g+=3*p*c*e.control2.y,g+=d*e.endPoint.y;const _=Math.min(e.startWidth+d*n,s.maxWidth);this._drawCurveSegment(f,g,_)}i.closePath(),i.fill()}_drawDot(e,s){const i=this._ctx,n=s.dotSize>0?s.dotSize:(s.minWidth+s.maxWidth)/2;i.beginPath(),this._drawCurveSegment(e.x,e.y,n),i.closePath(),i.fillStyle=s.penColor,i.fill()}_fromData(e,s,i){for(const n of e){const{points:o}=n,a=this._getPointGroupOptions(n);if(o.length>1)for(let h=0;h<o.length;h+=1){const c=o[h],d=new $h(c.x,c.y,c.pressure,c.time);h===0&&this._reset(a);const p=this._addPoint(d,a);p&&s(p,a)}else this._reset(a),i(o[0],a)}}toSVG({includeBackgroundColor:e=!1}={}){const s=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,o=0,a=this.canvas.width/i,h=this.canvas.height/i,c=document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),c.setAttribute("viewBox",`${n} ${o} ${a} ${h}`),c.setAttribute("width",a.toString()),c.setAttribute("height",h.toString()),e&&this.backgroundColor){const d=document.createElement("rect");d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill",this.backgroundColor),c.appendChild(d)}return this._fromData(s,(d,{penColor:p})=>{const m=document.createElement("path");if(!isNaN(d.control1.x)&&!isNaN(d.control1.y)&&!isNaN(d.control2.x)&&!isNaN(d.control2.y)){const E=`M ${d.startPoint.x.toFixed(3)},${d.startPoint.y.toFixed(3)} C ${d.control1.x.toFixed(3)},${d.control1.y.toFixed(3)} ${d.control2.x.toFixed(3)},${d.control2.y.toFixed(3)} ${d.endPoint.x.toFixed(3)},${d.endPoint.y.toFixed(3)}`;m.setAttribute("d",E),m.setAttribute("stroke-width",(d.endWidth*2.25).toFixed(3)),m.setAttribute("stroke",p),m.setAttribute("fill","none"),m.setAttribute("stroke-linecap","round"),c.appendChild(m)}},(d,{penColor:p,dotSize:m,minWidth:E,maxWidth:f})=>{const g=document.createElement("circle"),_=m>0?m:(E+f)/2;g.setAttribute("r",_.toString()),g.setAttribute("cx",d.x.toString()),g.setAttribute("cy",d.y.toString()),g.setAttribute("fill",p),c.appendChild(g)}),c.outerHTML}}var ts,Oc,on,Ps,Ds,Ve,go,Lc,Eo,Ac,Oi,qn,vu,$c,yc,Yn,ln,dr,wu,Hb,Tu,qb,xu,Yb,oe,we;class XS{constructor(e,s){b(this,ln);b(this,wu);b(this,Tu);b(this,xu);b(this,oe);b(this,ts,null);b(this,Oc,null);b(this,on,null);b(this,Ps,null);b(this,Ds,null);b(this,Ve,null);b(this,go,null);b(this,Lc,{});b(this,Eo,null);b(this,Ac,null);b(this,Oi,null);b(this,qn,null);b(this,vu,null);b(this,$c,null);b(this,yc,null);b(this,Yn,[]);T(this,Eo,s.document||document),T(this,Ac,s.window||window),typeof e=="string"?T(this,go,r(this,Eo).querySelector(e)):T(this,go,e),T(this,Lc,{maxWidth:s.maxWidth||2.5,penColor:s.penColor||"rgb(0, 0, 0)",backgroundColor:s.backgroundColor||"rgb(255, 255, 255)"}),T(this,Oi,s.fieldKey),T(this,Oc,s.imgTyp||"image/png"),T(this,yc,(s==null?void 0:s.isBuilder)||!1),T(this,vu,s==null?void 0:s.contentId),T(this,$c,s==null?void 0:s.assetsURL),this.init()}init(){T(this,ts,l(this,ln,dr).call(this,`.${r(this,Oi)}-signature-pad`)),T(this,on,l(this,ln,dr).call(this,`.${r(this,Oi)}-clr-btn`)),T(this,Ps,l(this,ln,dr).call(this,`.${r(this,Oi)}-undo-btn`)),T(this,Ds,l(this,ln,dr).call(this,`.${r(this,Oi)}-redo-btn`)),T(this,qn,l(this,ln,dr).call(this,`.${r(this,Oi)}-signature-fld`)),r(this,ts).style.cursor=`url(${r(this,$c)}pen.ico), crosshair`;const e=l(this,ln,dr).call(this,`.${r(this,Oi)}-signature-iframe`);e&&e.contentWindow.addEventListener("resize",()=>{this.resizeCanvas()}),T(this,Ve,new yh(r(this,ts),r(this,Lc))),this.resizeCanvas(),l(this,wu,Hb).call(this),l(this,Tu,qb).call(this),l(this,xu,Yb).call(this),l(this,oe,we).call(this,r(this,Ps)),l(this,oe,we).call(this,r(this,Ds)),l(this,oe,we).call(this,r(this,on)),r(this,Ve).addEventListener("endStroke",()=>{T(this,Yn,[]),this.putSignature(),l(this,oe,we).call(this,r(this,on),!1),l(this,oe,we).call(this,r(this,Ps),!1),l(this,oe,we).call(this,r(this,Ds))}),r(this,ts).addEventListener("touchmove",s=>{s.preventDefault();const i=s.touches[0],n=new MouseEvent("mousemove",{clientX:i.clientX,clientY:i.clientY});r(this,ts).dispatchEvent(n)})}resizeCanvas(){const e=Math.max(r(this,Ac).devicePixelRatio||1,1);r(this,ts).width=r(this,ts).offsetWidth*e,r(this,ts).height=r(this,ts).offsetHeight*e,r(this,ts).getContext("2d").scale(e,e),r(this,Ve).fromData(r(this,Ve).toData())}putSignature(){if(r(this,yc)||r(this,Ve).isEmpty())return;const e=r(this,Ve).toDataURL(r(this,Oc));r(this,qn).value=e}destroy(){T(this,Eo,null),T(this,ts,null)}reset(){r(this,Ve).clear(),r(this,qn).value=""}}ts=new WeakMap,Oc=new WeakMap,on=new WeakMap,Ps=new WeakMap,Ds=new WeakMap,Ve=new WeakMap,go=new WeakMap,Lc=new WeakMap,Eo=new WeakMap,Ac=new WeakMap,Oi=new WeakMap,qn=new WeakMap,vu=new WeakMap,$c=new WeakMap,yc=new WeakMap,Yn=new WeakMap,ln=new WeakSet,dr=function(e,s=null){return(s||r(this,go)).querySelector(e)},wu=new WeakSet,Hb=function(){r(this,on)&&r(this,on).addEventListener("click",()=>{r(this,Ve).clear(),r(this,qn).value="",l(this,oe,we).call(this,r(this,Ps)),l(this,oe,we).call(this,r(this,Ds)),l(this,oe,we).call(this,r(this,on))})},Tu=new WeakSet,qb=function(){r(this,Ps)&&r(this,Ps).addEventListener("click",()=>{const e=r(this,Ve).toData();if(e.length){const s=e.pop();r(this,Yn).push(s),r(this,Ve).fromData(e),this.putSignature(),e.length===0&&(r(this,qn).value=""),l(this,oe,we).call(this,r(this,Ds),!1),e.length||l(this,oe,we).call(this,r(this,Ps))}else l(this,oe,we).call(this,r(this,Ps))})},xu=new WeakSet,Yb=function(){r(this,Ds)&&r(this,Ds).addEventListener("click",()=>{const e=r(this,Ve).toData();r(this,Yn).length?(e.push(r(this,Yn).pop()),r(this,Ve).fromData(e),this.putSignature(),l(this,oe,we).call(this,r(this,Ps),!1),r(this,Yn).length||l(this,oe,we).call(this,r(this,Ds))):l(this,oe,we).call(this,r(this,Ds))})},oe=new WeakSet,we=function(e,s=!0){e&&(s?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))};function ZS({fieldKey:t,attr:e,formID:s,styleClasses:i}){const n=F.useRef(null),o=F.useRef(null),a=K(Mc),h=K(Io),c=F.useRef({resize:!1}),d=hn(Ru),p=F.useRef(null),m=F.useRef(0),f=K(Bt)[t];if(h.fieldKey===t){c.current.resize=!0;const g=At(`[data-key="${t}"]`),_=og(g);if(h.wrpHeight>=h.fldHeight){const v=`${h.fldHeight+(_-h.wrpHeight)}px`;o.current.style.height=v}}if(c.current.resize&&!h.fieldKey){c.current.resize=!1;const g=_=>`fields->${t}->classes->.${t}-fld->${_}`;d(_=>Ce(_,v=>{ha(v,g("height"),o.current.style.height),m.current+=1}))}return F.useEffect(()=>{var C;o.current||(p.current=At(`.${t}-inp-fld-wrp`));const g=n.current,_=p.current;g&&_&&"destroy"in g&&g.destroy();const{maxWidth:v,penColor:R,backgroundColor:w}=f.config,x={maxWidth:v,penColor:R,backgroundColor:w,document:(C=document.getElementById("bit-grid-layout"))==null?void 0:C.contentDocument,fieldKey:t,assetsURL:`${a.assetsURL}/../static/signature/`,isBuilder:!0};n.current=new XS(_,x)},[f,m.current]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:i}),u.jsx(xt,{formID:s,fieldKey:t,fieldData:e,children:u.jsxs("div",L(I({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{ref:p,children:[u.jsx("canvas",L(I({ref:o,className:`${t}-signature-pad ${S(t,"signature")}`,id:"canvas"},A(t,"signature-pad")),{"data-testid":`${t}-signature-pad`,"data-dev-fld":t})),u.jsxs("div",{className:`${t}-ctrl`,children:[!(f!=null&&f.clrBtnHide)&&u.jsxs("button",{id:"clear",className:`${t}-clr-btn`,type:"button","data-testid":`${t}-clr-btn`,"data-dev-clr-btn":t,children:[f.clrPreIcn&&u.jsx("img",I({"data-testid":`${t}-clr-btn-pre-i`,"data-dev-clr-btn-pre-i":t,className:`${t}-clr-btn-pre-i ${S(t,"clr-btn-pre-i")}`,src:f.clrPreIcn,alt:""},A(t,"clr-btn-pre-i"))),f.clrBtn,f.clrSufIcn&&u.jsx("img",I({"data-testid":`${t}-clr-btn-suf-i`,"data-dev-clr-btn-suf-i":t,className:`${t}-clr-btn-suf-i ${S(t,"clr-btn-suf-i")}`,src:f.clrSufIcn,alt:""},A(t,"clr-btn-suf-i")))]}),!(f!=null&&f.undoBtnHide)&&u.jsxs("button",{id:"undo",className:`${t}-undo-btn`,type:"button","data-testid":`${t}-undo-btn`,"data-dev-undo-btn":t,children:[(f==null?void 0:f.undoPreIcn)&&u.jsx("img",I({"data-testid":`${t}-undo-btn-pre-i`,"data-dev-undo-btn-pre-i":t,className:`${t}-undo-btn-pre-i ${S(t,"undo-btn-pre-i")}`,src:f.undoPreIcn,alt:""},A(t,"undo-btn-pre-i"))),f.undoBtn,(f==null?void 0:f.undoSufIcn)&&u.jsx("img",I({"data-testid":`${t}-undo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-undo-btn-suf-i ${S(t,"undo-btn-suf-i")}`,src:f.undoSufIcn,alt:""},A(t,"undo-btn-suf-i")))]}),!(f!=null&&f.redoBtnHide)&&u.jsxs("button",{id:"redo",className:`${t}-redo-btn`,type:"button","data-testid":`${t}-redo-btn`,"data-dev-redo-btn":t,children:[(f==null?void 0:f.redoPreIcn)&&u.jsx("img",I({"data-testid":`${t}-redo-btn-pre-i`,"data-dev-redo-btn-pre-i":t,className:`${t}-redo-btn-pre-i ${S(t,"redo-btn-pre-i")}`,src:f.redoPreIcn,alt:""},A(t,"redo-btn-pre-i"))),f.redoBtn,(f==null?void 0:f.redoSufIcn)&&u.jsx("img",I({"data-testid":`${t}-redo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-redo-btn-suf-i ${S(t,"redo-btn-suf-i")}`,src:f.redoSufIcn,alt:""},A(t,"redo-btn-suf-i")))]})]})]}))})]})}function QS({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:o}){var g;const a=e.typ==="url"?"text":e.typ,h=F.useRef(null),c=K(sI),{"--dir":d}=c,[p,m]=F.useState(e.val!==void 0?e.val:"");F.useEffect(()=>{e.val!==void 0&&!e.userinput?m(e.val):!e.val&&!e.userinput?m(e.defaultValue||""):e.conditional&&m(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),F.useEffect(()=>{if(e.hasWorkflow&&e.val===p&&s&&!e.userinput){const{current:_}=h;s(_)}},[p]);const E=_=>{const v=e.typ==="email"?_.target.value.toLowerCase():_.target.value;m(v)};F.useEffect(()=>{const _=fm(`#${t}`);_&&gm(_,"value",(v,R)=>m(e.typ==="email"?R.toLowerCase():R))},[]);const f=_=>ju({input:_.target});return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsxs(xt,{formID:n,fieldKey:t,fieldData:e,children:[u.jsxs("div",L(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{style:{"--bfv-fld-val":`'${p||50}'`},children:[u.jsx("input",L(I(L(I(I(I(I(I(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:h,className:`${t}-fld no-drg ${S(t,"fld")}`,type:a},"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{disabled:e.valid.disabled}),"mn"in e&&{min:e.mn}),"mx"in e&&{max:e.mx}),"step"in e&&{step:e.step}),"ac"in e&&{autoComplete:e.ac}),"name"in e&&{name:e.name}),s&&{onInput:s}),{onBlur:f,value:p,onChange:E}),A(t,"fld")),{style:{"--bfv-fill-lower-track":p?`${(p-(e.mn||0))/((e.mx||100)-(e.mn||0))*100}%`:"50%","--bfv-track-dir":d==="rtl"?"to left":"to right"}})),e.prefixIcn&&u.jsx("img",I({"data-testid":`${t}-pre-i`,"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},A(t,"pre-i"))),e.suffixIcn&&u.jsx("img",I({"data-testid":`${t}-suf-i`,"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},A(t,"suf-i"))),u.jsx("span",{className:`${t}-slider-val`,children:"Value: "})]})),((g=e.suggestions)==null?void 0:g.length)&&u.jsx("datalist",{id:`${t}-datalist`,children:e.suggestions.map(_=>u.jsx("option",{value:_.val||_.lbl,children:_.lbl},_.val||_.lbl))})]})]})}var JS=F.memo(QS);function KS({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const o=K(Cu),[a,h]=F.useState(""),d=K(Bt)[t],p=F.useRef(null),m=F.useRef(null),[E,f]=F.useState(!1),[g,_]=F.useState(!1);d==null||d.payType;const{locale:v,currency:R}=d||{};return F.useEffect(()=>{if(!s.payIntegID){h("");return}const w=o==null?void 0:o.find(x=>x.id&&s.payIntegID&&Number(x.id)===Number(s.payIntegID));if(w){const x=w.publishableKey;console.log("key",x),h(x)}},[s.payIntegID]),F.useEffect(()=>{if(!a){Zo({fieldKey:t,errorKey:"publishableKeyMissing",errorMsg:Li("Stripe publishable key is missing"),errorUrl:`field-settings/${t}`});return}_(!0),Ou(t,"publishableKeyMissing");const x={src:"https://js.stripe.com/v3/",integrity:"",id:`bf-stripe-script-${t}`,scriptInGrid:!1,callback:()=>{Tt(t),f(!0),_(!1)}};return Lu(x),()=>{pm(`bf-stripe-script-${t}`)}},[a,v,R]),F.useEffect(()=>{if(!E||g)return;p!=null&&p.current||(p.current=At(`#${t}-stripe-wrp`));const w=m.current,x=p.current;if((!a||w&&x&&"destroy"in w)&&(w.destroy(),Tt(t)),!a)return f(!1);I({},d.config.options),I({},d.config.layout)},[E,g]),u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:n}),u.jsxs(xt,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,isBuilder:i,children:[E&&a&&!g&&u.jsxs("div",{className:`${t}-stripe-wrp`,children:[u.jsxs("button",{"data-dev-stripe-btn":t,type:"button",className:`${t}-stripe-btn`,children:[u.jsx("svg",{"data-dev-stripe-icn":t,xmlns:"http://www.w3.org/2000/svg",className:`${t}-stripe-icn`,viewBox:"0 0 24 24",children:u.jsxs("g",{fill:"none",fillRule:"evenodd",children:[u.jsx("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),u.jsx("path",{fill:"currentColor",d:"M6.936 3.715C8.326 2.567 10.24 2 12.404 2c1.746 0 3.49.275 5.259.981a1 1 0 0 1 .629.929v3.64c0 1.244-1.286 1.916-2.291 1.5c-1.198-.494-2.532-.759-3.597-.759c-.217 0-.386.016-.512.04c-.05.01-.089.02-.12.03c.089.072.25.17.528.29c.309.134.68.263 1.129.416l.061.02c.42.144.892.305 1.367.495c.99.396 2.094.954 2.95 1.882c.885.957 1.445 2.241 1.45 3.954v.003c0 2.065-.835 3.755-2.305 4.904C15.511 21.454 13.542 22 11.34 22a14.62 14.62 0 0 1-5.777-1.21a1 1 0 0 1-.604-.918V16.18c0-1.241 1.297-1.937 2.322-1.47c1.39.636 2.901 1.038 4.059 1.038c.497 0 .761-.073.87-.134a.255.255 0 0 0 .017-.01a.352.352 0 0 0 .005-.062v-.005a.34.34 0 0 0-.04-.05c-.084-.086-.25-.205-.56-.353a13.21 13.21 0 0 0-1.112-.444a146.78 146.78 0 0 0-.22-.08c-.373-.135-.782-.283-1.189-.448c-.973-.395-2.066-.935-2.916-1.81c-.882-.908-1.453-2.127-1.453-3.753c0-2.026.782-3.717 2.194-4.883ZM8.21 5.257c-.918.758-1.467 1.866-1.467 3.34c0 1.104.366 1.824.888 2.361c.555.571 1.334.985 2.233 1.349c.369.15.736.283 1.107.417l.234.085c.437.16.888.329 1.288.519c.713.34 1.74.97 1.74 2.213c0 .375-.083.744-.277 1.077a2.015 2.015 0 0 1-.766.74c-.561.314-1.243.39-1.85.39c-1.373 0-2.957-.408-4.38-.998v2.447c1.503.562 3.001.803 4.38.803c1.898 0 3.388-.473 4.381-1.249c.964-.754 1.537-1.852 1.538-3.327c-.005-1.234-.39-2.03-.92-2.602c-.556-.603-1.334-1.026-2.223-1.382c-.426-.17-.855-.316-1.285-.463l-.047-.017a17.654 17.654 0 0 1-1.278-.473c-.387-.168-.809-.387-1.142-.703c-.362-.344-.634-.819-.634-1.424c0-.72.328-1.323.936-1.683c.52-.308 1.157-.385 1.739-.385c1.203 0 2.597.259 3.888.728V4.608C15.002 4.177 13.717 4 12.404 4c-1.836 0-3.255.481-4.195 1.257Z"})]})}),d.txt]}),u.jsx("button",{type:"button","data-dev-stripe-pay-btn":t,className:"stripe-pay-btn",children:d.config.payBtnTxt})]}),!g&&(!E||!a)&&u.jsxs("p",{children:["Please select a Stripe account from",u.jsx("strong",{children:" Field Settings "}),"to load Stripe field."]}),g&&u.jsx("p",{children:"Loading Stripe..."})]})]})}function tR({attr:t,buttonDisabled:e,handleReset:s,formID:i,fieldKey:n}){return u.jsx("div",L(I({className:`fld-wrp fld-wrp-${i} ${S(n,"fld-wrp")}`,"btcd-fld":"submit"},A(n,"fld-wrp")),{children:u.jsxs("div",L(I({className:`btcd-frm-sub ${t.align==="center"&&"j-c-c"} ${t.align==="right"&&"j-c-e"} ${S(n,"btcd-frm-sub")}`},A(n,"btcd-frm-sub")),{children:[u.jsxs("button",L(I({className:`btcd-sub-btn btcd-sub ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${S(n,"btcd-sub-btn")}`,disabled:e,type:"submit"},A(n,"btcd-sub-btn")),{children:[t.subBtnTxt,e&&u.jsx(iI,{clr:"currentColor",size:12,style:{display:"inline-block",marginLeft:5}})]})),"rstBtnTxt"in t&&u.jsx("button",L(I(I({className:`btcd-sub-btn btcd-rst ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${S(n,"btcd-rst")}`,type:"button"},s&&{onClick:s}),A(n,"btcd-rst")),{children:t.rstBtnTxt}))]}))}))}function eR({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:o}){const[a,h]=F.useState(e.val),c=K(Io),d=F.useRef(null),p=F.useRef({resize:!1}),m=hn(Ru);if(c.fieldKey===t){p.current.resize=!0;const g=At(`[data-key="${t}"]`),_=og(g);if(c.wrpHeight>=c.fldHeight){const v=`${c.fldHeight+(_-c.wrpHeight)}px`;d.current.style.height=v}}if(p.current.resize&&!c.fieldKey){p.current.resize=!1;const g=_=>`fields->${t}->classes->.${t}-fld->${_}`;m(_=>Ce(_,v=>{ha(v,g("height"),d.current.style.height)}))}F.useEffect(()=>{e.val!==void 0&&!e.userinput?h(e.val):!e.val&&!e.userinput?h(e.defaultValue||""):e.conditional&&h(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),F.useEffect(()=>{i&&h("")},[i]),F.useEffect(()=>{if(e.hasWorkflow&&e.val===a&&s&&!e.userinput){const{current:g}=d;s(g)}},[a]);const E=g=>{h(g.target.value)};F.useEffect(()=>{const g=fm(`#${t}`);g&&gm(g,"value",(_,v)=>h(v))},[]);const f=g=>{ju({input:g.target})};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:n,fieldKey:t,fieldData:e,children:u.jsxs("div",L(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{children:[u.jsx("textarea",L(I(I(I(I(I(I(I(I(L(I({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${S(t,"fld")}`},A(t,"fld")),{ref:d}),"disabled"in e&&{disabled:e.disabled}),"readonly"in e&&{readOnly:e.readonly}),"ph"in e&&{placeholder:e.ph}),"ac"in e&&{autoComplete:e.ac}),"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{readOnly:e.valid.disabled}),"name"in e&&{name:e.name}),s&&{onInput:s}),{onBlur:f,value:a,onChange:E})),e.prefixIcn&&u.jsx("img",I({"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},A(t,"pre-i"))),e.suffixIcn&&u.jsx("img",I({"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},A(t,"suf-i")))]}))})]})}function sR({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:o}){var E;const a=e.typ==="url"?"text":e.typ,h=F.useRef(null),[c,d]=F.useState(e.val!==void 0?e.val:"");F.useEffect(()=>{e.val!==void 0&&!e.userinput?d(e.val):!e.val&&!e.userinput?d(e.defaultValue||""):e.conditional&&d(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),F.useEffect(()=>{i&&d("")},[i]),F.useEffect(()=>{if(e.hasWorkflow&&e.val===c&&s&&!e.userinput){const{current:f}=h;s(f)}},[c]);const p=f=>{const g=e.typ==="email"?f.target.value.toLowerCase():f.target.value;d(g)};F.useEffect(()=>{const f=fm(`#${t}`);f&&gm(f,"value",(g,_)=>d(e.typ==="email"?_.toLowerCase():_))},[]);const m=f=>ju({input:f.target});return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsxs(xt,{formID:n,fieldKey:t,fieldData:e,children:[u.jsxs("div",L(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${S(t,"inp-fld-wrp")}`},A(t,"inp-fld-wrp")),{children:[u.jsx("input",I(L(I(I(I(I(I(I(I(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:h,className:`${t}-fld no-drg ${S(t,"fld")}`,type:a},"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{disabled:e.valid.disabled}),"readonly"in e.valid&&{readOnly:e.valid.readonly}),"ph"in e&&{placeholder:e.ph}),"mn"in e&&{min:e.mn}),"mx"in e&&{max:e.mx}),"ac"in e&&{autoComplete:e.ac}),"name"in e&&{name:e.name}),"inputMode"in e&&{inputMode:e.inputMode}),s&&{onInput:s}),{onBlur:m,value:c,onChange:p}),A(t,"fld"))),e.prefixIcn&&u.jsx("img",I({"data-testid":`${t}-pre-i`,"data-dev-pre-i":t,className:`${t}-pre-i ${S(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},A(t,"pre-i"))),e.suffixIcn&&u.jsx("img",I({"data-testid":`${t}-suf-i`,"data-dev-suf-i":t,className:`${t}-suf-i ${S(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},A(t,"suf-i")))]})),((E=e.suggestions)==null?void 0:E.length)&&u.jsx("datalist",{id:`${t}-datalist`,children:e.suggestions.map(f=>u.jsx("option",{value:f.val||f.lbl,children:f.lbl},f.val||f.lbl))})]})]})}var iR=F.memo(sR);function nR({fieldKey:t,attr:e,styleClasses:s}){var x;const{logo:i,title:n,subtitle:o,titleHide:a,subtitleHide:h,titleTag:c,subTitleTag:d}=e,p=K(zr),{styleMode:m}=K(Es),E=((x=e.valid.hidden)==null?void 0:x.includes(p))||!1,f=(C,O,y,P,$)=>u.jsx(Oe,{html:`<${C} data-dev-${y}=${t} className="${t}-${y} ${S(t,y)}">
  ${P}${O}${$}
</${C}>`}),g=C=>{const O=e.customAttributes[C];if(O==="")return;let y="";if(O){const P=O.length;let $=0;for(;$<P;)O[$].key&&O[$].value&&(y+=`${O[$].key}=${O[$].value} `),$+=1}return y},_=e.titlePreIcn?`<img data-dev-title-pre-i="${t}" ${g("title-pre-i")} classname="${t}-title-pre-i ${S(t,"title-pre-i")}"  src="${e.titlePreIcn}" alt="Title Leading Icon" />`:"",v=e.titleSufIcn?`<img data-dev-title-suf-i="${t}" ${g("title-suf-i")} classname="${t}-title-suf-i ${S(t,"title-suf-i")}" src="${e.titleSufIcn}" alt="Title Trailing Icon" />`:"",R=e.subTitlPreIcn?`<img data-dev-sub-titl-pre-i="${t}" ${g("sub-titl-pre-i")} classname="${t}-sub-titl-pre-i ${S(t,"sub-titl-pre-i")}" src="${e.subTitlPreIcn}" alt="Subtitle Leading Icon" />`:"",w=e.subTitlSufIcn?`<img data-dev-sub-titl-suf-i="${t}" ${g("sub-titl-suf-i")} classname="${t}-sub-titl-suf-i ${S(t,"sub-titl-suf-i")}" src="${e.subTitlSufIcn}" alt="Subtitle Trailing Icon" />`:"";return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:s}),u.jsxs("div",L(I({"data-dev-fld-wrp":t},A(t,"fld-wrp")),{className:`${t}-fld-wrp ${m?"":"drag"} ${E?"fld-hide":""} ${S(t,"fld-wrp")}`,children:[i&&u.jsx("img",I({"data-dev-logo":t,className:`${t}-logo ${S(t,"logo")}`,src:i,alt:"img"},A(t,"logo"))),u.jsxs("div",L(I({"data-dev-titl-wrp":t,className:`${t}-titl-wrp ${S(t,"titl-wrp")}`},A(t,"titl-wrp")),{children:[!a&&f(c,n,"title",_,v),!h&&f(d,o,"sub-titl",R,w)]}))]}))]})}var rR=""+new URL("bf-773-70.svg",import.meta.url).href;function aR({fieldKey:t,styleClasses:e}){var h;const i=K(Bt)[t],n=K(zr),{styleMode:o}=K(Es),a=((h=i.hidden)==null?void 0:h.includes(n))||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:e}),u.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-turnstile-container ${t}-fld-wrp ${o?"":"drag"} ${a?"fld-hide":""}`,children:u.jsx("div",{className:`${t}-turnstile-wrp`,children:u.jsx("img",{height:"70",src:rR,alt:"cloudflare turnstile reCaptcha"})})})]})}function oR({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:o}){var m,E;let{checked:a}=t.valid;const h=t.val||(a?t.msg.checked:t.msg.unchecked),[c,d]=F.useState(h);c===t.msg.unchecked?a=!1:c===t.msg.checked&&(a=!0);const p=f=>{if(t.valid.disabled)return;f.target.checked?d(t.msg.checked):d(t.msg.unchecked);const{form:g}=f.target;validateForm({input:{name:t.name,form:g,value:f.target.checked?t.msg.checked:t.msg.unchecked}})};return u.jsxs(u.Fragment,{children:[u.jsx(ut,{styleClasses:o}),u.jsx(xt,{formID:i,fieldKey:n,fieldData:t,noLabel:!0,children:u.jsxs("div",L(I({"data-dev-cc":n,className:`${n}-cc ${S(n,"cc")}`},A(n,"cc")),{children:[u.jsx("svg",{className:`${n}-cks`,children:u.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:u.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),u.jsxs("div",L(I({"data-dev-cw":n,className:`${n}-cw ${S(n,"cw")}`},A(n,"cw")),{children:[u.jsx("input",L(I(L(I(I(I({"data-testid":n,id:`${n}-decision`,type:"checkbox",className:`${n}-ci`},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),{defaultValue:(m=t==null?void 0:t.info)==null?void 0:m.lbl}),"name"in t&&{name:t.name}),{checked:a,value:c,onChange:p})),u.jsxs("label",L(I({"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-decision`,className:`${n}-cl ${S(n,"cl")}`},A(n,"cl")),{children:[u.jsx("span",L(I({"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${S(n,"bx")}`},A(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn`})})})),u.jsx("span",L(I({"data-dev-ct":n,className:`${n}-ct ${S(n,"ct")}`},A(n,"ct")),{children:u.jsx(Oe,{html:t.lbl||((E=t==null?void 0:t.info)==null?void 0:E.lbl)})}))]}))]}))]}))})]})}function lR({atts:t,fieldKey:e,formID:s,onBlurHandler:i,resetFieldValue:n,handleReset:o,fieldData:a,buttonDisabled:h,contentID:c,isBuilder:d,entryID:p,handleFormValidationErrorMessages:m}){var f,g,_,v,R,w,x,C,O,y,P,$,D,V,B,G,X,N,W,j,M,k,U,H,Y,lt,nt,ct,Et,Q,tt,at,dt;const E=K(Ru);if(!(Qo(E)||!(t!=null&&t.typ))){switch(t==null?void 0:t.typ){case"text":case"number":case"password":case"username":case"email":case"url":case"date":case"datetime-local":case"time":case"month":case"week":case"color":return u.jsx(iR,{fieldKey:e,styleClasses:(f=E.fields[e])==null?void 0:f.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"textarea":return u.jsx(eR,{fieldKey:e,styleClasses:(g=E.fields[e])==null?void 0:g.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"check":return u.jsx(M0,{fieldKey:e,styleClasses:(_=E.fields[e])==null?void 0:_.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"radio":return u.jsx(DS,{fieldKey:e,styleClasses:(v=E.fields[e])==null?void 0:v.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"html-select":return u.jsx(gS,{fieldKey:e,styleClasses:(R=E.fields[e])==null?void 0:R.classes,isBuilder:d,formID:s,attr:t});case"select":return u.jsx(dS,{fieldKey:e,styleClasses:(w=E.fields[e])==null?void 0:w.classes,isBuilder:d,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"file-up":return u.jsx(pS,{fieldKey:e,styleClasses:(x=E.fields[e])==null?void 0:x.classes,formID:s,attr:t,entryID:p,resetFieldValue:n});case"advanced-file-up":return u.jsx($0,{fieldKey:e,styleClasses:(C=E.fields[e])==null?void 0:C.classes,formID:s,attr:t,entryID:p,resetFieldValue:n});case"submit":return u.jsx(tR,{fieldKey:e,styleClasses:(O=E.fields[e])==null?void 0:O.classes,formID:s,attr:t,buttonDisabled:h,handleReset:o});case"hidden":return u.jsx(mS,{fieldKey:e,styleClasses:(y=E.fields[e])==null?void 0:y.classes,formID:s,attr:t});case"recaptcha":return u.jsx(BS,{fieldKey:e,styleClasses:(P=E.fields[e])==null?void 0:P.classes,formID:s,attr:t});case"decision-box":return u.jsx(oS,{fieldKey:e,styleClasses:($=E.fields[e])==null?void 0:$.classes,formID:s,attr:t,fieldData:a,onBlurHandler:i,resetFieldValue:n});case"gdpr":return u.jsx(oR,{fieldKey:e,styleClasses:(D=E.fields[e])==null?void 0:D.classes,formID:s,attr:t,fieldData:a,onBlurHandler:i,resetFieldValue:n});case"html":return u.jsx(fS,{fieldKey:e,styleClasses:(V=E.fields[e])==null?void 0:V.classes,formID:s,attr:t,fieldData:a,resetFieldValue:n});case"shortcode":return u.jsx(HS,{fieldKey:e,styleClasses:(B=E.fields[e])==null?void 0:B.classes,formID:s,attr:t,fieldData:a,resetFieldValue:n});case"button":return u.jsx(y0,{fieldKey:e,styleClasses:(G=E.fields[e])==null?void 0:G.classes,formID:s,attr:t,fieldData:a,buttonDisabled:h,handleReset:o});case"paypal":return u.jsx(vS,{isBuilder:d,styleClasses:(X=E.fields[e])==null?void 0:X.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:a,resetFieldValue:n,handleFormValidationErrorMessages:m});case"stripe":return u.jsx(KS,{isBuilder:d,styleClasses:(N=E.fields[e])==null?void 0:N.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:a,resetFieldValue:n,handleFormValidationErrorMessages:m});case"mollie":return u.jsx(IS,{isBuilder:d,styleClasses:(W=E.fields[e])==null?void 0:W.classes,fieldKey:e,formID:s,attr:t,contentID:c,fieldData:a,resetFieldValue:n,handleFormValidationErrorMessages:m});case"razorpay":return u.jsx(GS,{fieldKey:e,styleClasses:(j=E.fields[e])==null?void 0:j.classes,contentID:c,formID:s,attr:t,buttonDisabled:h,resetFieldValue:n,handleFormValidationErrorMessages:m});case"title":return u.jsx(nR,{fieldKey:e,styleClasses:(M=E.fields[e])==null?void 0:M.classes,formID:s,attr:t});case"image":return u.jsx(ES,{fieldKey:e,styleClasses:(k=E.fields[e])==null?void 0:k.classes,formID:s,attr:t});case"divider":return u.jsx(lS,{fieldKey:e,styleClasses:(U=E.fields[e])==null?void 0:U.classes,formID:s,attr:t});case"currency":return u.jsx(aS,{fieldKey:e,styleClasses:(H=E.fields[e])==null?void 0:H.classes,formID:s,attr:t,contentID:c});case"country":return u.jsx(iS,{fieldKey:e,styleClasses:(Y=E.fields[e])==null?void 0:Y.classes,formID:s,attr:t,contentID:c});case"phone-number":return u.jsx(xS,{fieldKey:e,styleClasses:(lt=E.fields[e])==null?void 0:lt.classes,formID:s,attr:t,contentID:c});case"section":return u.jsx(WS,{fieldKey:e,styleClasses:(nt=E.fields[e])==null?void 0:nt.classes,formID:s,attr:t});case"repeater":return u.jsx(VS,{fieldKey:e,styleClasses:(ct=E.fields[e])==null?void 0:ct.classes,formID:s,attr:t});case"rating":return u.jsx(jS,{fieldKey:e,styleClasses:(Et=E.fields[e])==null?void 0:Et.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"signature":return u.jsx(ZS,{fieldKey:e,styleClasses:(Q=E.fields[e])==null?void 0:Q.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"image-select":return u.jsx(bS,{fieldKey:e,styleClasses:(tt=E.fields[e])==null?void 0:tt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"turnstile":return u.jsx(aR,{fieldKey:e,styleClasses:(at=E.fields[e])==null?void 0:at.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"range":return u.jsx(JS,{fieldKey:e,styleClasses:(dt=E.fields[e])==null?void 0:dt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"blank":return u.jsx("div",{className:"blnk-blk drag"})}return u.jsx("div",{children:"Loading..."})}}var cR=F.memo(lR);function Mh({layoutItem:t,removeLayoutItem:e,cloneLayoutItem:s,navigateToFieldSettings:i,navigateToStyle:n,handleContextMenu:o}){const a=K(Bt),h=K(aI),c=K(Io),d=m=>{m.stopPropagation(),n(t.i)},p=hn(mm);return F.useEffect(()=>{p(m=>L(I({},m),{reCalculateFieldHeights:m.reCalculateFieldHeights+1}))},[]),u.jsxs(u.Fragment,{children:[c.fieldKey===t.i&&u.jsx("span",{className:"resize-txt",children:`w: ${c.w||t.w}, x: ${c.x||t.x}`}),u.jsxs("div",{className:"blk-icn-wrp pos-abs flx",children:[u.jsx("button",{type:"button",className:"drag g-c us-n blk-wrp-btn",style:{cursor:"move"},title:Li("Move"),"data-testid":`${t.i}-move-btn`,children:u.jsx(cI,{size:"15",stroke:"3"})}),u.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:Li("Style"),onClick:d,"data-testid":`${t.i}-style-btn`,children:u.jsx(oI,{stroke:2.3,height:"15",width:"13"})}),u.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:Li("Settings"),onClick:i,"data-testid":`${t.i}-settings-btn`,children:u.jsx(nI,{size:"18",stroke:2})}),u.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:Li("Clone"),onClick:()=>s(t.i),"data-testid":`${t.i}-copy-btn`,children:u.jsx(rI,{size:"17",stroke:2})}),u.jsx(hI,{className:"g-c drag us-n no-drg blk-wrp-btn",removeLayoutItem:e,fieldId:t.i}),u.jsx("button",{"data-close":!0,type:"button",className:"g-c us-n no-drg blk-wrp-btn blk-wrp-down-btn",draggable:"false",style:{cursor:"pointer"},title:Li("More Options"),onClick:m=>o(m,t.i),"data-testid":`${t.i}-more-options`,children:u.jsx(lI,{size:"21",stroke:2.2})})]}),u.jsx(hR,{fields:a,layoutItem:t,formID:h})]})}const hR=({layoutItem:t,formID:e,fields:s})=>{const i=s[t.i];return u.jsx(cR,{formID:e,atts:i,fieldKey:t.i})};export{Mh as default};
